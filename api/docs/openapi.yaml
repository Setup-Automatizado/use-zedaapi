openapi: 3.1.0
info:
  title: FunnelChat API (Whatsmeow Bridge)
  version: 0.1.0
  description: "REST API compatible with Z-API schemas, backed by Whatsmeow.

    The specification currently covers the instance management surface implemented in this phase.

    "
servers:
  - url: https://api.example.com
    description: Production placeholder
  - url: http://localhost:8080
    description: Local development
tags:
  - name: System
    description: Health checks and system status endpoints
  - name: Instance
    description: WhatsApp instance lifecycle management (connect, disconnect, QR code)
  - name: Webhooks
    description: Webhook configuration for receiving events
  - name: Messages
    description: Send and manage WhatsApp messages
  - name: Contacts
    description: Contact management and validation
  - name: Groups
    description: Group chat management
  - name: Communities
    description: WhatsApp Communities management
  - name: Newsletters
    description: WhatsApp Channels/Newsletters management
  - name: Partner
    description: Partner/integrator management endpoints
  - name: Queue
    description: Message queue inspection and management
  - name: Status Cache
    description: |
      Message delivery status caching system for tracking receipts (sent, delivered, read, played).
      Particularly useful for group messages where tracking individual participant statuses is important.

      **Key Features:**
      - Cache status events in Redis for 24 hours
      - Query by messageId, groupId, or phone
      - Aggregate participant statistics for group messages
      - Optional webhook suppression to reduce serverless costs
      - Manual flush to trigger pending webhooks
  - name: Media
    description: |
      Media file storage and serving system.

      **Key Features:**
      - Serve media files with HMAC signature validation
      - Time-limited signed URLs for secure access
      - Statistics endpoint for storage monitoring
      - Instance-scoped media organization
components:
  securitySchemes:
    ClientTokenAuth:
      type: apiKey
      in: header
      name: Client-Token
      description: Instance client token obtained during provisioning.
    PartnerBearer:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Partner integrator bearer token.
  parameters:
    InstanceId:
      name: instanceId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Unique instance identifier.
    InstanceToken:
      name: instanceToken
      in: path
      required: true
      schema:
        type: string
      description: Token returned during provisioning.
  schemas:
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
      required:
        - error
    HealthStatusResponse:
      type: object
      description: Liveness probe response.
      properties:
        status:
          type: string
          example: ok
        service:
          type: string
          example: whatsapp-api
      required:
        - status
        - service
      additionalProperties: false
    ReadinessComponentStatus:
      type: object
      description: Status information for a single dependency checked by the readiness probe.
      properties:
        status:
          type: string
          enum:
            - healthy
            - degraded
            - unhealthy
        error:
          type: [string, "null"]
        duration_ms:
          type: integer
          format: int64
          description: Time spent executing the check in milliseconds.
        circuit_state:
          type: [string, "null"]
          description: Circuit breaker state reported by the lock manager (when available).
      required:
        - status
      additionalProperties: false
    ReadinessResponse:
      type: object
      description: Readiness probe payload containing aggregated dependency status.
      properties:
        ready:
          type: boolean
        observed_at:
          type: string
          format: date-time
        checks:
          type: object
          additionalProperties:
            $ref: "#/components/schemas/ReadinessComponentStatus"
          description: "Map of dependency name to component status (e.g. `database`, `redis`)."
      required:
        - ready
        - observed_at
        - checks
      additionalProperties: false
    InstanceStatusResponse:
      type: object
      description: Z-API compatible payload returned by `/instances/{instanceId}/token/{instanceToken}/status`.
      properties:
        connected:
          type: boolean
          description: Mirrors Z-API `connected`, indicating if the instance is linked to WhatsApp.
        error:
          type: [string, "null"]
          description: Same semantics as Z-API, detailing why the instance is not connected (empty string when everything is ok).
        smartphoneConnected:
          type: boolean
          description: Matches Z-API `smartphoneConnected`, signalling if the paired device has internet access.
      required:
        - connected
        - error
        - smartphoneConnected
      additionalProperties: false
    QRCodeImageResponse:
      type: object
      properties:
        image:
          type: string
          description: "PNG image encoded as data URL (`data:image/png;base64,...`)."
      required:
        - image
      additionalProperties: false
    PhoneCodeResponse:
      type: object
      properties:
        code:
          type: string
          description: "Six-character pairing code formatted with dash (e.g., `ABCD-EF`)."
      required:
        - code
      additionalProperties: false
    InstanceDeviceDetails:
      type: object
      properties:
        sessionName:
          type: string
        device_model:
          type: string
        wa_version:
          type: string
        mcc:
          type: string
        mnc:
          type: string
        os_version:
          type: string
        device_manufacturer:
          type: string
        osbuildnumber:
          type: string
        platform:
          type: string
      additionalProperties: false
    InstanceDeviceResponse:
      type: object
      properties:
        phone:
          type: string
          description: WhatsApp number linked to the instance.
        imgUrl:
          type: [string, "null"]
          description: Direct URL to the current profile picture (null when unavailable).
        name:
          type: string
          description: Latest push name associated with the instance.
        device:
          $ref: "#/components/schemas/InstanceDeviceDetails"
        originalDevice:
          type: string
          description: Raw device/platform identifier reported by WhatsApp (e.g. `smba`, `smbi`).
        sessionId:
          type: integer
          format: int64
          description: Device identifier assigned by WhatsApp (0 for the primary phone).
        isBusiness:
          type: boolean
          description: Indicates if the paired account is a business profile.
      required:
        - phone
        - imgUrl
        - name
        - device
        - sessionId
        - isBusiness
      additionalProperties: false
    OperationStatusResponse:
      type: object
      properties:
        status:
          type: string
      required:
        - status
      additionalProperties: false
    WebhookSettings:
      type: object
      properties:
        deliveryCallbackUrl:
          type: [string, "null"]
          format: uri
        receivedCallbackUrl:
          type: [string, "null"]
          format: uri
        receivedAndDeliveryCallbackUrl:
          type: [string, "null"]
          format: uri
        messageStatusCallbackUrl:
          type: [string, "null"]
          format: uri
        disconnectedCallbackUrl:
          type: [string, "null"]
          format: uri
        presenceChatCallbackUrl:
          type: [string, "null"]
          format: uri
        connectedCallbackUrl:
          type: [string, "null"]
          format: uri
        notifySentByMe:
          type: boolean
      additionalProperties: false
    WebhookValueRequest:
      type: object
      properties:
        value:
          type: string
          description: HTTPS endpoint that should receive the webhook.
      required:
        - value
      additionalProperties: false
    WebhookEveryRequest:
      type: object
      properties:
        value:
          type: string
          description: HTTPS endpoint applied to all webhook types.
        notifySentByMe:
          type: boolean
          description: Optional flag to also toggle the notify-sent-by-me option.
      required:
        - value
      additionalProperties: false
    BoolValueRequest:
      type: object
      properties:
        value:
          type: boolean
          description: Boolean value for the setting.
      required:
        - value
      additionalProperties: false
    StringValueRequest:
      type: object
      properties:
        value:
          type: string
          description: String value for the setting.
      required:
        - value
      additionalProperties: false
    ValueResponse:
      type: object
      properties:
        value:
          type: boolean
          description: Indicates whether the operation was successful.
      additionalProperties: false
    NotifySentByMeRequest:
      type: object
      properties:
        notifySentByMe:
          type: boolean
      required:
        - notifySentByMe
      additionalProperties: false
    WebhookUpdateResponse:
      type: object
      properties:
        value:
          type: boolean
          description: Indicates whether the update was accepted.
        webhooks:
          $ref: "#/components/schemas/WebhookSettings"
      required:
        - value
      additionalProperties: false
    PartnerInstanceCreateRequest:
      type: object
      properties:
        name:
          type: string
          description: Display name for the instance.
        sessionName:
          type: string
          description: Optional session identifier used by partners.
        deliveryCallbackUrl:
          type: string
          format: uri
        receivedCallbackUrl:
          type: string
          format: uri
        receivedAndDeliveryCallbackUrl:
          type: string
          format: uri
        disconnectedCallbackUrl:
          type: string
          format: uri
        connectedCallbackUrl:
          type: string
          format: uri
        messageStatusCallbackUrl:
          type: string
          format: uri
        presenceChatCallbackUrl:
          type: string
          format: uri
        notifySentByMe:
          type: boolean
          default: false
        callRejectAuto:
          type: boolean
          description: When true, the instance rejects calls automatically.
        callRejectMessage:
          type: string
          description: Message returned when a call is rejected automatically.
        autoReadMessage:
          type: boolean
          description: When true, messages are marked as read automatically.
        isDevice:
          type: boolean
          default: false
        businessDevice:
          type: boolean
          default: true
      required:
        - name
      additionalProperties: false
    PartnerInstanceCreateResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Z-API compatible identifier (duplicate of instanceId).
        token:
          type: string
          description: Z-API compatible instance token.
        due:
          type: integer
          format: int64
          description: Millisecond timestamp returned for Z-API compatibility.
        instanceId:
          type: string
          format: uuid
        name:
          type: string
        sessionName:
          type: string
        instanceToken:
          type: string
        subscriptionActive:
          type: boolean
        callRejectAuto:
          type: boolean
        callRejectMessage:
          type: [string, "null"]
        autoReadMessage:
          type: boolean
        middleware:
          type: string
          enum:
            - web
            - mobile
        webhooks:
          $ref: "#/components/schemas/WebhookSettings"
        createdAt:
          type: string
          format: date-time
      required:
        - id
        - token
        - due
        - instanceId
        - name
        - sessionName
        - instanceToken
        - subscriptionActive
        - createdAt
      additionalProperties: false
    InstanceListItem:
      type: object
      description: Z-API compatible instance summary enriched with internal credentials.
      properties:
        id:
          type: string
          format: uuid
          description: Instance identifier (Z-API field).
        token:
          type: string
          description: Instance token used by Z-API clients.
        due:
          type: integer
          format: int64
          description: Millisecond timestamp used by Z-API tooling.
        name:
          type: string
          description: Human friendly name for the instance.
        created:
          type: string
          format: date-time
          description: ISO-8601 creation timestamp.
        phoneConnected:
          type: boolean
          description: True when a phone is connected (derived from registry snapshot).
        whatsappConnected:
          type: boolean
          description: True when the WhatsApp session is connected.
        middleware:
          type: string
          description: Middleware flag returned for Z-API compatibility.
          enum:
            - web
            - mobile
        deliveryCallbackUrl:
          type: [string, "null"]
          format: uri
        receivedCallbackUrl:
          type: [string, "null"]
          format: uri
        receivedAndDeliveryCallbackUrl:
          type: [string, "null"]
          format: uri
        disconnectedCallbackUrl:
          type: [string, "null"]
          format: uri
        connectedCallbackUrl:
          type: [string, "null"]
          format: uri
        messageStatusCallbackUrl:
          type: [string, "null"]
          format: uri
        presenceChatCallbackUrl:
          type: [string, "null"]
          format: uri
        sessionName:
          type: string
          description: Underlying WhatsApp session display name.
        callRejectAuto:
          type: boolean
        callRejectMessage:
          type: [string, "null"]
        autoReadMessage:
          type: boolean
        subscriptionActive:
          type: boolean
        notifySentByMe:
          type: boolean
          description: When true, webhook will include sent-by-me events.
        instanceId:
          type: string
          format: uuid
          description: "Internal instance identifier (duplicate of `id` for compatibility)."
        instanceToken:
          type: string
          description: Token required on instance scoped requests.
      required:
        - id
        - token
        - due
        - name
        - created
        - phoneConnected
        - whatsappConnected
        - middleware
        - sessionName
        - callRejectAuto
        - autoReadMessage
        - subscriptionActive
        - notifySentByMe
        - instanceId
        - instanceToken
      additionalProperties: false
    InstanceListResponse:
      type: object
      description: Z-API compatible pagination envelope for partner instances.
      properties:
        total:
          type: integer
          minimum: 0
        totalPage:
          type: integer
          minimum: 0
        pageSize:
          type: integer
          minimum: 1
        page:
          type: integer
          minimum: 1
        content:
          type: array
          items:
            $ref: "#/components/schemas/InstanceListItem"
      required:
        - total
        - totalPage
        - pageSize
        - page
        - content
      additionalProperties: false
    QueueMessageResponse:
      type: object
      description: Represents a message in the queue with Z-API compatible format
      properties:
        _id:
          type: string
          description: Message ID (same as zaapId for Z-API compatibility)
          example: 39BB1684570F00E91090F6BBC7EE7646
        zaapId:
          type: string
          description: Z-API message tracking ID
          example: 39BB1684570F00E91090F6BBC7EE7646
        messageId:
          type: string
          description: WhatsApp message ID (after sending)
          example: 7AD29EAA5EF34C301F0B
        instanceId:
          type: string
          format: uuid
          description: Instance UUID
          example: 550e8400-e29b-41d4-a716-446655440000
        phone:
          type: string
          description: Recipient phone/group/newsletter
          example: "5511999999999"
        message:
          type: [string, "null"]
          description: Message text content (only for text messages)
          example: Hello from Z-API
        delayMessage:
          type: integer
          format: int64
          description: Delay in seconds before sending
          example: 5
        delayTyping:
          type: integer
          format: int64
          description: Typing indicator duration in seconds
          example: 3
        created:
          type: integer
          format: int64
          description: Unix timestamp in milliseconds
          example: 1624977905648
        messageType:
          type: string
          description: Type of message
          enum:
            - text
            - image
            - audio
            - video
            - document
          example: text
        status:
          type: string
          description: Current job status
          enum:
            - available
            - scheduled
            - running
            - completed
            - failed
            - cancelled
            - discarded
          example: available
        sequenceNumber:
          type: integer
          format: int64
          description: FIFO sequence number
          example: 1
        attempt:
          type: integer
          description: Current attempt number (0-based)
          example: 0
        maxAttempts:
          type: integer
          description: Maximum retry attempts
          example: 3
        errors:
          type: array
          items:
            type: [string, "null"]
          description: List of error messages (if any)
      required:
        - _id
        - zaapId
        - messageId
        - instanceId
        - phone
        - delayMessage
        - delayTyping
        - created
      additionalProperties: false
    QueueListResponse:
      type: array
      description: Array of queue messages (Z-API compatible - direct array, not wrapped)
      items:
        $ref: "#/components/schemas/QueueMessageResponse"
    QueueCountResponse:
      type: object
      description: Queue count response
      properties:
        count:
          type: integer
          description: Number of messages in queue
          example: 42
      required:
        - count
      additionalProperties: false
    QueueClearResponse:
      type: object
      description: Queue clear operation response
      properties:
        message:
          type: string
          description: Operation confirmation message
          example: Queue cleared successfully
      required:
        - message
      additionalProperties: false
    QueueCancelResponse:
      type: object
      description: Message cancellation response
      properties:
        message:
          type: string
          description: Operation confirmation message
          example: Message cancelled successfully
      required:
        - message
      additionalProperties: false
    GroupMention:
      type: object
      description: Group mention in WhatsApp communities
      properties:
        phone:
          type: string
          description: Group JID
          example: 120363XXXXX@g.us
        subject:
          type: string
          description: Group name
          example: Z-API Community
      required:
        - phone
        - subject
    SendTextRequest:
      type: object
      description: Request body for sending text messages (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number in international format (numbers only) or WhatsApp JID
          example: "5511999999999"
        message:
          type: string
          description: Text message content
          example: Hello from Z-API!
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to
          example: 3EB0796DC18B7F954D54
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending (1-15 seconds, default random 1-3)
          example: 5
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds (1-15 seconds, default 0)
          example: 3
        duration:
          type: [integer, "null"]
          description: Ephemeral message duration in seconds (0, 86400, 604800, 7776000)
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
          example: 86400
        privateAnswer:
          type: boolean
          description: For group messages - if true, reply in private to sender
          default: false
          example: false
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
          example:
            - "5511999999999"
            - "5511888888888"
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members without listing them
          default: false
        linkPreview:
          type: [boolean, "null"]
          description: If nil/omitted, auto-detect URLs and generate preview; if true, force preview; if false, disable preview
          example: true
      required:
        - phone
        - message
      additionalProperties: false
    SendImageRequest:
      type: object
      description: Request body for sending image messages (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        image:
          type: string
          description: Image URL (http/https) or base64 data URI (data:image/png;base64,...)
          example: https://picsum.photos/600/400.jpg
        caption:
          type: [string, "null"]
          description: Optional image caption/title
          example: Check out this image!
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending (1-15 seconds)
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds (1-15 seconds)
        viewOnce:
          type: boolean
          description: If true, image can only be viewed once
          default: false
        duration:
          type: [integer, "null"]
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
          example:
            - "5511999999999"
            - "5511888888888"
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members without listing them
          default: false
        privateAnswer:
          type: boolean
          description: For group messages, reply in private to sender
          default: false
      required:
        - phone
        - image
      additionalProperties: false
    SendAudioRequest:
      type: object
      description: Request body for sending audio/voice messages (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        audio:
          type: string
          description: Audio URL (http/https) or base64 data URI (data:audio/ogg;base64,...)
          example: https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending (1-15 seconds)
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: 'Optional "recording audio" indicator duration in seconds (1-15 seconds)'
        viewOnce:
          type: boolean
          description: If true, audio can only be played once
          default: false
        duration:
          type: [integer, "null"]
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
          example:
            - "5511999999999"
            - "5511888888888"
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members without listing them
          default: false
        privateAnswer:
          type: boolean
          description: For group messages, reply in private to sender
          default: false
      required:
        - phone
        - audio
      additionalProperties: false
    SendVideoRequest:
      type: object
      description: Request body for sending video messages (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        video:
          type: string
          description: Video URL (http/https) or base64 data URI (data:video/mp4;base64,...)
          example: https://download.blender.org/durian/trailer/sintel_trailer-480p.mp4
        caption:
          type: [string, "null"]
          description: Optional video caption/title
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending (1-15 seconds)
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds (1-15 seconds)
        viewOnce:
          type: boolean
          description: If true, video can only be viewed once
          default: false
        duration:
          type: [integer, "null"]
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
          example:
            - "5511999999999"
            - "5511888888888"
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members without listing them
          default: false
        privateAnswer:
          type: boolean
          description: For group messages, reply in private to sender
          default: false
      required:
        - phone
        - video
      additionalProperties: false
    SendPTVRequest:
      type: object
      description: |
        Request body for sending PTV (Push-To-Talk Video) messages (Z-API compatible).

        **PTV Format**: Circular video notes displayed similarly to voice notes but with video content.

        **Key Features**:
        - Circular video notes (like voice notes with video)
        - Video URL or base64 data URI support
        - Optional caption/text
        - Reply to messages via messageId
        - Schedule delivery with delayMessage (1-15s)
        - Show typing indicator with delayTyping (1-15s)
        - Ephemeral messages with duration (0, 86400, 604800, 7776000)
        - Mention users (@mentions)
        - Mention groups/communities
        - Mention all participants (@everyone)
        - Private reply in groups

        **Message Queue**: Messages are queued per recipient with FIFO ordering.

        **WhatsApp Compatibility**: Uses whatsmeow library with full WhatsApp Web protocol support.
      properties:
        phone:
          type: string
          description: |
            Recipient phone number in international format (without + prefix).

            **Examples**:
            - Individual: `5511999999999` (Brazil mobile)
            - Group: `120363047204807488@g.us`
            - Community: `123456789@newsletter`
          example: "5511999999999"
        video:
          type: string
          description: |
            Video file URL or base64 data URI.

            **Supported Formats**:
            - URL: `https://example.com/video.mp4`
            - Base64: `data:video/mp4;base64,AAAAIGZ0eXBpc29t...`

            **Requirements**:
            - Format: MP4, 3GP, MOV (auto-converted if needed)
            - Max duration: 60 seconds recommended for PTV
            - Circular display in WhatsApp
          example: "https://download.blender.org/durian/trailer/sintel_trailer-480p.mp4"
        caption:
          type: [string, "null"]
          description: |
            Optional text caption for the PTV video.
            Supports @mentions via mentioned/groupMentioned arrays.
          example: "Check out this video note!"
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to (quoted message)
          example: "3EB0796DC1B61E519"
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: |
            Optional delay in seconds before sending the message (1-15 seconds).
            Used to simulate human behavior and avoid spam detection.
          example: 3
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: |
            Optional typing indicator duration in seconds (1-15 seconds).
            Shows "recording..." to recipient before message is sent.
          example: 2
        viewOnce:
          type: boolean
          description: |
            If true, the PTV video can only be viewed once by the recipient.
            After viewing, the message disappears from the chat.
          default: false
          example: false
        duration:
          type: [integer, "null"]
          enum: [0, 86400, 604800, 7776000]
          description: |
            Optional ephemeral message duration (view-once timer).

            **Values**:
            - `0`: Permanent (default)
            - `86400`: 24 hours (1 day)
            - `604800`: 7 days (1 week)
            - `7776000`: 90 days (3 months)
          example: 0
        mentioned:
          type: array
          description: |
            Optional array of phone numbers to mention (@mention).
            Users will be notified and text will show @mentions.
          items:
            type: [string, "null"]
            example: "5511888888888"
        groupMentioned:
          type: [array, "null"]
          description: |
            Optional array of groups/communities to mention.
            Used for cross-community mentions and notifications.
          items:
            $ref: "#/components/schemas/GroupMention"
        mentionedAll:
          type: boolean
          description: |
            Mention all participants in group (@everyone).
            Only works in groups where user has admin permissions.
          default: false
        privateAnswer:
          type: boolean
          description: |
            Send message as private reply in group context.
            Only recipient will see the message, others see "private reply".
          default: false
      required:
        - phone
        - video
      additionalProperties: false
    SendDocumentRequest:
      type: object
      description: Request body for sending document messages (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        document:
          type: string
          description: Document URL (http/https) or base64 data URI (data:application/pdf;base64,...)
          example: https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf
        fileName:
          type: [string, "null"]
          description: Optional document filename
          example: report.pdf
        caption:
          type: [string, "null"]
          description: Optional document caption/description
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending (1-15 seconds)
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds (1-15 seconds)
        duration:
          type: [integer, "null"]
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
          example:
            - "5511999999999"
            - "5511888888888"
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members without listing them
          default: false
        privateAnswer:
          type: boolean
          description: For group messages, reply in private to sender
          default: false
      required:
        - phone
        - document
      additionalProperties: false
    SendStickerRequest:
      type: object
      description: |
        Request body for sending sticker messages (Z-API compatible).

        **Sticker Format**: Accepts URL (http/https) or base64 data URI (data:image/webp;base64,...).

        **Key Features**:
        - Animated stickers supported (WebP format)
        - No caption support (stickers are sent without text)
        - Reply to messages via messageId
        - Schedule delivery with delayMessage (1-15s)
        - Show typing indicator with delayTyping (1-15s)
        - Ephemeral messages with duration (0, 86400, 604800, 7776000)
        - Mention users (@mentions)
        - Mention groups/communities
        - Mention all participants (@everyone)
        - Private reply in groups

        **Message Queue**: Messages are queued per recipient with FIFO ordering.

        **WhatsApp Compatibility**: Uses whatsmeow library with full WhatsApp Web protocol support.
      properties:
        phone:
          type: string
          description: |
            Recipient phone number in international format (without + prefix).

            **Examples**:
            - Individual: `5511999999999` (Brazil mobile)
            - Group: `120363047204807488@g.us`
            - Community: `123456789@newsletter`
          example: "5511999999999"
        sticker:
          type: string
          description: |
            Sticker file URL or base64 data URI.

            **Supported Formats**:
            - URL: `https://www.gstatic.com/webp/gallery/1.webp`
            - Base64: `data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=`

            **Requirements**:
            - Format: WebP (animated or static)
            - Max size: 100KB recommended for animated, 500KB for static
            - Dimensions: 512x512 pixels recommended
          example: "https://www.gstatic.com/webp/gallery/1.webp"
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to (quoted message)
          example: "3EB0796DC1B61E519"
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: |
            Optional delay in seconds before sending the message (1-15 seconds).
            Used to simulate human behavior and avoid spam detection.
          example: 3
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: |
            Optional typing indicator duration in seconds (1-15 seconds).
            Shows "typing..." to recipient before message is sent.
          example: 2
        duration:
          type: [integer, "null"]
          enum: [0, 86400, 604800, 7776000]
          description: |
            Optional ephemeral message duration (view-once timer).

            **Values**:
            - `0`: Permanent (default)
            - `86400`: 24 hours (1 day)
            - `604800`: 7 days (1 week)
            - `7776000`: 90 days (3 months)
          example: 0
        mentioned:
          type: array
          description: |
            Optional array of phone numbers to mention (@mention).
            Users will be notified and text will show @mentions.
          items:
            type: [string, "null"]
            example: "5511888888888"
        groupMentioned:
          type: [array, "null"]
          description: |
            Optional array of groups/communities to mention.
            Used for cross-community mentions and notifications.
          items:
            $ref: "#/components/schemas/GroupMention"
        mentionedAll:
          type: boolean
          description: |
            Mention all participants in group (@everyone).
            Only works in groups where user has admin permissions.
          default: false
        privateAnswer:
          type: boolean
          description: |
            Send message as private reply in group context.
            Only recipient will see the message, others see "private reply".
          default: false
      required:
        - phone
        - sticker
      additionalProperties: false
    SendGifRequest:
      type: object
      description: |
        Request body for sending GIF messages (Z-API compatible).

        **GIF Format**: Accepts URL (http/https) or base64 data URI (data:image/gif;base64,...).

        **Key Features**:
        - Animated GIFs supported
        - Optional caption/text
        - Reply to messages via messageId
        - Schedule delivery with delayMessage (1-15s)
        - Show typing indicator with delayTyping (1-15s)
        - View-once messages with viewOnce flag
        - Ephemeral messages with duration (0, 86400, 604800, 7776000)
        - Mention users (@mentions)
        - Mention groups/communities
        - Mention all participants (@everyone)
        - Private reply in groups

        **Message Queue**: Messages are queued per recipient with FIFO ordering.

        **WhatsApp Compatibility**: Uses whatsmeow library with full WhatsApp Web protocol support.
      properties:
        phone:
          type: string
          description: |
            Recipient phone number in international format (without + prefix).

            **Examples**:
            - Individual: `5511999999999` (Brazil mobile)
            - Group: `120363047204807488@g.us`
            - Community: `123456789@newsletter`
          example: "5511999999999"
        gif:
          type: string
          description: |
            GIF file URL or base64 data URI.

            **Supported Formats**:
            - URL: `https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExcDd2MXRxbTN1NjN5cXBqYjZ0c2swY3EyNmRxaGJxODRnOGxqcjR2MyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3o7abKhOpu0NwenH3O/giphy.gif`
            - Base64: `data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==`

            **Requirements**:
            - Format: GIF (animated or static)
            - Max size: 16MB recommended
            - Aspect ratio: Any (auto-adjusted by WhatsApp)
          example: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExcDd2MXRxbTN1NjN5cXBqYjZ0c2swY3EyNmRxaGJxODRnOGxqcjR2MyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3o7abKhOpu0NwenH3O/giphy.gif"
        caption:
          type: [string, "null"]
          description: |
            Optional text caption for the GIF.
            Supports @mentions via mentioned/groupMentioned arrays.
          example: "Check this out! üéâ"
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to (quoted message)
          example: "3EB0796DC1B61E519"
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: |
            Optional delay in seconds before sending the message (1-15 seconds).
            Used to simulate human behavior and avoid spam detection.
          example: 3
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: |
            Optional typing indicator duration in seconds (1-15 seconds).
            Shows "typing..." to recipient before message is sent.
          example: 2
        viewOnce:
          type: boolean
          description: |
            Send as view-once message (disappears after first view).
            Recipient can only view the GIF once.
          default: false
        duration:
          type: [integer, "null"]
          enum: [0, 86400, 604800, 7776000]
          description: |
            Optional ephemeral message duration (view-once timer).

            **Values**:
            - `0`: Permanent (default)
            - `86400`: 24 hours (1 day)
            - `604800`: 7 days (1 week)
            - `7776000`: 90 days (3 months)
          example: 0
        mentioned:
          type: array
          description: |
            Optional array of phone numbers to mention (@mention).
            Users will be notified and text will show @mentions.
          items:
            type: [string, "null"]
            example: "5511888888888"
        groupMentioned:
          type: [array, "null"]
          description: |
            Optional array of groups/communities to mention.
            Used for cross-community mentions and notifications.
          items:
            $ref: "#/components/schemas/GroupMention"
        mentionedAll:
          type: boolean
          description: |
            Mention all participants in group (@everyone).
            Only works in groups where user has admin permissions.
          default: false
        privateAnswer:
          type: boolean
          description: |
            Send message as private reply in group context.
            Only recipient will see the message, others see "private reply".
          default: false
      required:
        - phone
        - gif
      additionalProperties: false
    Contact:
      type: object
      description: |
        WhatsApp contact information (Z-API compatible).

        **Data Sources**:
        - Device contacts (if contact is in user's address book)
        - WhatsApp profile data (notify field from push name)
        - VCard information (if contact shared via vcard)

        **Field Availability**:
        - `phone`: Always present
        - `name`, `short`, `vname`: Only if contact is in address book
        - `notify`: Only if user has interacted with contact

        **Privacy Notes**: Contact data respects WhatsApp privacy settings.
        Users who hide their profile will only show notify field.
      properties:
        phone:
          type: string
          description: |
            WhatsApp phone number in international format (without + prefix).
            This is the WhatsApp JID user part.
          example: "5511999999999"
        name:
          type: [string, "null"]
          description: |
            Full contact name from device address book.
            Only present if contact exists in user's phone contacts.
          example: "Jo√£o Silva Santos"
        short:
          type: [string, "null"]
          description: |
            First name or nickname from device address book.
            Only present if contact exists in user's phone contacts.
          example: "Jo√£o"
        notify:
          type: [string, "null"]
          description: |
            Name from WhatsApp settings (push name).
            This is how the user identifies themselves on WhatsApp.
            Present if user has ever interacted with the contact.
          example: "Jo√£o S."
        vname:
          type: [string, "null"]
          description: |
            Full name from VCard if contact was shared via contact card.
            Only present if contact was received through VCard sharing.
          example: "Jo√£o Silva Santos"
      required:
        - phone
      additionalProperties: false
    Chat:
      type: object
      description: |
        WhatsApp chat information (Z-API compatible).

        **Chat Types**:
        - Individual chats (person-to-person)
        - Group chats (multiple participants)
        - Community announcement channels

        **Data Sources**:
        - WhatsApp chat metadata (from store)
        - Message history (last message timestamp)
        - Chat settings (mute, archive, pin, spam status)

        **Ordering**: By default, chats are ordered by lastMessageTime descending (most recent first).

        **Unread Counts**: Both `unread` and `messagesUnread` represent the same count (Z-API compatibility).
      properties:
        phone:
          type: string
          description: |
            WhatsApp JID (Java ID) for the chat.

            **Formats**:
            - Individual: `5511999999999@s.whatsapp.net`
            - Group: `120363047204807488@g.us`
            - Newsletter: `123456789@newsletter`
          example: "5511999999999@s.whatsapp.net"
        name:
          type: string
          description: |
            Chat display name.

            **For Individuals**: Contact name (from address book) or WhatsApp push name
            **For Groups**: Group subject/title
            **For Communities**: Community name
          example: "Jo√£o Silva"
        unread:
          type: integer
          description: Count of unread messages in this chat
          minimum: 0
          example: 5
        lastMessageTime:
          type: string
          format: date-time
          description: |
            ISO 8601 timestamp of the last message received in this chat.
            Used for sorting chats by recency.
          example: "2025-01-11T14:30:00Z"
        isMuted:
          type: boolean
          description: Whether notifications are muted for this chat
          example: false
        muteEndTime:
          type: string
          format: date-time
          description: |
            ISO 8601 timestamp when mute expires (if chat is muted).
            Zero value if not muted or muted indefinitely.
          example: "2025-01-12T14:30:00Z"
        isMarkedSpam:
          type: boolean
          description: Whether this chat is marked as spam by the user
          example: false
        archived:
          type: boolean
          description: Whether this chat is archived (hidden from main chat list)
          example: false
        pinned:
          type: boolean
          description: Whether this chat is pinned to the top of the chat list
          example: false
        messagesUnread:
          type: integer
          description: |
            Alternative unread count field for Z-API compatibility.
            Contains the same value as `unread`.
          minimum: 0
          example: 5
        isGroup:
          type: boolean
          description: |
            Whether this is a group chat (true) or individual chat (false).
            Communities are treated as groups.
          example: false
      required:
        - phone
        - name
        - unread
        - lastMessageTime
        - isMuted
        - muteEndTime
        - isMarkedSpam
        - archived
        - pinned
        - messagesUnread
        - isGroup
      additionalProperties: false
    SendMessageResponse:
      type: object
      description: Response after enqueuing a message (Z-API compatible)
      properties:
        zaapId:
          type: string
          description: Unique message ID in our system (Z-API format)
          example: 39BB1684570F00E91090F6BBC7EE7646
        messageId:
          type: string
          description: WhatsApp message ID (initially same as zaapId, updated after send)
          example: 39BB1684570F00E91090F6BBC7EE7646
        id:
          type: string
          description: Same as messageId for Zapier compatibility
          example: 39BB1684570F00E91090F6BBC7EE7646
        status:
          type: string
          description: Queue status for the enqueued message (always queued on success)
          example: queued
        whatsAppStatus:
          $ref: "#/components/schemas/WhatsAppStatus"
      required:
        - zaapId
        - messageId
        - id
        - status
      additionalProperties: false
    WhatsAppStatus:
      type: object
      description: Snapshot of the WhatsApp connectivity state when the message was enqueued
      properties:
        connected:
          type: boolean
          description: Indicates if the WhatsApp client is connected at enqueue time
        lastSeen:
          type: [string, "null"]
          format: date-time
          description: Timestamp of the last known successful connection (RFC3339)
        reason:
          type: string
          description: Reason for the current connectivity state (connected, reconnecting, logged_out, etc.)
          example: disconnected
        workerId:
          type: [string, "null"]
          description: Identifier of the worker handling the instance, when available
    SendLocationRequest:
      type: object
      description: Request body for sending location messages
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        latitude:
          type: number
          format: double
          description: Location latitude
          example: -23.55052
        longitude:
          type: number
          format: double
          description: Location longitude
          example: -46.633308
        name:
          type: [string, "null"]
          description: Optional location name/title
          example: Paulista Avenue
        address:
          type: [string, "null"]
          description: Optional location address
          example: Av. Paulista, 1578 - S√£o Paulo, SP
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds
        duration:
          type: [integer, "null"]
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members
          default: false
      required:
        - phone
        - latitude
        - longitude
      additionalProperties: false
    SendContactRequest:
      type: object
      description: Request body for sending a single contact card (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        contactName:
          type: string
          description: Full name of the contact (Z-API compatible field)
          example: John Doe
        contactPhone:
          type: string
          description: Phone number of the contact in international format (Z-API compatible field)
          example: "5511999999999"
        contactBusinessDescription:
          type: [string, "null"]
          description: Optional business or organization description of the contact (Z-API compatible field)
          example: Sales Manager at Example Corp
        firstName:
          type: [string, "null"]
          description: Given name component for the vCard
          example: John
        lastName:
          type: [string, "null"]
          description: Family name component for the vCard
          example: Doe
        middleName:
          type: [string, "null"]
          description: Middle name or additional names
          example: Michael
        namePrefix:
          type: [string, "null"]
          description: Honorific prefix (e.g. Dr., Mr., Ms.)
          example: Dr.
        nameSuffix:
          type: [string, "null"]
          description: Honorific suffix (e.g. Jr., Sr.)
          example: Jr.
        nickname:
          type: [string, "null"]
          description: Nickname or alias for the contact
          example: Johnny
        email:
          type: [string, "null"]
          format: email
          description: Email address associated with the contact
          example: john@example.com
        url:
          type: [string, "null"]
          format: uri
          description: Website or social media URL for the contact
          example: https://example.com/john
        organization:
          type: [string, "null"]
          description: Organization or company name (overrides contactBusinessDescription when provided)
          example: Example Corp
        jobTitle:
          type: [string, "null"]
          description: Job title or position
          example: Sales Manager
        address:
          allOf:
            - $ref: "#/components/schemas/ContactAddress"
          description: Structured address details for the vCard
        birthday:
          type: [string, "null"]
          format: date
          description: Birthday in YYYY-MM-DD format
          example: "1990-05-17"
        note:
          type: [string, "null"]
          description: Additional notes or comments to include in the vCard
          example: Met at WhatsApp Summit 2024
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds
        duration:
          type: [integer, "null"]
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members
          default: false
        privateAnswer:
          type: boolean
          description: For group messages - if true, reply privately to the sender instead of the group
          default: false
      required:
        - phone
        - contactName
        - contactPhone
      additionalProperties: false
    ContactAddress:
      type: object
      description: Structured address details included in contact vCards
      properties:
        type:
          type: [string, "null"]
          description: Address type (e.g. HOME, WORK)
          example: WORK
        postBox:
          type: [string, "null"]
          description: Post office box number
          example: "1234"
        extended:
          type: [string, "null"]
          description: Extended address information such as apartment or suite
          example: Suite 1203
        street:
          type: [string, "null"]
          description: Street address
          example: Av. Paulista, 1578
        city:
          type: [string, "null"]
          description: City or locality
          example: S√£o Paulo
        region:
          type: [string, "null"]
          description: State, province or region
          example: SP
        postalCode:
          type: [string, "null"]
          description: Postal or ZIP code
          example: "01310-200"
        country:
          type: [string, "null"]
          description: Country name
          example: Brasil
      additionalProperties: false
    ContactInfo:
      type: object
      description: Contact information for multiple contacts (Z-API compatible)
      properties:
        contactName:
          type: string
          description: Full name of the contact
          example: John Doe
        contactPhone:
          type: string
          description: Phone number of the contact in international format
          example: "5511999999999"
        contactBusinessDescription:
          type: [string, "null"]
          description: Optional business description of the contact
          example: Sales Manager
        firstName:
          type: [string, "null"]
          description: Given name component for the vCard
        lastName:
          type: [string, "null"]
          description: Family name component for the vCard
        middleName:
          type: [string, "null"]
          description: Middle name or additional names
        namePrefix:
          type: [string, "null"]
          description: Honorific prefix (e.g. Dr., Mr., Ms.)
        nameSuffix:
          type: [string, "null"]
          description: Honorific suffix (e.g. Jr., Sr.)
        nickname:
          type: [string, "null"]
          description: Nickname or alias for the contact
        email:
          type: [string, "null"]
          format: email
          description: Email address associated with the contact
        url:
          type: [string, "null"]
          format: uri
          description: Website or social media URL for the contact
        organization:
          type: [string, "null"]
          description: Organization or company name
        jobTitle:
          type: [string, "null"]
          description: Job title or position
        address:
          allOf:
            - $ref: "#/components/schemas/ContactAddress"
          description: Structured address details for the vCard
        birthday:
          type: [string, "null"]
          format: date
          description: Birthday in YYYY-MM-DD format
        note:
          type: [string, "null"]
          description: Additional notes or comments to include in the vCard
      required:
        - contactName
        - contactPhone
      additionalProperties: false
    SendContactsRequest:
      type: object
      description: Request body for sending multiple contact cards (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        contacts:
          type: array
          items:
            $ref: "#/components/schemas/ContactInfo"
          description: Array of contacts to send (1-10 items, matching WhatsApp UI behaviour)
          minItems: 1
          maxItems: 10
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds
        duration:
          type: [integer, "null"]
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members
          default: false
        privateAnswer:
          type: boolean
          description: For group messages - if true, reply privately to the sender instead of the group
          default: false
      required:
        - phone
        - contacts
      additionalProperties: false
    BooleanStatusResponse:
      type: object
      description: "Z-API compatible acknowledgement payload using a boolean `value`."
      properties:
        value:
          type: boolean
          description: "Indicates whether the operation succeeded (`true`) or failed (`false`)."
      required:
        - value
      additionalProperties: false
    BooleanSuccessResponse:
      type: object
      description: "Z-API compatible acknowledgement payload using a boolean `success`."
      properties:
        success:
          type: boolean
          description: "Indicates whether the operation succeeded (`true`) or failed (`false`)."
      required:
        - success
      additionalProperties: false
    InvitationLinkResponse:
      type: object
      description: Response containing a regenerated invitation link.
      properties:
        invitationLink:
          type: string
          format: uri
          description: Invitation link generated by WhatsApp.
      required:
        - invitationLink
      additionalProperties: false
    GroupInvitationLinkResponse:
      type: object
      description: Response containing the current invitation link for a specific group.
      properties:
        phone:
          type: string
          description: "Group JID that owns the invitation link (suffix `-group`)."
        invitationLink:
          type: string
          format: uri
          description: Invitation link generated by WhatsApp.
      required:
        - phone
        - invitationLink
      additionalProperties: false
    GroupListItem:
      type: object
      description: "Z-API compatible summary entry returned by `/groups`."
      properties:
        archived:
          type: boolean
          description: Indicates whether the chat is archived.
        pinned:
          type: boolean
          description: Indicates whether the chat is pinned.
        phone:
          type: string
          description: "Group JID identifier (`{id}-group`)."
        unread:
          type: string
          description: Number of unread messages represented as string for Z-API parity.
        name:
          type: string
          description: Group name.
        lastMessageTime:
          type: string
          description: Millisecond timestamp of the last interaction represented as string.
        muteEndTime:
          type: [string, "null"]
          description: "Millisecond timestamp when mute expires (`null` or `-1` for indefinitely muted)."
        isMuted:
          type: string
          description: '`"0"` when notifications are enabled and `"1"` when muted.'
        isMarkedSpam:
          type: boolean
          description: Indicates whether the chat is marked as spam.
        isGroup:
          type: boolean
          description: "Always `true` for group listings."
        messagesUnread:
          type: string
          description: Deprecated unread counter kept for compatibility.
      required:
        - archived
        - pinned
        - phone
        - unread
        - name
        - lastMessageTime
        - isMuted
        - isMarkedSpam
        - isGroup
        - messagesUnread
      additionalProperties: false
    GroupParticipant:
      type: object
      description: Participant metadata within a WhatsApp group.
      properties:
        phone:
          type: string
          description: Participant phone number or JID.
        lid:
          type: [string, "null"]
          description: LID value returned by WhatsApp (when available).
        isAdmin:
          type: boolean
          description: Indicates whether the participant is an administrator.
        isSuperAdmin:
          type: boolean
          description: Indicates whether the participant is the group owner.
        short:
          type: [string, "null"]
          description: Short name provided by WhatsApp (when available).
        name:
          type: [string, "null"]
          description: Display name for the participant (when available).
      required:
        - phone
        - isAdmin
        - isSuperAdmin
      additionalProperties: false
    GroupCreateRequest:
      type: object
      description: Request body for creating a new WhatsApp group.
      properties:
        autoInvite:
          type: boolean
          description: When true, sends private invites to contacts that cannot be added immediately.
        groupName:
          type: string
          description: Display name for the newly created group.
        phones:
          type: array
          description: Array of participant phone numbers (E.164) to add to the group.
          items:
            type: string
          minItems: 1
      required:
        - autoInvite
        - groupName
        - phones
      additionalProperties: false
    GroupCreateResponse:
      type: object
      description: Response returned after creating a group.
      properties:
        phone:
          type: string
          description: Group JID generated by WhatsApp.
        invitationLink:
          type: string
          format: uri
          description: Invitation link returned by WhatsApp for the new group.
      required:
        - phone
        - invitationLink
      additionalProperties: false
    GroupUpdateNameRequest:
      type: object
      description: Request body for updating an existing group name.
      properties:
        groupId:
          type: string
          description: "Group JID (suffix `-group`)."
        groupName:
          type: string
          description: New group name.
      required:
        - groupId
        - groupName
      additionalProperties: false
    GroupUpdatePhotoRequest:
      type: object
      description: Request body for updating a group picture.
      properties:
        groupId:
          type: string
          description: "Group JID (suffix `-group`)."
        groupPhoto:
          type: string
          description: URL or base64 data URL representing the group picture.
      required:
        - groupId
        - groupPhoto
      additionalProperties: false
    GroupAddParticipantsRequest:
      type: object
      description: Request body for adding participants to a group.
      properties:
        autoInvite:
          type: boolean
          description: Sends private invites for contacts that could not be added automatically.
        groupId:
          type: string
          description: "Group JID (suffix `-group`)."
        phones:
          type: array
          description: Array of participant phone numbers (E.164) to add.
          items:
            type: string
          minItems: 1
      required:
        - autoInvite
        - groupId
        - phones
      additionalProperties: false
    GroupParticipantListRequest:
      type: object
      description: Request body for removing, approving or rejecting group participants.
      properties:
        groupId:
          type: string
          description: "Group JID (suffix `-group`)."
        phones:
          type: array
          description: Array of participant phone numbers (E.164) targeted by the operation.
          items:
            type: string
          minItems: 1
      required:
        - groupId
        - phones
      additionalProperties: false
    GroupLeaveRequest:
      type: object
      description: Request body for leaving a group.
      properties:
        groupId:
          type: string
          description: "Group JID (suffix `-group`)."
      required:
        - groupId
      additionalProperties: false
    GroupMetadataResponse:
      type: object
      description: Full metadata payload for a WhatsApp group, including participants and invitation link.
      properties:
        phone:
          type: string
          description: "Group JID (suffix `-group`)."
        description:
          type: [string, "null"]
          description: Group description text.
        owner:
          type: string
          description: Phone number of the group creator.
        subject:
          type: string
          description: Current group subject (name).
        creation:
          type: integer
          format: int64
          description: Creation timestamp in milliseconds since epoch.
        invitationLink:
          type: [string, "null"]
          format: uri
          description: Invitation link for the group (available to admins).
        invitationLinkError:
          type: [string, "null"]
          description: Error returned when the invitation link cannot be retrieved.
        communityId:
          type: [string, "null"]
          description: Community identifier when the group belongs to a community.
        adminOnlyMessage:
          type: boolean
          description: Indicates whether only admins may send messages.
        adminOnlySettings:
          type: boolean
          description: Indicates whether only admins may change group settings.
        requireAdminApproval:
          type: boolean
          description: Indicates whether new participants require admin approval.
        isGroupAnnouncement:
          type: boolean
          description: Indicates whether the group is configured as an announcements group.
        participants:
          type: array
          description: Array of group participants.
          items:
            $ref: "#/components/schemas/GroupParticipant"
        subjectTime:
          type: [integer, "null"]
          format: int64
          description: Timestamp of the last subject change.
        subjectOwner:
          type: [string, "null"]
          description: Phone number of the participant who last changed the subject.
      required:
        - phone
        - owner
        - subject
        - creation
        - adminOnlyMessage
        - adminOnlySettings
        - requireAdminApproval
        - isGroupAnnouncement
        - participants
      additionalProperties: false
    GroupInvitationMetadataResponse:
      type: object
      description: Metadata returned when resolving a group invitation link.
      properties:
        phone:
          type: string
          description: "Group JID (suffix `-group`)."
        owner:
          type: string
          description: Phone number of the group creator.
        subject:
          type: string
          description: Group subject (name).
        description:
          type: [string, "null"]
          description: Group description text.
        creation:
          type: integer
          format: int64
          description: Creation timestamp in milliseconds since epoch.
        invitationLink:
          type: string
          format: uri
          description: Invitation link used in the lookup.
        contactsCount:
          type: integer
          description: Total number of contacts in the group.
        participantsCount:
          type: integer
          description: Total number of participants in the group.
        participants:
          type: array
          description: Array of group participants.
          items:
            $ref: "#/components/schemas/GroupParticipant"
        subjectTime:
          type: [integer, "null"]
          format: int64
          description: Timestamp of the last subject change.
        subjectOwner:
          type: [string, "null"]
          description: Phone number that owns the invitation subject.
      required:
        - phone
        - owner
        - subject
        - creation
        - invitationLink
        - contactsCount
        - participantsCount
        - participants
      additionalProperties: false
    GroupSettingsRequest:
      type: object
      description: Request body for updating group settings.
      properties:
        phone:
          type: string
          description: "Group JID (suffix `-group`)."
        adminOnlyMessage:
          type: boolean
          description: When true, only admins can send messages.
        adminOnlySettings:
          type: boolean
          description: When true, only admins can change group settings.
        requireAdminApproval:
          type: boolean
          description: When true, new participants must be approved by an admin.
        adminOnlyAddMember:
          type: boolean
          description: When true, only admins can add members.
      required:
        - phone
        - adminOnlyMessage
        - adminOnlySettings
        - requireAdminApproval
        - adminOnlyAddMember
      additionalProperties: false
    GroupDescriptionRequest:
      type: object
      description: Request body for updating a group description.
      properties:
        groupId:
          type: string
          description: "Group JID (suffix `-group`)."
        groupDescription:
          type: string
          description: New group description text.
      required:
        - groupId
        - groupDescription
      additionalProperties: false
    CommunityCreateRequest:
      type: object
      description: Request body for creating a new community.
      properties:
        name:
          type: string
          description: Name of the community.
        description:
          type: [string, "null"]
          description: Optional description for the community.
      required:
        - name
      additionalProperties: false
    CommunitySubGroup:
      type: object
      description: Representation of a subgroup linked to a community.
      properties:
        name:
          type: string
          description: Group display name.
        phone:
          type: string
          description: "Group JID (suffix `-group`)."
        isGroupAnnouncement:
          type: boolean
          description: Indicates whether the subgroup is an announcements-only group.
      required:
        - name
        - phone
        - isGroupAnnouncement
      additionalProperties: false
    CommunityCreateResponse:
      type: object
      description: Response returned after creating a community.
      properties:
        id:
          type: string
          description: Community identifier assigned by WhatsApp.
        subGroups:
          type: array
          description: Groups automatically linked to the community (includes the announcements group).
          items:
            $ref: "#/components/schemas/CommunitySubGroup"
      required:
        - id
        - subGroups
      additionalProperties: false
    CommunityListItem:
      type: object
      description: Community summary returned by the listing endpoint.
      properties:
        name:
          type: string
          description: Community display name.
        id:
          type: string
          description: Community identifier.
      required:
        - name
        - id
      additionalProperties: false
    CommunityLinkRequest:
      type: object
      description: Request body for linking groups to a community.
      properties:
        communityId:
          type: string
          description: Community identifier.
        groupsPhones:
          type: array
          description: Array of group JIDs to link to the community.
          items:
            type: string
          minItems: 1
      required:
        - communityId
        - groupsPhones
      additionalProperties: false
    CommunitySettingsRequest:
      type: object
      description: Request body for updating community settings.
      properties:
        communityId:
          type: string
          description: Community identifier.
        whoCanAddNewGroups:
          type: string
          description: Defines who can add new groups to the community (`admins` or `all`).
          enum:
            - admins
            - all
      required:
        - communityId
        - whoCanAddNewGroups
      additionalProperties: false
    CommunityDescriptionRequest:
      type: object
      description: Request body for updating the community description.
      properties:
        communityId:
          type: string
          description: Community identifier.
        communityDescription:
          type: string
          description: New community description text.
          minLength: 1
      required:
        - communityId
        - communityDescription
      additionalProperties: false
    CommunityMetadataResponse:
      type: object
      description: Metadata returned for a community.
      properties:
        name:
          type: string
          description: Community display name.
        id:
          type: string
          description: Community identifier.
        description:
          type: [string, "null"]
          description: Community description text.
        subGroups:
          type: array
          description: Linked groups.
          items:
            $ref: "#/components/schemas/CommunitySubGroup"
      required:
        - name
        - id
        - subGroups
      additionalProperties: false
    CommunityAddParticipantsRequest:
      type: object
      description: Request body for adding participants to a community announcements group.
      properties:
        autoInvite:
          type: boolean
          description: Sends private invites for contacts that could not be added automatically.
        communityId:
          type: string
          description: Community identifier.
        phones:
          type: array
          description: Array of participant phone numbers (E.164) to add.
          items:
            type: string
          minItems: 1
      required:
        - autoInvite
        - communityId
        - phones
      additionalProperties: false
    CommunityParticipantListRequest:
      type: object
      description: Request body for removing participants from a community announcements group.
      properties:
        communityId:
          type: string
          description: Community identifier.
        phones:
          type: array
          description: Array of participant phone numbers (E.164) targeted by the operation.
          items:
            type: string
          minItems: 1
      required:
        - communityId
        - phones
      additionalProperties: false
    CommunityAdminMutationRequest:
      type: object
      description: Request body for promoting or demoting community administrators.
      properties:
        communityId:
          type: string
          description: Community identifier.
        phones:
          type: array
          description: Array of participant phone numbers (E.164) targeted by the operation.
          items:
            type: string
          minItems: 1
      required:
        - communityId
        - phones
      additionalProperties: false
    NewsletterCreateRequest:
      type: object
      description: Request body for creating a WhatsApp channel (newsletter).
      properties:
        name:
          type: string
          description: Channel display name.
        description:
          type: [string, "null"]
          description: Optional channel description.
      required:
        - name
      additionalProperties: false
    NewsletterCreateResponse:
      type: object
      description: Response returned after creating a channel.
      properties:
        id:
          type: string
          description: "Channel identifier (always suffixed with `@newsletter`)."
      required:
        - id
      additionalProperties: false
    NewsletterUpdatePictureRequest:
      type: object
      description: Request body for updating the channel profile picture.
      properties:
        id:
          type: string
          description: "Channel identifier (suffix `@newsletter`)."
        pictureUrl:
          type: string
          description: URL or base64 data URL for the new picture.
      required:
        - id
        - pictureUrl
      additionalProperties: false
    NewsletterUpdateNameRequest:
      type: object
      description: Request body for updating the channel name.
      properties:
        id:
          type: string
          description: "Channel identifier (suffix `@newsletter`)."
        name:
          type: string
          description: New channel name.
      required:
        - id
        - name
      additionalProperties: false
    NewsletterUpdateDescriptionRequest:
      type: object
      description: Request body for updating the channel description.
      properties:
        id:
          type: string
          description: "Channel identifier (suffix `@newsletter`)."
        description:
          type: string
          description: New channel description.
      required:
        - id
        - description
      additionalProperties: false
    NewsletterIdRequest:
      type: object
      description: Request body for operations that only require the channel identifier.
      properties:
        id:
          type: string
          description: "Channel identifier (suffix `@newsletter`)."
      required:
        - id
      additionalProperties: false
    NewsletterMetadata:
      type: object
      description: Metadata describing a channel (newsletter).
      properties:
        id:
          type: string
          description: "Channel identifier (suffix `@newsletter`)."
        creationTime:
          type: string
          description: Unix timestamp in seconds represented as string.
        state:
          type: string
          description: "Channel state reported by WhatsApp (e.g. `ACTIVE`, `NON_EXISTING`)."
        name:
          type: string
          description: Channel display name.
        description:
          type: [string, "null"]
          description: Channel description text.
        subscribersCount:
          type: string
          description: Total subscriber count represented as string.
        inviteLink:
          type: [string, "null"]
          format: uri
          description: Invitation link for the channel.
        verification:
          type: string
          description: "Channel verification status (`VERIFIED`, `UNVERIFIED`)."
        picture:
          type: [string, "null"]
          format: uri
          description: URL for the channel avatar.
        preview:
          type: [string, "null"]
          format: uri
          description: URL for the preview image.
        viewMetadata:
          type: object
          description: Metadata about how the authenticated account sees the channel.
          properties:
            mute:
              type: string
              description: "Indicates whether the channel is muted (`ON`, `OFF`)."
            role:
              type: string
              description: "Role of the authenticated account (`OWNER`, `SUBSCRIBER`)."
          required:
            - mute
            - role
          additionalProperties: false
      required:
        - id
        - creationTime
        - state
        - name
        - subscribersCount
        - verification
        - viewMetadata
      additionalProperties: false
    NewsletterSearchFilters:
      type: object
      description: Filters applied when searching for channels.
      properties:
        countryCodes:
          type: array
          description: List of ISO country codes used to filter channels.
          items:
            type: string
          minItems: 1
      required:
        - countryCodes
      additionalProperties: false
    NewsletterSearchRequest:
      type: object
      description: Request body for searching public channels.
      properties:
        limit:
          type: integer
          minimum: 1
          description: Maximum number of results to return.
        view:
          type: string
          description: "Optional view name used by WhatsApp (`RECOMMENDED`, `TRENDING`, `POPULAR`, `NEW`)."
          enum:
            - RECOMMENDED
            - TRENDING
            - POPULAR
            - NEW
        filters:
          $ref: "#/components/schemas/NewsletterSearchFilters"
        searchText:
          type: [string, "null"]
          description: Optional free text search term.
      required:
        - limit
        - filters
      additionalProperties: false
    NewsletterSearchItem:
      type: object
      description: Single result entry returned by the search endpoint.
      properties:
        id:
          type: string
          description: "Channel identifier (suffix `@newsletter`)."
        name:
          type: string
          description: Channel display name.
        description:
          type: [string, "null"]
          description: Channel description snippet.
        subscribersCount:
          type: string
          description: Total subscriber count represented as string.
        picture:
          type: [string, "null"]
          format: uri
          description: Channel picture URL when available.
      required:
        - id
        - name
        - subscribersCount
      additionalProperties: false
    NewsletterSearchResponse:
      type: object
      description: Response payload returned by the newsletter search endpoint.
      properties:
        cursor:
          type: [string, "null"]
          description: Cursor returned by WhatsApp for subsequent pages (currently always null).
        data:
          type: array
          description: List of channels matching the search criteria.
          items:
            $ref: "#/components/schemas/NewsletterSearchItem"
      required:
        - cursor
        - data
      additionalProperties: false
    NewsletterSettingsRequest:
      type: object
      description: Request body for updating newsletter settings.
      properties:
        reactionCodes:
          type: string
          description: Restriction applied to reactions within the channel.
          enum:
            - basic
            - all
      required:
        - reactionCodes
      additionalProperties: false
    NewsletterAdminActionRequest:
      type: object
      description: Request body for admin invite management within a channel.
      properties:
        phone:
          type: string
          description: Phone number of the target administrator.
      required:
        - phone
      additionalProperties: false
    SendNewsletterAdminInviteRequest:
      type: object
      description: Request body for sending admin invite to a channel participant.
      properties:
        id:
          type: string
          description: Channel identifier (suffix `@newsletter`).
        phone:
          type: string
          description: Phone number of the participant to invite as administrator.
      required:
        - id
        - phone
      additionalProperties: false
    NewsletterTransferOwnershipRequest:
      type: object
      description: Request body for transferring channel ownership.
      properties:
        phone:
          type: string
          description: Phone number of the participant who will become the new owner.
        quitAdmin:
          type: boolean
          description: When true, the current owner leaves the admin role after transfer.
          default: false
      required:
        - phone
      additionalProperties: false
    NewsletterTransferOwnershipResponse:
      type: object
      description: Response returned after attempting to transfer channel ownership.
      properties:
        value:
          type: boolean
          description: Indicates whether the transfer succeeded.
        message:
          type: [string, "null"]
          description: Optional error message when the transfer fails.
      required:
        - value
      additionalProperties: false
    PhoneExistsResponse:
      type: object
      description: |
        Z-API compatible response for phone number validation.
        Returns whether a phone number is registered on WhatsApp along with phone and LID.
      properties:
        exists:
          type: boolean
          description: true if the phone number has WhatsApp, false otherwise
          example: true
        phone:
          type: [string, "null"]
          description: Phone number if exists on WhatsApp, null otherwise
          example: "5521979232690"
        lid:
          type: [string, "null"]
          description: LID (Linked ID) if available, null otherwise
          example: "140712372899859@lid"
      required:
        - exists
      additionalProperties: false
    PhoneExistsBatchRequest:
      type: object
      description: |
        Z-API compatible request for batch phone number validation.
        Allows validating up to 50,000 phone numbers in a single request.
      properties:
        phones:
          type: array
          description: |
            Array of phone numbers to validate.
            Each number must be in international format (DDI DDD NUMBER).
            Numbers only - no formatting, spaces, or masks.
          items:
            type: string
            pattern: "^\\d+$"
          minItems: 1
          maxItems: 50000
          example:
            - "554499999999"
            - "554488888888"
      required:
        - phones
      additionalProperties: false
    PhoneExistsBatchResponse:
      type: object
      description: |
        Z-API compatible response for batch phone number validation.
        Contains the validation result for each phone number in the batch.
      properties:
        exists:
          type: boolean
          description: true if the phone number has WhatsApp, false otherwise
          example: true
        inputPhone:
          type: string
          description: Phone number as sent in the request (may or may not include ninth digit)
          example: "554499999999"
        outputPhone:
          type: string
          description: |
            Formatted phone number from WhatsApp response.
            Reflects the WhatsApp registration and includes ninth digit if applicable.
          example: "554499999999"
      required:
        - exists
        - inputPhone
        - outputPhone
      additionalProperties: false

    # ==========================================
    # Status Cache Schemas
    # ==========================================
    StatusCacheParticipantStatus:
      type: object
      description: Individual participant's status within a group message.
      properties:
        phone:
          type: string
          description: Participant's phone number (MSISDN format)
          example: "5511999999999"
        status:
          type: string
          description: |
            Current status of the message for this participant.
            - `sent`: Message sent to WhatsApp servers
            - `delivered`: Message delivered to participant's device
            - `read`: Message read by participant
            - `played`: Audio/video/PTT played by participant
          enum: [sent, delivered, read, played]
          example: "read"
        timestamp:
          type: integer
          format: int64
          description: Unix timestamp in milliseconds when status was received
          example: 1735200000000
        device:
          type: integer
          description: WhatsApp device ID (0 = primary, 1+ = linked devices)
          example: 0
      required:
        - phone
        - status
        - timestamp
      additionalProperties: false

    StatusCacheAggregatedStatus:
      type: object
      description: |
        Aggregated status summary for a message, showing delivery statistics
        across all recipients (for groups) or the single recipient (for direct messages).
      properties:
        messageId:
          type: string
          description: WhatsApp message ID
          example: "3EB0A1B2C3D4E5F6"
        instanceId:
          type: string
          format: uuid
          description: Instance that sent the message
          example: "550e8400-e29b-41d4-a716-446655440000"
        groupId:
          type: string
          description: Group ID (only present for group messages)
          example: "120363182823169824"
        phone:
          type: string
          description: |
            For direct messages: recipient phone number.
            For groups: group JID or identifier.
          example: "5511999999999"
        isGroup:
          type: boolean
          description: Whether this is a group message
          example: true
        totalParticipants:
          type: integer
          description: Total number of participants with status updates
          example: 25
        status:
          type: object
          description: Count of participants by status type
          additionalProperties:
            type: integer
          example:
            sent: 25
            delivered: 23
            read: 15
            played: 0
        participants:
          type: array
          description: Individual participant statuses (only included when requested)
          items:
            $ref: "#/components/schemas/StatusCacheParticipantStatus"
        createdAt:
          type: integer
          format: int64
          description: Unix timestamp (ms) when first status was cached
          example: 1735200000000
        updatedAt:
          type: integer
          format: int64
          description: Unix timestamp (ms) of most recent status update
          example: 1735200060000
      required:
        - messageId
        - instanceId
        - phone
        - isGroup
        - totalParticipants
        - status
        - createdAt
        - updatedAt
      additionalProperties: false

    StatusCacheQueryMeta:
      type: object
      description: Pagination metadata for status cache queries.
      properties:
        total:
          type: integer
          format: int64
          description: Total number of matching entries
          example: 150
        limit:
          type: integer
          description: Maximum entries per page
          example: 100
        offset:
          type: integer
          description: Current page offset
          example: 0
      required:
        - total
        - limit
        - offset
      additionalProperties: false

    StatusCacheQueryResult:
      type: object
      description: |
        Aggregated query result with human-readable status summaries.
        Returns processed data with participant counts by status type.
      properties:
        data:
          type: array
          description: Array of aggregated status entries
          items:
            $ref: "#/components/schemas/StatusCacheAggregatedStatus"
        meta:
          $ref: "#/components/schemas/StatusCacheQueryMeta"
      required:
        - data
        - meta
      additionalProperties: false

    StatusCacheRawStatusPayload:
      type: object
      description: |
        Raw status payload as originally received from WhatsApp.
        Useful for debugging or when exact original data is needed.
      properties:
        messageId:
          type: string
          description: WhatsApp message ID
          example: "3EB0A1B2C3D4E5F6"
        instanceId:
          type: string
          format: uuid
          description: Instance ID
          example: "550e8400-e29b-41d4-a716-446655440000"
        payload:
          type: object
          description: Original Z-API format webhook payload
          additionalProperties: true
        cachedAt:
          type: integer
          format: int64
          description: Unix timestamp (ms) when entry was cached
          example: 1735200000000
      required:
        - messageId
        - instanceId
        - payload
        - cachedAt
      additionalProperties: false

    StatusCacheRawQueryResult:
      type: object
      description: |
        Raw query result with original webhook payloads.
        Use format=raw to retrieve this format.
      properties:
        data:
          type: array
          description: Array of raw status payloads
          items:
            $ref: "#/components/schemas/StatusCacheRawStatusPayload"
        meta:
          $ref: "#/components/schemas/StatusCacheQueryMeta"
      required:
        - data
        - meta
      additionalProperties: false

    StatusCacheFlushRequest:
      type: object
      description: |
        Request to flush (deliver) pending webhooks.
        Specify either `messageId` for a single message or `all: true` for all pending.
      properties:
        messageId:
          type: string
          description: Flush webhooks for a specific message ID
          example: "3EB0A1B2C3D4E5F6"
        all:
          type: boolean
          description: Set to true to flush all pending webhooks
          default: false
      additionalProperties: false

    StatusCacheFlushResult:
      type: object
      description: Result of a flush operation.
      properties:
        flushed:
          type: integer
          description: Number of pending webhook entries processed
          example: 15
        webhooksTriggered:
          type: integer
          description: Number of webhooks actually dispatched
          example: 15
      required:
        - flushed
        - webhooksTriggered
      additionalProperties: false

    StatusCacheClearSingleResult:
      type: object
      description: Result of clearing a single message from cache.
      properties:
        cleared:
          type: integer
          description: Number of entries cleared (0 or 1)
          example: 1
        messageId:
          type: string
          description: The message ID that was cleared
          example: "3EB0A1B2C3D4E5F6"
      required:
        - cleared
        - messageId
      additionalProperties: false

    StatusCacheClearAllResult:
      type: object
      description: Result of clearing all cached entries for an instance.
      properties:
        cleared:
          type: integer
          format: int64
          description: Total number of entries cleared
          example: 150
      required:
        - cleared
      additionalProperties: false

    StatusCacheStats:
      type: object
      description: Statistics about the status cache for an instance.
      properties:
        totalEntries:
          type: integer
          format: int64
          description: Total number of cached status entries
          example: 1500
        entriesByInstance:
          type: object
          description: Breakdown of entries by instance ID
          additionalProperties:
            type: integer
            format: int64
          example:
            "550e8400-e29b-41d4-a716-446655440000": 1500
        pendingWebhooks:
          type: integer
          format: int64
          description: Number of webhooks pending delivery (waiting for flush)
          example: 45
      required:
        - totalEntries
        - entriesByInstance
        - pendingWebhooks
      additionalProperties: false

    # ==========================================
    # Interactive Message Schemas
    # ==========================================

    ButtonType:
      type: string
      description: |
        Type of button for interactive messages.

        **Button Types:**
        - `quick_reply` - Simple reply button (max 20 chars label)
        - `cta_url` - Opens a URL in browser
        - `cta_call` - Initiates a phone call
        - `cta_copy` - Copies text to clipboard
        - `payment_info` - Shows payment information
        - `review_and_pay` - Review and pay action
      enum:
        - quick_reply
        - cta_url
        - cta_call
        - cta_copy
        - payment_info
        - review_and_pay
      example: cta_url

    PIXKeyType:
      type: string
      description: |
        Type of PIX key for Brazilian payment system.

        **PIX Key Types:**
        - `CPF` - Brazilian individual taxpayer ID (11 digits)
        - `CNPJ` - Brazilian company taxpayer ID (14 digits)
        - `EMAIL` - Email address
        - `PHONE` - Phone number with country code
        - `EVP` - Random PIX key (UUID format)
      enum:
        - CPF
        - CNPJ
        - EMAIL
        - PHONE
        - EVP
      example: CPF

    InteractiveButton:
      type: object
      description: |
        Button definition for interactive messages.

        **Usage:**
        - For `quick_reply`: Only `id` and `label` required
        - For `cta_url`: Requires `url` field
        - For `cta_call`: Requires `phone` field
        - For `cta_copy`: Requires `copyCode` field

        **Label Limits:**
        - `quick_reply`: max 20 characters
        - Other types: max 25 characters
      properties:
        id:
          type: string
          description: Unique identifier for the button (used in callbacks)
          example: btn_1
        type:
          $ref: "#/components/schemas/ButtonType"
        label:
          type: string
          description: Button display text
          maxLength: 25
          example: Click here
        url:
          type: string
          format: uri
          description: URL for cta_url button type
          example: https://httpbin.org/get
        phone:
          type: string
          description: Phone number for cta_call button type (international format)
          example: "+5511999999999"
        copyCode:
          type: string
          description: Text to copy for cta_copy button type
          example: DISCOUNT10
      required:
        - type
        - label
      additionalProperties: false

    ActionButton:
      type: object
      description: |
        Action button for interactive messages (CTA buttons).

        **Supported Actions:**
        - Open URL (`cta_url`)
        - Make call (`cta_call`)
        - Copy text (`cta_copy`)
        - Quick reply (`quick_reply`)
      properties:
        id:
          type: string
          description: Unique button identifier (max 256 chars)
          maxLength: 256
          example: "btn_1"
        type:
          $ref: "#/components/schemas/ButtonType"
        label:
          type: string
          description: Button display text (max 25 chars, 20 for quick_reply)
          maxLength: 25
          example: View Details
        url:
          type: string
          format: uri
          description: URL to open (required for cta_url)
          example: https://httpbin.org/anything/details
        phone:
          type: string
          description: Phone number to call (required for cta_call)
          example: "+5511999999999"
        copyCode:
          type: string
          description: Text to copy (required for cta_copy)
          example: CODE123
      required:
        - id
        - type
        - label
      additionalProperties: false

    Button:
      type: object
      description: |
        Simple reply button for button-list messages.

        **Limits:**
        - ID: max 256 characters
        - Title: max 20 characters
      properties:
        id:
          type: string
          description: Unique button identifier (returned in selection callback)
          maxLength: 256
          example: "btn_yes"
        title:
          type: string
          description: Button display text
          maxLength: 20
          example: "Yes"
      required:
        - id
        - title
      additionalProperties: false

    ListRow:
      type: object
      description: |
        Row item in a list/option message.

        **Limits:**
        - Title: max 24 characters
        - Description: max 72 characters
      properties:
        id:
          type: string
          description: Unique identifier for the row (returned in selection callback)
          example: row_1
        title:
          type: string
          description: Row title displayed to user
          maxLength: 24
          example: Option 1
        description:
          type: string
          description: Optional row description
          maxLength: 72
          example: This is the first option
      required:
        - id
        - title
      additionalProperties: false

    ListSection:
      type: object
      description: |
        Section containing rows in a button list message.

        **Limits:**
        - Title: max 24 characters
        - Rows per section: max 10
      properties:
        title:
          type: string
          description: Section title displayed as header
          maxLength: 24
          example: Choose an option
        rows:
          type: array
          description: List of rows in this section
          items:
            $ref: "#/components/schemas/ListRow"
          minItems: 1
          maxItems: 10
      required:
        - title
        - rows
      additionalProperties: false

    PIXPayment:
      type: object
      description: |
        PIX payment information for Brazilian payment messages.

        **Required Fields:**
        - `keyType`: Type of PIX key
        - `key`: The PIX key value
        - `name`: Beneficiary name
        - `amount`: Payment amount in BRL

        **Optional Fields:**
        - `description`: Payment description
        - `merchantCity`: Merchant city for PIX
        - `merchantName`: Merchant name
        - `txId`: Transaction identifier
      properties:
        keyType:
          $ref: "#/components/schemas/PIXKeyType"
        key:
          type: string
          description: PIX key value (format depends on keyType)
          example: "12345678900"
        name:
          type: string
          description: Beneficiary name (who receives the payment)
          example: John Doe
        amount:
          type: number
          format: float
          description: Payment amount in BRL (Brazilian Real)
          minimum: 0.01
          example: 99.90
        description:
          type: string
          description: Payment description/memo
          example: Product purchase
        merchantCity:
          type: string
          description: Merchant city for PIX QR code
          example: SAO PAULO
        merchantName:
          type: string
          description: Merchant name for PIX QR code
          example: My Store
        txId:
          type: string
          description: Transaction identifier for tracking
          example: TX123456789
      required:
        - keyType
        - key
        - name
        - amount
      additionalProperties: false

    CarouselCard:
      type: object
      description: |
        Card in a carousel message.

        **Structure:**
        - mediaUrl: URL for card image/video (required)
        - body: Text content (required, max 1024 chars)
        - buttons: Action buttons (required, 1-3 per card)
        - header: Optional header text (max 60 chars)
        - footer: Optional footer text (max 60 chars)

        **Limits:**
        - Body text: max 1024 characters
        - Buttons per card: 1-3
        - Header text: max 60 characters
        - Footer text: max 60 characters
      properties:
        mediaUrl:
          type: string
          format: uri
          description: URL for card image or video (required)
          example: "https://picsum.photos/600/400.jpg"
        body:
          type: string
          description: Card body text content (required)
          maxLength: 1024
          example: "Product description here"
        buttons:
          type: array
          description: Action buttons for this card (1-3 buttons required)
          items:
            $ref: "#/components/schemas/ActionButton"
          minItems: 1
          maxItems: 3
        header:
          type: string
          description: Optional card header text
          maxLength: 60
          example: "Product Name"
        footer:
          type: string
          description: Optional card footer text
          maxLength: 60
          example: "$99.99"
      required:
        - mediaUrl
        - body
        - buttons
      additionalProperties: false

    # ==========================================
    # Interactive Message Request Schemas
    # ==========================================

    SendButtonListRequest:
      type: object
      description: |
        Request body for sending simple reply button messages (Z-API compatible).

        **Features:**
        - Simple reply buttons (1-3 buttons)
        - Optional header image/video
        - Quick selection callbacks

        **Limits:**
        - Max 3 buttons
        - Title: max 60 chars
        - Message: max 1024 chars
        - Footer: max 60 chars
        - Button title: max 20 chars

        **Message Queue:** Messages are queued per recipient with FIFO ordering.
      properties:
        phone:
          type: string
          description: |
            Recipient phone number in international format (without + prefix).

            **Examples:**
            - Individual: `5511999999999` (Brazil mobile)
            - Group: `120363047204807488@g.us`
          example: "5511999999999"
        message:
          type: string
          description: Message body text
          maxLength: 1024
          example: Please select one of the options below
        buttons:
          type: array
          description: Simple reply buttons (1-3 buttons)
          items:
            $ref: "#/components/schemas/Button"
          minItems: 1
          maxItems: 3
        title:
          type: string
          description: Message title displayed at the top (optional)
          maxLength: 60
          example: Choose an option
        footer:
          type: string
          description: Footer text at the bottom of the message (optional)
          maxLength: 60
          example: Powered by our service
        image:
          type: string
          description: |
            Optional header image URL or base64.

            **Formats:**
            - URL: `https://picsum.photos/600/400.jpg`
            - Base64: `data:image/png;base64,...`
          example: https://picsum.photos/600/400.jpg
        video:
          type: string
          description: |
            Optional header video URL or base64.

            **Formats:**
            - URL: `https://download.blender.org/durian/trailer/sintel_trailer-480p.mp4`
            - Base64: `data:video/mp4;base64,...`
          example: https://download.blender.org/durian/trailer/sintel_trailer-480p.mp4
        messageId:
          type: string
          description: Optional custom message ID for tracking/reply
        delayMessage:
          type: integer
          minimum: 0
          maximum: 15
          description: Delay in seconds before sending (0-15)
          example: 0
        delayTyping:
          type: integer
          minimum: 0
          maximum: 15
          description: Typing indicator delay in seconds (0-15)
          example: 0
      required:
        - phone
        - message
        - buttons
      additionalProperties: false

    SendButtonActionsRequest:
      type: object
      description: |
        Request body for sending button actions messages (Z-API compatible).

        **Features:**
        - CTA buttons (URL, Call, Copy)
        - Optional image header
        - Quick reply buttons

        **Button Types:**
        - `quick_reply` - Simple reply button
        - `cta_url` - Opens a URL
        - `cta_call` - Initiates a phone call
        - `cta_copy` - Copies text to clipboard

        **Limits:**
        - Max 3 buttons
        - Label: max 25 chars (20 for quick_reply)
        - Title: max 60 chars
        - Message: max 1024 chars
        - Footer: max 60 chars

        **Message Queue:** Messages are queued per recipient with FIFO ordering.
      properties:
        phone:
          type: string
          description: Recipient phone number in international format
          example: "5511999999999"
        title:
          type: string
          description: Message title
          maxLength: 60
          example: Action Required
        message:
          type: string
          description: Message body text
          maxLength: 1024
          example: Please take one of the following actions
        footer:
          type: string
          description: Footer text
          maxLength: 60
          example: Thank you
        buttons:
          type: array
          description: Action buttons (max 3)
          items:
            $ref: "#/components/schemas/ActionButton"
          minItems: 1
          maxItems: 3
        image:
          type: string
          description: |
            Optional header image URL or base64.

            **Formats:**
            - URL: `https://picsum.photos/600/400.jpg`
            - Base64: `data:image/png;base64,...`
          example: https://picsum.photos/600/400.jpg
        messageId:
          type: string
          format: uuid
          description: Optional custom message ID for tracking
        delayMessage:
          type: integer
          minimum: 0
          maximum: 15
          description: Delay in seconds before sending (0-15)
          example: 0
      required:
        - phone
        - buttons
      additionalProperties: false

    SendOptionListRequest:
      type: object
      description: |
        Request body for sending interactive list/menu messages (Z-API compatible).

        **Features:**
        - Multiple sections with rows
        - Expandable list menu
        - Selection callbacks

        **Limits:**
        - Max 10 sections
        - Max 10 rows per section
        - Title: max 60 chars
        - Message: max 4096 chars
        - Footer: max 60 chars
        - Button label: max 20 chars
        - Section title: max 24 chars
        - Row title: max 24 chars
        - Row description: max 72 chars

        **Message Queue:** Messages are queued per recipient with FIFO ordering.
      properties:
        phone:
          type: string
          description: Recipient phone number in international format
          example: "5511999999999"
        message:
          type: string
          description: Message body text
          maxLength: 4096
          example: Please select one of the options below
        buttonLabel:
          type: string
          description: Text on the button that opens the menu (max 20 chars)
          maxLength: 20
          example: View Menu
        sections:
          type: array
          description: List of sections containing rows (1-10 sections)
          items:
            $ref: "#/components/schemas/ListSection"
          minItems: 1
          maxItems: 10
        title:
          type: string
          description: Message title (optional)
          maxLength: 60
          example: Select an option
        footer:
          type: string
          description: Footer text (optional)
          maxLength: 60
          example: Footer text
        messageId:
          type: string
          description: Optional custom message ID for tracking/reply
        delayMessage:
          type: integer
          minimum: 0
          maximum: 15
          description: Delay in seconds before sending (0-15)
          example: 0
        delayTyping:
          type: integer
          minimum: 0
          maximum: 15
          description: Typing indicator delay in seconds (0-15)
          example: 0
      required:
        - phone
        - message
        - buttonLabel
        - sections
      additionalProperties: false

    SendButtonPIXRequest:
      type: object
      description: |
        Request body for sending PIX payment messages (Z-API compatible).

        **Features:**
        - PIX QR code generation
        - Copy-paste PIX code
        - Multiple PIX key types

        **PIX Key Types:**
        - `CPF` - Brazilian individual taxpayer ID
        - `CNPJ` - Brazilian company taxpayer ID
        - `EMAIL` - Email address
        - `PHONE` - Phone number
        - `EVP` - Random PIX key (UUID format)

        **Message Queue:** Messages are queued per recipient with FIFO ordering.
      properties:
        phone:
          type: string
          description: Recipient phone number in international format
          example: "5511999999999"
        message:
          type: string
          description: Message body (optional, default "Pagamento via PIX")
          maxLength: 1024
          example: Please complete your payment
        pixKey:
          type: string
          description: PIX key value (format depends on key type)
          example: "12345678900"
        type:
          $ref: "#/components/schemas/PIXKeyType"
        name:
          type: string
          description: Beneficiary name (optional)
          example: John Doe
        amount:
          type: number
          format: float
          description: Payment amount in BRL (optional)
          minimum: 0.01
          example: 99.90
        transactionId:
          type: string
          description: Transaction identifier for tracking (optional)
          example: TX123456789
        messageId:
          type: string
          description: Optional custom message ID for tracking/reply
        delayMessage:
          type: integer
          minimum: 0
          maximum: 15
          description: Delay in seconds before sending (0-15)
          example: 0
        delayTyping:
          type: integer
          minimum: 0
          maximum: 15
          description: Typing indicator delay in seconds (0-15)
          example: 0
      required:
        - phone
        - pixKey
        - type
      additionalProperties: false

    SendButtonOTPRequest:
      type: object
      description: |
        Request body for sending OTP (One-Time Password) messages (Z-API compatible).

        **Features:**
        - One-tap copy button
        - Verification code display
        - 2FA/Authentication flows

        **Use Cases:**
        - Login verification
        - Password reset
        - Two-factor authentication
        - Account verification

        **Message Queue:** Messages are queued per recipient with FIFO ordering.
      properties:
        phone:
          type: string
          description: Recipient phone number in international format
          example: "5511999999999"
        message:
          type: string
          description: Message body containing OTP context (required)
          maxLength: 1024
          example: Your verification code is below. Do not share it with anyone.
        code:
          type: string
          description: OTP code to copy (max 20 chars)
          maxLength: 20
          example: "123456"
        title:
          type: string
          description: Optional header text
          maxLength: 60
          example: Verification Code
        footer:
          type: string
          description: Optional footer text
          maxLength: 60
          example: Code expires in 5 minutes
        messageId:
          type: string
          format: uuid
          description: Optional custom message ID for tracking
        delayMessage:
          type: integer
          minimum: 1
          maximum: 15
          description: Delay in seconds before sending (1-15)
          example: 0
        delayTyping:
          type: integer
          minimum: 1
          maximum: 15
          description: Typing indicator delay in seconds (1-15)
          example: 0
      required:
        - phone
        - message
        - code
      additionalProperties: false

    SendCarouselRequest:
      type: object
      description: |
        Request body for sending carousel messages (Z-API compatible).

        **Features:**
        - Multiple swipeable cards with media
        - Action buttons per card (1-3)
        - Optional card type selection

        **Limits:**
        - Cards: 1-10 per carousel
        - Buttons per card: 1-3
        - Body text: max 1024 chars per card

        **Card Types:**
        - HSCROLL_CARDS: Horizontal scrolling cards (default)
        - ALBUM_IMAGE: Image album format

        **Use Cases:**
        - Product catalogs
        - Image galleries
        - Multi-option presentations
        - Tutorial sequences

        **Message Queue:** Messages are queued per recipient with FIFO ordering.
      properties:
        phone:
          type: string
          description: Recipient phone number in international format
          example: "5511999999999"
        cards:
          type: array
          description: Carousel cards (1-10 cards)
          items:
            $ref: "#/components/schemas/CarouselCard"
          minItems: 1
          maxItems: 10
        cardType:
          type: string
          description: Card display type
          enum:
            - HSCROLL_CARDS
            - ALBUM_IMAGE
          default: HSCROLL_CARDS
          example: HSCROLL_CARDS
        messageId:
          type: string
          description: Optional custom message ID for tracking
        delayMessage:
          type: integer
          minimum: 1
          maximum: 15
          description: Delay in seconds before sending (1-15)
          example: 0
        delayTyping:
          type: integer
          minimum: 1
          maximum: 15
          description: Typing indicator delay in seconds (1-15)
          example: 0
      required:
        - phone
        - cards
      additionalProperties: false

    MessageQueuedResponse:
      type: object
      description: Response after successfully queuing an interactive message.
      properties:
        success:
          type: boolean
          description: Whether the message was queued successfully
          example: true
        message:
          type: string
          description: Status message
          example: Message queued successfully
        data:
          type: object
          properties:
            queueId:
              type: string
              format: uuid
              description: Queue entry ID for tracking
              example: 123e4567-e89b-12d3-a456-426614174000
            messageId:
              type: string
              description: Message ID (same as queueId until sent)
              example: 123e4567-e89b-12d3-a456-426614174001
            status:
              type: string
              description: Queue status
              enum:
                - queued
                - processing
                - sent
                - failed
              example: queued
          required:
            - queueId
            - messageId
            - status
      required:
        - success
        - message
        - data
      additionalProperties: false

    # Poll message schemas (Z-API compatible)
    PollOption:
      type: object
      description: A single poll option (Z-API compatible format)
      properties:
        name:
          type: string
          description: Option text
          example: "FUNNELCHATAPI"
      required:
        - name
      additionalProperties: false

    SendPollRequest:
      type: object
      description: |
        Request body for sending poll messages (Z-API compatible).

        **Features:**
        - Create polls with 2-12 options
        - Single or multiple choice selection
        - Optional reply-to support
        - Typing indicator and delay support

        **Z-API Compatible:** Matches Z-API request format exactly.
      properties:
        phone:
          type: string
          description: Recipient phone number in international format
          example: "554499999999"
        message:
          type: string
          description: Poll question text (Z-API uses "message" field for the question)
          example: "Outra enquete"
        poll:
          type: array
          description: Poll options array (2-12 options required)
          items:
            $ref: "#/components/schemas/PollOption"
          minItems: 2
          maxItems: 12
          example:
            - name: "FUNNELCHATAPI"
            - name: "Testeee"
        pollMaxOptions:
          type: integer
          description: "Maximum selections allowed: 0 for single choice, 1+ for multiple choice"
          minimum: 0
          maximum: 12
          default: 0
          example: 1
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Delay in seconds before sending (1-15)
          example: 5
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Typing indicator duration in seconds (1-15)
      required:
        - phone
        - message
        - poll
      additionalProperties: false

    # Event message schemas (Z-API compatible)
    EventLocation:
      type: object
      description: Event location information (Z-API compatible)
      properties:
        name:
          type: string
          description: Location name
          example: "Nome do lugar"
        degreesLatitude:
          type: [number, "null"]
          format: double
          description: Latitude coordinate
        degreesLongitude:
          type: [number, "null"]
          format: double
          description: Longitude coordinate
      additionalProperties: false

    EventPayload:
      type: object
      description: Nested event object (Z-API compatible format)
      properties:
        name:
          type: string
          description: Event name/title
          example: "Nome do evento"
        description:
          type: string
          description: Event description
          example: "Descricao do evento"
        dateTime:
          type: string
          format: date-time
          description: Event date and time in ISO 8601 format
          example: "2024-04-29T09:30:53.309Z"
        location:
          $ref: "#/components/schemas/EventLocation"
        callLinkType:
          type: string
          description: Type of call link for the event
          enum:
            - voice
            - video
          example: "voice"
        canceled:
          type: boolean
          description: Whether the event is canceled
          default: false
          example: false
      required:
        - name
        - dateTime
      additionalProperties: false

    SendEventRequest:
      type: object
      description: |
        Request body for sending calendar event messages (Z-API compatible).

        **Features:**
        - Send calendar events to groups
        - Support for location and call links
        - Event cancellation support

        **Z-API Compatible:** Matches Z-API request format exactly.
      properties:
        phone:
          type: string
          description: Recipient phone number or group JID (e.g., "120363356737170752-group")
          example: "120363356737170752-group"
        event:
          $ref: "#/components/schemas/EventPayload"
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Delay in seconds before sending (1-15)
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Typing indicator duration in seconds (1-15)
      required:
        - phone
        - event
      additionalProperties: false

    # Link preview message schemas (Z-API compatible)
    SendLinkRequest:
      type: object
      description: |
        Request body for sending link messages with custom preview (Z-API compatible).

        **Features:**
        - Custom link preview title and description
        - Custom preview image
        - Optional message text before the link
        - Reply-to support

        **Z-API Compatible:** Matches Z-API request format exactly.
      properties:
        phone:
          type: string
          description: Recipient phone number in international format
          example: "5544999999999"
        message:
          type: string
          description: Optional text message that appears before the link
          example: "Mensagem que ira aparecer antes do link"
        image:
          type: string
          description: Custom preview image URL
          example: "https://app.funnelchatapi.io/logos/zapi-dark.png"
        linkUrl:
          type: string
          format: uri
          description: URL to share
          example: "https://app.funnelchatapi.io"
        title:
          type: string
          description: Custom link preview title
          example: "Titulo da mensagem"
        linkDescription:
          type: string
          description: Custom link preview description
          example: "Descricao do link"
        messageId:
          type: [string, "null"]
          description: Optional WhatsApp message ID to reply to
        delayMessage:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Delay in seconds before sending (1-15)
          example: 5
        delayTyping:
          type: [integer, "null"]
          minimum: 1
          maximum: 15
          description: Typing indicator duration in seconds (1-15)
      required:
        - phone
        - linkUrl
      additionalProperties: false

    # Chat modification schemas (Z-API compatible)
    ModifyChatRequest:
      type: object
      description: |
        Request body for modifying chat state (Z-API compatible).

        **Supported Actions:**
        - read: Mark chat as read
        - archive: Archive the chat
        - unarchive: Unarchive the chat
        - pin: Pin the chat
        - unpin: Unpin the chat
        - mute: Mute notifications (8 hours default)
        - unmute: Unmute notifications
        - clear: Clear chat messages (not supported by whatsmeow)
        - delete: Delete the chat

        **Z-API Compatible:** Matches Z-API request format exactly.
      properties:
        phone:
          type: string
          description: Phone number or group JID
          example: "554499999999"
        action:
          type: string
          description: Action to perform on the chat
          enum:
            - read
            - archive
            - unarchive
            - pin
            - unpin
            - mute
            - unmute
            - clear
            - delete
          example: "delete"
      required:
        - phone
        - action
      additionalProperties: false

    ModifyChatResponse:
      type: object
      description: Response for modify-chat operations
      properties:
        success:
          type: boolean
          description: Whether the operation was successful
          example: true
        phone:
          type: string
          description: Phone number that was modified
          example: "554499999999"
        action:
          type: string
          description: Action that was performed
          example: "delete"
        message:
          type: string
          description: Status message
          example: "Chat delete successful"
      required:
        - success
        - phone
        - action
      additionalProperties: false

    # Delete message schemas (Z-API compatible)
    DeleteMessageResponse:
      type: object
      description: Response for delete message operations (Z-API compatible)
      properties:
        success:
          type: boolean
          description: Whether the message was deleted successfully
          example: true
        phone:
          type: string
          description: Phone number/chat where message was deleted
          example: "554499999999"
        messageId:
          type: string
          description: ID of the deleted message
          example: "3EB047ED70306656281B34"
        message:
          type: string
          description: Status message
          example: "Message deleted successfully"
      required:
        - success
        - phone
        - messageId
      additionalProperties: false

    # Media schemas
    MediaStatsResponse:
      type: object
      description: Statistics about media storage system
      properties:
        total_files:
          type: integer
          description: Total number of media files stored
          example: 1234
        total_bytes:
          type: integer
          format: int64
          description: Total size of all media files in bytes
          example: 1073741824
        base_path:
          type: string
          description: Base directory path for media storage
          example: "/data/media"
        url_expiry:
          type: string
          description: Default URL expiration duration
          example: "24h0m0s"
        public_base_url:
          type: string
          description: Public base URL for media access
          example: "https://api.example.com/media"
      required:
        - total_files
        - total_bytes
        - base_path
        - url_expiry
        - public_base_url
      additionalProperties: false

    # Prometheus metrics (text/plain format)
    PrometheusMetrics:
      type: string
      description: |
        Prometheus exposition format metrics.
        Contains application metrics including:
        - HTTP request counts and latencies
        - Message queue statistics
        - WhatsApp connection status
        - Event processing metrics
      example: |
        # HELP http_requests_total Total HTTP requests
        # TYPE http_requests_total counter
        http_requests_total{method="GET",path="/health"} 1234

paths:
  /health:
    get:
      tags:
        - System
      summary: Liveness probe
      description: Returns a JSON object indicating that the API process is running.
      operationId: healthLiveness
      security: []
      responses:
        "200":
          description: Process is alive and capable of serving traffic.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HealthStatusResponse"
  /ready:
    get:
      tags:
        - System
      summary: Readiness probe
      description:
        "Checks critical dependencies (Postgres, Redis lock manager). The service is considered ready when all
        reported components are `healthy`. Any `degraded` or `unhealthy` status results in a `503` response.

        "
      operationId: healthReadiness
      security: []
      responses:
        "200":
          description: Service is ready to receive traffic.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReadinessResponse"
              examples:
                ready:
                  value:
                    ready: true
                    observed_at: "2024-05-28T10:59:00Z"
                    checks:
                      database:
                        status: healthy
                        duration_ms: 12
                      redis:
                        status: healthy
                        duration_ms: 8
                        circuit_state: CLOSED
        "503":
          description: At least one dependency is degraded or unavailable.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReadinessResponse"
              examples:
                degraded:
                  value:
                    ready: false
                    observed_at: "2024-05-28T11:01:00Z"
                    checks:
                      database:
                        status: unhealthy
                        error: database not configured
                        duration_ms: 3
                      redis:
                        status: degraded
                        error: fallback lock in use
                        duration_ms: 7
                        circuit_state: OPEN
  /metrics:
    get:
      tags:
        - System
      summary: Prometheus metrics endpoint
      description: |
        Exposes application metrics in Prometheus exposition format.
        Includes HTTP request counts, message queue statistics, WhatsApp connection status,
        and event processing metrics.

        **Available Metric Categories:**
        - `http_*`: HTTP request counts and latencies
        - `message_queue_*`: Message queue depth and processing rates
        - `whatsapp_*`: WhatsApp connection and message statistics
        - `event_*`: Event processing metrics
      operationId: prometheusMetrics
      security: []
      responses:
        "200":
          description: Prometheus metrics in text exposition format
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/PrometheusMetrics"
  /instances:
    get:
      tags:
        - Partner
      summary: List partner instances
      description: Returns a paginated list of managed WhatsApp instances for the partner account.
      operationId: listInstances
      security:
        - PartnerBearer: []
      parameters:
        - in: query
          name: query
          schema:
            type: string
          description: Filter results by instance name or session name.
        - in: query
          name: middleware
          schema:
            type: string
          description: Informational middleware flag (matches Z-API contract).
        - in: query
          name: page
          required: true
          schema:
            type: integer
            minimum: 1
          description: Page number (1-indexed).
          example: 1
        - in: query
          name: pageSize
          required: true
          schema:
            type: integer
            minimum: 1
            maximum: 200
          description: Page size (defaults to 15 as in Z-API examples).
          example: 15
      responses:
        "200":
          description: List of instances owned by the partner.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InstanceListResponse"
        "401":
          description: Missing or invalid Partner bearer token.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/integrator/on-demand:
    post:
      tags:
        - Partner
      summary: Partner creates an instance on demand
      description: Mirrors Z-API partner endpoint for provisioning instances via integrator credentials.
      operationId: partnerCreateInstance
      security:
        - PartnerBearer: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PartnerInstanceCreateRequest"
      responses:
        "201":
          description: Instance created for partner
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PartnerInstanceCreateResponse"
        "400":
          description: Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}:
    delete:
      tags:
        - Partner
      summary: Permanently delete instance (Partner API)
      description: "**‚ö†Ô∏è IRREVERSIBLE OPERATION ‚ö†Ô∏è**


        Permanently deletes a WhatsApp instance including all associated data from both databases.


        **Complete Cleanup Operations:**

        - ‚úÖ Disconnects the WhatsApp client immediately

        - ‚úÖ Disables auto-reconnect to prevent reconnection

        - ‚úÖ **Deletes device store from whatsmeow_store database**

        - ‚úÖ Stops lock refresh goroutine

        - ‚úÖ Releases Redis distributed lock

        - ‚úÖ Removes client from in-memory registry

        - ‚úÖ **Deletes instance record from api_core database**

        - ‚úÖ **Deletes all webhook configurations (CASCADE)**

        - ‚úÖ **Deletes all webhook outbox entries (CASCADE)**

        - ‚úÖ **Deletes all webhook DLQ entries (manual deletion)**

        - ‚úÖ **Deletes all instance event logs (manual deletion)**


        **Database Deletion Strategy:**

        - Uses transaction to ensure ACID compliance

        - Manually deletes tables without CASCADE constraints (webhook_dlq, instance_events_log)

        - Relies on CASCADE for webhook_configs and webhook_outbox

        - Deletes device credentials from separate whatsmeow_store database


        **Authentication:**

        - Requires Partner Bearer token only (no instance token needed)

        - This is a Partner-level administrative operation


        **Use Cases:**

        - Cleanup of test/development instances

        - Customer offboarding and data removal

        - GDPR/data deletion compliance requests

        - Freeing resources from inactive instances


        **Important Notes:**

        - **This operation cannot be undone or reversed**

        - All data associated with the instance is permanently lost

        - The instance cannot be recovered or reconnected after deletion

        - Consider using `/disconnect` if you need to preserve the instance record

        "
      operationId: partnerDeleteInstance
      security:
        - PartnerBearer: []
      parameters:
        - name: instanceId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Unique instance identifier to permanently delete.
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        "200":
          description: Instance permanently deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - deleted
                    description: Confirmation that instance was deleted
                    example: deleted
                required:
                  - status
              example:
                status: deleted
        "400":
          description: Invalid instance ID format (must be valid UUID)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: invalid instance id
        "401":
          description: Missing or invalid Partner bearer token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: unauthorized
        "404":
          description: Instance not found in database
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: instance not found
        "500":
          description: Internal error during deletion (transaction may have been rolled back)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "delete instance from database: connection error"
  /instances/{instanceId}/token/{instanceToken}/status:
    get:
      tags:
        - Instances
      summary: Retrieve instance status
      description: "Mirrors Z-API `/status`, returning live connectivity information for a provisioned instance."
      operationId: getInstanceStatus
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Instance status snapshot
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InstanceStatusResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/qr-code:
    get:
      tags:
        - Instances
      summary: Fetch QR code for pairing
      description: "Mirrors Z-API `/qr-code`, returning the current QR string required to link a phone."
      operationId: getInstanceQRCode
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Current QR code payload (text/plain)
          content:
            text/plain:
              schema:
                type: string
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/qr-code/image:
    get:
      tags:
        - Instances
      summary: Fetch QR code as base64 image
      description: "Mirrors Z-API `/qr-code/image`, returning a PNG image encoded in base64 for rendering in clients."
      operationId: getInstanceQRCodeImage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: QR code rendered as base64 PNG data URL.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QRCodeImageResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/device:
    get:
      tags:
        - Instances
      summary: Retrieve device metadata
      description: "Mirrors Z-API `/device`, returning information about the currently linked phone."
      operationId: getInstanceDevice
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Device metadata currently associated with the instance.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InstanceDeviceResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/phone-code/{phone}:
    get:
      tags:
        - Instances
      summary: Fetch phone pairing code
      description:
        Mirrors Z-API `/phone-code/{phone}`, returning a code that can be typed into WhatsApp instead of scanning
        the QR code.
      operationId: getInstancePhoneCode
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: path
          name: phone
          required: true
          schema:
            type: string
          description: International phone number (numbers only) used for code pairing.
      responses:
        "200":
          description: Pairing code generated for the provided phone number.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PhoneCodeResponse"
        "400":
          description: Invalid phone number supplied.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/restart:
    get:
      tags:
        - Instances
      summary: Restart an instance connection
      description: "Equivalent to Z-API `/restart`, forcing the client to reconnect to WhatsApp."
      operationId: restartInstanceGet
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Restart signal accepted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
              example:
                value: true
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      tags:
        - Instances
      summary: Restart an instance connection
      description: "Equivalent to Z-API `/restart`, forcing the client to reconnect to WhatsApp."
      operationId: restartInstance
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Restart signal accepted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
              example:
                value: true
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/disconnect:
    get:
      tags:
        - Instances
      summary: Complete disconnect with cleanup (Logout)
      description: |
        Performs a complete disconnect with full cleanup, equivalent to logout/reset.

        **This operation performs the following actions:**

        - ‚úÖ Disables auto-reconnect to prevent automatic reconnection
        - ‚úÖ Disconnects WebSocket connection immediately
        - ‚úÖ **Deletes device store from whatsmeow_store database**
        - ‚úÖ Stops lock refresh goroutine
        - ‚úÖ Releases Redis distributed lock
        - ‚úÖ Removes client from in-memory registry
        - ‚úÖ Clears store_jid in api_core database (sets to NULL)

        **Important Notes:**

        - The instance record remains in the database (status becomes "disconnected")
        - To permanently delete the instance, use `DELETE /partner/instances/{instanceId}`
        - After disconnect, you can reconnect by calling `/qrcode` or `/pairphone`
        - All webhook configurations are preserved

        **Use Cases:**

        - User logout from WhatsApp
        - Switching to a different phone number
        - Temporary disconnection for maintenance
        - Resetting a stuck connection

        **Comparison with DELETE endpoint:**

        - Disconnect: Keeps instance record, allows reconnection
        - Delete: Permanent removal, cannot be recovered
      operationId: disconnectInstanceGet
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Complete disconnect with cleanup accepted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
              example:
                value: true
        "401":
          description: Unauthorized (invalid client token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      tags:
        - Instances
      summary: Complete disconnect with cleanup (Logout)
      description:
        'Performs a complete disconnect with full cleanup, equivalent to logout/reset.


        **This operation performs the following actions:**

        - ‚úÖ Disables auto-reconnect to prevent automatic reconnection

        - ‚úÖ Disconnects WebSocket connection immediately

        - ‚úÖ **Deletes device store from whatsmeow_store database**

        - ‚úÖ Stops lock refresh goroutine

        - ‚úÖ Releases Redis distributed lock

        - ‚úÖ Removes client from in-memory registry

        - ‚úÖ Clears store_jid in api_core database (sets to NULL)


        **Important Notes:**

        - The instance record remains in the database (status becomes "disconnected")

        - To permanently delete the instance, use `DELETE /partner/instances/{instanceId}`

        - After disconnect, you can reconnect by calling `/qrcode` or `/pairphone`

        - All webhook configurations are preserved


        **Use Cases:**

        - User logout from WhatsApp

        - Switching to a different phone number

        - Temporary disconnection for maintenance

        - Resetting a stuck connection


        **Comparison with DELETE endpoint:**

        - Disconnect: Keeps instance record, allows reconnection

        - Delete: Permanent removal, cannot be recovered

        '
      operationId: disconnectInstance
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Complete disconnect with cleanup accepted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
              example:
                value: true
        "401":
          description: Unauthorized (invalid client token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-delivery:
    put:
      tags:
        - Instances
      summary: Update delivery webhook
      description: "Mirrors Z-API `/update-webhook-delivery`, configuring the sent-message webhook endpoint."
      operationId: updateWebhookDelivery
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-received:
    put:
      tags:
        - Instances
      summary: Update received webhook
      description: "Mirrors Z-API `/update-webhook-received`, configuring the incoming message webhook endpoint."
      operationId: updateWebhookReceived
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-received-delivery:
    put:
      tags:
        - Instances
      summary: Update received+delivery webhook
      description:
        Mirrors Z-API `/update-webhook-received-delivery`, configuring the webhook used when `notifySentByMe` is
        enabled.
      operationId: updateWebhookReceivedDelivery
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-message-status:
    put:
      tags:
        - Instances
      summary: Update message status webhook
      description: "Mirrors Z-API `/update-webhook-message-status`, configuring delivery-read status updates."
      operationId: updateWebhookMessageStatus
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-disconnected:
    put:
      tags:
        - Instances
      summary: Update disconnected webhook
      description: "Mirrors Z-API `/update-webhook-disconnected`, configuring the disconnect notification endpoint."
      operationId: updateWebhookDisconnected
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-connected:
    put:
      tags:
        - Instances
      summary: Update connected webhook
      description: "Mirrors Z-API `/update-webhook-connected`, configuring the connection notification endpoint."
      operationId: updateWebhookConnected
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-chat-presence:
    put:
      tags:
        - Instances
      summary: Update chat presence webhook
      description: "Mirrors Z-API `/update-webhook-chat-presence`, configuring the typing/presence webhook endpoint."
      operationId: updateWebhookChatPresence
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-notify-sent-by-me:
    put:
      tags:
        - Instances
      summary: Toggle notify-sent-by-me
      description: "Mirrors Z-API `/update-notify-sent-by-me`, enabling or disabling callbacks for messages sent by the instance."
      operationId: updateNotifySentByMe
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NotifySentByMeRequest"
      responses:
        "200":
          description: Setting updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-every-webhooks:
    put:
      tags:
        - Instances
      summary: Update all webhooks at once
      description: "Mirrors Z-API `/update-every-webhooks`, applying the same HTTPS endpoint to every webhook type."
      operationId: updateEveryWebhooks
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookEveryRequest"
      responses:
        "200":
          description: Webhooks updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-call-reject-auto:
    put:
      tags:
        - Instances
      summary: Toggle automatic call rejection
      description: "Mirrors Z-API `/update-call-reject-auto`, enabling or disabling automatic rejection of incoming calls."
      operationId: updateCallRejectAuto
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BoolValueRequest"
      responses:
        "200":
          description: Setting updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValueResponse"
        "400":
          description: Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-call-reject-message:
    put:
      tags:
        - Instances
      summary: Update call rejection message
      description: "Mirrors Z-API `/update-call-reject-message`, setting the message sent when rejecting calls."
      operationId: updateCallRejectMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StringValueRequest"
      responses:
        "200":
          description: Setting updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValueResponse"
        "400":
          description: Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-auto-read-message:
    put:
      tags:
        - Instances
      summary: Toggle automatic message reading
      description: "Mirrors Z-API `/update-auto-read-message`, enabling or disabling automatic marking of messages as read."
      operationId: updateAutoReadMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BoolValueRequest"
      responses:
        "200":
          description: Setting updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValueResponse"
        "400":
          description: Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/integrator/on-demand/subscription:
    post:
      tags:
        - Partner
      summary: Activate partner subscription
      description: Enables on-demand billing/usage for the specified instance (Z-API parity).
      operationId: partnerSubscribeInstance
      security:
        - PartnerBearer: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Subscription activated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OperationStatusResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/integrator/on-demand/cancel:
    post:
      tags:
        - Partner
      summary: Cancel partner subscription
      description: Cancels the on-demand subscription for the instance, matching Z-API behaviour.
      operationId: partnerCancelInstance
      security:
        - PartnerBearer: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Subscription cancelled
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OperationStatusResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-text:
    post:
      tags:
        - Messages
      summary: Send text message
      description:
        "Sends a text message via WhatsApp with Z-API compatible format.


        **Features:**

        - ‚úÖ Text message with optional reply-to

        - ‚úÖ Typing indicator simulation (delayTyping)

        - ‚úÖ Delayed sending (delayMessage)

        - ‚úÖ Ephemeral/disappearing messages support

        - ‚úÖ Private reply in groups (privateAnswer)

        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)

        - ‚úÖ FIFO queue with per-recipient ordering

        - ‚úÖ Non-blocking (returns immediately with zaapId)


        **Z-API Compatible:** Matches Z-API request/response format exactly.

        "
      operationId: sendTextMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendTextRequest"
            example:
              phone: "5511999999999"
              message: Hello from Z-API!
              delayMessage: 5
              delayTyping: 3
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
              example:
                zaapId: 39BB1684570F00E91090F6BBC7EE7646
                messageId: 39BB1684570F00E91090F6BBC7EE7646
                id: 39BB1684570F00E91090F6BBC7EE7646
        "400":
          description: Invalid request (missing phone or message)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-image:
    post:
      tags:
        - Messages
      summary: Send image message
      description: "Sends an image message via WhatsApp with optional caption.


        **Features:**

        - ‚úÖ Image URL or base64 data URI support

        - ‚úÖ Optional caption/title

        - ‚úÖ View once support (disappears after viewing)

        - ‚úÖ Reply-to message support

        - ‚úÖ Typing indicator and delayed sending

        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)

        - ‚úÖ FIFO queue with per-recipient ordering


        **Supported Formats:**

        - Image URL: `https://picsum.photos/600/400.jpg`

        - Base64: `data:image/png;base64,iVBORw0KG...`


        **Z-API Compatible:** Matches Z-API request/response format exactly.

        "
      operationId: sendImageMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendImageRequest"
            example:
              phone: "5511999999999"
              image: https://picsum.photos/600/400.jpg
              caption: Check out this image!
              viewOnce: false
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-sticker:
    post:
      tags:
        - Messages
      summary: Send sticker message
      description: |
        Sends a sticker message via WhatsApp with Z-API compatible format.

        **Features:**
        - ‚úÖ Sticker URL or base64 data URI support
        - ‚úÖ Animated stickers (WebP format)
        - ‚úÖ Reply-to message support
        - ‚úÖ Typing indicator and delayed sending
        - ‚úÖ Ephemeral/disappearing messages support
        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)
        - ‚úÖ Private reply in groups (privateAnswer)
        - ‚úÖ FIFO queue with per-recipient ordering
        - ‚úÖ Non-blocking (returns immediately with zaapId)

        **Sticker Format:**
        - WebP format (animated or static)
        - 512x512 pixels recommended
        - Max 100KB for animated, 500KB for static
        - No caption support (stickers don't have text)

        **Supported Formats:**
        - URL: `https://www.gstatic.com/webp/gallery/1.webp`
        - Base64: `data:image/webp;base64,UklGRiQAAABXRUJQ...`

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendStickerMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendStickerRequest"
            example:
              phone: "5511999999999"
              sticker: "https://www.gstatic.com/webp/gallery/1.webp"
              delayMessage: 3
              delayTyping: 2
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
              example:
                zaapId: 39BB1684570F00E91090F6BBC7EE7646
                messageId: 39BB1684570F00E91090F6BBC7EE7646
                id: 39BB1684570F00E91090F6BBC7EE7646
                status: queued
        "400":
          description: Invalid request (missing phone or sticker, invalid format)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "sticker must be a valid URL or base64 data URI"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"
  /instances/{instanceId}/token/{instanceToken}/send-gif:
    post:
      tags:
        - Messages
      summary: Send GIF message
      description: |
        Sends a GIF message via WhatsApp with optional caption.

        **Features:**
        - ‚úÖ GIF URL or base64 data URI support
        - ‚úÖ Animated GIFs
        - ‚úÖ Optional caption/text
        - ‚úÖ View once support (disappears after viewing)
        - ‚úÖ Reply-to message support
        - ‚úÖ Typing indicator and delayed sending
        - ‚úÖ Ephemeral/disappearing messages support
        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)
        - ‚úÖ Private reply in groups (privateAnswer)
        - ‚úÖ FIFO queue with per-recipient ordering
        - ‚úÖ Non-blocking (returns immediately with zaapId)

        **GIF Format:**
        - GIF format (animated or static)
        - Any aspect ratio (auto-adjusted by WhatsApp)
        - Max 16MB recommended
        - Supports caption with @mentions

        **Supported Formats:**
        - URL: `https://media.giphy.com/media/3o7abKhOpu0NwenH3O/giphy.gif`
        - Base64: `data:image/gif;base64,R0lGODlhAQABAIAAAP...`

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendGifMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendGifRequest"
            example:
              phone: "5511999999999"
              gif: "https://media.giphy.com/media/3o7abKhOpu0NwenH3O/giphy.gif"
              caption: "Check this out! üéâ"
              viewOnce: false
              delayMessage: 3
              delayTyping: 2
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
              example:
                zaapId: 39BB1684570F00E91090F6BBC7EE7646
                messageId: 39BB1684570F00E91090F6BBC7EE7646
                id: 39BB1684570F00E91090F6BBC7EE7646
                status: queued
        "400":
          description: Invalid request (missing phone or gif, invalid format)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "gif must be a valid URL or base64 data URI"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"
  /instances/{instanceId}/token/{instanceToken}/send-audio:
    post:
      tags:
        - Messages
      summary: Send audio/voice message
      description: 'Sends an audio or voice note via WhatsApp.


        **Features:**

        - ‚úÖ Audio URL or base64 data URI support

        - ‚úÖ Voice note (PTT) detection

        - ‚úÖ "Recording audio" indicator (delayTyping)

        - ‚úÖ View once support

        - ‚úÖ Reply-to message support

        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)


        **Supported Formats:** OGG, MP3, WAV


        **Z-API Compatible:** Matches Z-API request/response format exactly.

        '
      operationId: sendAudioMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendAudioRequest"
            example:
              phone: "5511999999999"
              audio: https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3
              delayTyping: 5
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-video:
    post:
      tags:
        - Messages
      summary: Send video message
      description: "Sends a video message via WhatsApp with optional caption.


        **Features:**

        - ‚úÖ Video URL or base64 data URI support

        - ‚úÖ Optional caption/title

        - ‚úÖ View once support

        - ‚úÖ Reply-to message support

        - ‚úÖ Typing indicator and delayed sending

        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)


        **Supported Formats:** MP4, 3GP, AVI, MOV


        **Z-API Compatible:** Matches Z-API request/response format exactly.

        "
      operationId: sendVideoMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendVideoRequest"
            example:
              phone: "5511999999999"
              video: https://download.blender.org/durian/trailer/sintel_trailer-480p.mp4
              caption: Check out this video!
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-ptv:
    post:
      tags:
        - Messages
      summary: Send PTV (circular video) message
      description: |
        Sends a PTV (Push-To-Talk Video) message via WhatsApp with Z-API compatible format.

        **What is PTV?**
        PTV messages are circular video notes, displayed similarly to voice notes but with video content.
        They appear as circular thumbnails in the chat and play inline when tapped.

        **Features:**
        - ‚úÖ Circular video notes (like voice notes with video)
        - ‚úÖ Video URL or base64 data URI support
        - ‚úÖ Optional caption/text
        - ‚úÖ Reply-to message support
        - ‚úÖ Typing indicator and delayed sending
        - ‚úÖ Ephemeral/disappearing messages support
        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)
        - ‚úÖ Private reply in groups (privateAnswer)
        - ‚úÖ FIFO queue with per-recipient ordering
        - ‚úÖ Non-blocking (returns immediately with zaapId)

        **Video Format:**
        - MP4, 3GP, MOV (auto-converted if needed)
        - Max duration: 60 seconds recommended
        - Displayed as circular video in WhatsApp

        **Supported Formats:**
        - URL: `https://example.com/video.mp4`
        - Base64: `data:video/mp4;base64,AAAAIGZ0eXBpc29t...`

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendPTVMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendPTVRequest"
            examples:
              basic:
                summary: Basic PTV message
                value:
                  phone: "5511999999999"
                  video: "https://download.blender.org/durian/trailer/sintel_trailer-480p.mp4"
              withCaption:
                summary: PTV with caption
                value:
                  phone: "5511999999999"
                  video: "https://download.blender.org/durian/trailer/sintel_trailer-480p.mp4"
                  caption: "Check out this video note!"
                  delayMessage: 3
                  delayTyping: 2
              replyTo:
                summary: PTV as reply
                value:
                  phone: "5511999999999"
                  video: "https://download.blender.org/durian/trailer/sintel_trailer-480p.mp4"
                  caption: "Here's my response"
                  messageId: "3EB0796DC1B61E519"
              base64:
                summary: Base64 encoded PTV
                value:
                  phone: "5511999999999"
                  video: "data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQ..."
                  caption: "Video note from base64"
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
              example:
                zaapId: 39BB1684570F00E91090F6BBC7EE7646
                messageId: 39BB1684570F00E91090F6BBC7EE7646
                id: 39BB1684570F00E91090F6BBC7EE7646
                status: queued
        "400":
          description: Invalid request (missing phone or video, invalid format)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "video must be a valid URL or base64 data URI"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"
  /instances/{instanceId}/token/{instanceToken}/send-document:
    post:
      tags:
        - Messages
      summary: Send document message
      description:
        "Sends a document file via WhatsApp with optional caption and filename.


        **Features:**

        - ‚úÖ Document URL or base64 data URI support

        - ‚úÖ Custom filename support

        - ‚úÖ Optional caption/description

        - ‚úÖ Reply-to message support

        - ‚úÖ Typing indicator and delayed sending

        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)


        **Supported Formats:** PDF, DOC, DOCX, XLS, XLSX, TXT, CSV, ZIP, RAR


        **Z-API Compatible:** Matches Z-API request/response format exactly.

        "
      operationId: sendDocumentMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendDocumentRequest"
            example:
              phone: "5511999999999"
              document: https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf
              fileName: Monthly Report.pdf
              caption: Here is the monthly report
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/queue:
    get:
      tags:
        - Queue
      summary: List messages in queue with pagination
      description:
        "Lists all messages in the queue for a specific instance with Z-API compatible pagination.


        **Z-API Compatibility:**

        - Uses `page` and `pageSize` parameters (Z-API standard)

        - Returns direct array of messages (not wrapped in object)

        - Field names in camelCase (Z-API format)

        - Delays in seconds (not milliseconds)

        - Created timestamp in milliseconds


        **Response Format:**

        - Direct array: `[{message1}, {message2}, ...]`

        - NOT wrapped: `{data: [{message1}]}` ‚ùå


        **Pagination:**

        - `page`: Page number starting from 1

        - `pageSize`: Messages per page (default 100, max 1000)

        "
      operationId: listQueueMessages
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: page
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number (1-indexed)
          example: 1
        - in: query
          name: pageSize
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 100
          description: Number of messages per page
          example: 50
      responses:
        "200":
          description: List of queue messages (direct array)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QueueListResponse"
              example:
                - _id: 39BB1684570F00E91090F6BBC7EE7646
                  zaapId: 39BB1684570F00E91090F6BBC7EE7646
                  messageId: 7AD29EAA5EF34C301F0B
                  instanceId: 550e8400-e29b-41d4-a716-446655440000
                  phone: "5511999999999"
                  message: Hello from Z-API
                  delayMessage: 5
                  delayTyping: 3
                  created: 1624977905648
                  messageType: text
                  status: available
                  sequenceNumber: 1
                  attempt: 0
                  maxAttempts: 3
                - _id: A1B2C3D4E5F6G7H8I9J0K1L2M3N4O5P6
                  zaapId: A1B2C3D4E5F6G7H8I9J0K1L2M3N4O5P6
                  messageId: F5G6H7I8J9K0L1M2N3O4
                  instanceId: 550e8400-e29b-41d4-a716-446655440000
                  phone: 120363XXXXX@g.us
                  message: null
                  delayMessage: 0
                  delayTyping: 0
                  created: 1624977906000
                  messageType: image
                  status: scheduled
                  sequenceNumber: 2
                  attempt: 0
                  maxAttempts: 3
        "401":
          description: Unauthorized (invalid or missing Client-Token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      tags:
        - Queue
      summary: Clear all pending messages in queue
      description:
        "Clears all pending messages from the queue for a specific instance.


        **Behavior:**

        - ‚úÖ Removes messages in state: `available`, `scheduled`

        - ‚ùå Does NOT affect messages: `running`, `completed`, `failed`, `discarded`


        **Use Cases:**

        - Emergency stop of all pending messages

        - Queue cleanup during maintenance

        - Cancel all scheduled messages at once


        **Z-API Compatible:** Matches Z-API endpoint structure and behavior.

        "
      operationId: clearQueue
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Queue cleared successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QueueClearResponse"
              example:
                message: Queue cleared successfully
        "401":
          description: Unauthorized (invalid or missing Client-Token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/queue/count:
    get:
      tags:
        - Queue
      summary: Get queue message count
      description:
        "Returns the total number of messages in the queue for a specific instance.


        **Z-API Compatible:** Matches Z-API response format exactly.

        "
      operationId: getQueueCount
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Queue message count
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QueueCountResponse"
              example:
                count: 42
        "401":
          description: Unauthorized (invalid or missing Client-Token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/queue/{zaapId}:
    delete:
      tags:
        - Queue
      summary: Cancel a specific message in queue
      description:
        "Cancels a pending message by its zaapId (returned when message was enqueued).


        **Behavior:**

        - ‚úÖ Cancels messages in state: `available`, `scheduled`, `retryable`

        - ‚ùå Returns error if message already processed or doesn't exist


        **Z-API Compatible:** Matches Z-API endpoint structure and behavior.

        "
      operationId: cancelQueueMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: path
          name: zaapId
          required: true
          schema:
            type: string
          description: Message ID returned when message was sent (zaapId)
          example: 39BB1684570F00E91090F6BBC7EE7646
      responses:
        "200":
          description: Message cancelled successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QueueCancelResponse"
              example:
                message: Message cancelled successfully
        "400":
          description: Message not found or already processed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "job not found or already processed: 39BB1684570F00E91090F6BBC7EE7646"
        "401":
          description: Unauthorized (invalid or missing Client-Token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-location:
    post:
      tags:
        - Messages
      summary: Send location message
      description:
        Sends a location pin via WhatsApp with GPS coordinates, optional name/address, replies, mentions, and ephemeral
        support. Z-API compatible.
      operationId: sendLocationMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendLocationRequest"
            example:
              phone: "5511999999999"
              latitude: -23.55052
              longitude: -46.633308
              name: Paulista Avenue
              address: Av. Paulista, 1578 - S√£o Paulo, SP
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-contact:
    post:
      tags:
        - Messages
      summary: Send single contact card
      description:
        Sends a single contact card via WhatsApp. Fully compatible with Z-API format using contactName, contactPhone,
        and optional contactBusinessDescription fields.
      operationId: sendContactMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendContactRequest"
            example:
              phone: "5511999999999"
              contactName: John Doe
              contactPhone: "5511888888888"
              contactBusinessDescription: Sales Manager at Example Corp
              firstName: John
              lastName: Doe
              email: john.doe@example.com
              address:
                type: WORK
                street: Av. Paulista, 1578
                city: S√£o Paulo
                region: SP
                country: Brasil
              mentioned:
                - "5511990000000"
              groupMentioned:
                - phone: 120363000000000@g.us
                  subject: Equipe Comercial
              privateAnswer: false
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-contacts:
    post:
      tags:
        - Messages
      summary: Send multiple contact cards
      description:
        Sends multiple contact cards via WhatsApp in a single message. Fully compatible with Z-API format. Maximum
        10 contacts per request.
      operationId: sendContactsMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendContactsRequest"
            example:
              phone: "5511999999999"
              contacts:
                - contactName: John Doe
                  contactPhone: "5511888888888"
                  contactBusinessDescription: Sales Manager
                  jobTitle: Sales Director
                  address:
                    type: WORK
                    street: Av. Paulista, 1578
                    city: S√£o Paulo
                    region: SP
                    country: Brasil
                - contactName: Jane Smith
                  contactPhone: "5511777777777"
                  contactBusinessDescription: CEO
                  email: jane.smith@example.com
                  url: https://example.com/jane
              privateAnswer: false
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  # ==========================================
  # Interactive Message Endpoints
  # ==========================================

  /instances/{instanceId}/token/{instanceToken}/send-button-list:
    post:
      tags:
        - Messages
      summary: Send interactive button list message
      description: |
        Sends an interactive button list message with quick reply buttons.
        The recipient can tap a button to respond.

        **Features:**
        - ‚úÖ Up to 3 quick reply buttons
        - ‚úÖ Header title and message body
        - ‚úÖ Footer text
        - ‚úÖ Optional image or video header
        - ‚úÖ Custom message ID for tracking
        - ‚úÖ Delay message support
        - ‚úÖ FIFO queue with per-recipient ordering
        - ‚úÖ Non-blocking (returns immediately with zaapId)

        **Limits:**
        - Max 3 buttons
        - Title: max 60 characters
        - Message: max 1024 characters
        - Footer: max 60 characters
        - Button title: max 20 characters

        **Use Cases:**
        - Quick response options (Yes/No/Maybe)
        - Survey responses
        - Confirmation dialogs
        - Simple navigation

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendButtonListMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendButtonListRequest"
            examples:
              simpleButtons:
                summary: Simple reply buttons
                description: Basic button list with quick reply options
                value:
                  phone: "5511999999999"
                  title: "Choose an Option"
                  message: "Please select one of the options below"
                  footer: "Tap a button to continue"
                  buttons:
                    - id: "btn_yes"
                      title: "Yes"
                    - id: "btn_no"
                      title: "No"
                    - id: "btn_maybe"
                      title: "Maybe Later"
              serviceOptions:
                summary: Customer service quick actions
                description: Quick reply buttons for customer support
                value:
                  phone: "5511999999999"
                  title: "Customer Support"
                  message: "How can we help you today?"
                  footer: "Select an option"
                  buttons:
                    - id: "support_tech"
                      title: "Technical Help"
                    - id: "support_billing"
                      title: "Billing Question"
                    - id: "support_other"
                      title: "Other"
              withImage:
                summary: Buttons with image header
                description: Button list with product image
                value:
                  phone: "5511999999999"
                  title: "Special Offer!"
                  message: "Get 20% off on this product today!"
                  footer: "Limited time offer"
                  image: "https://picsum.photos/600/400.jpg"
                  buttons:
                    - id: "buy_now"
                      title: "Buy Now"
                    - id: "more_info"
                      title: "More Info"
              withDelay:
                summary: With message delay
                description: Button message with custom delay before sending
                value:
                  phone: "5511999999999"
                  title: "Quick Survey"
                  message: "Please share your feedback"
                  buttons:
                    - id: "rate_good"
                      title: "Good"
                    - id: "rate_bad"
                      title: "Bad"
                  delayMessage: 5
                  delayTyping: 3
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageQueuedResponse"
              example:
                success: true
                message: "Message queued successfully"
                data:
                  zaapId: "39BB1684570F00E91090F6BBC7EE7646"
                  messageId: "39BB1684570F00E91090F6BBC7EE7646"
                  status: "queued"
        "400":
          description: Invalid request (validation error)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingPhone:
                  summary: Missing phone number
                  value:
                    error: "phone is required"
                missingButtons:
                  summary: Missing buttons
                  value:
                    error: "At least one button is required"
                tooManyButtons:
                  summary: Too many buttons
                  value:
                    error: "buttons cannot have more than 3 items"
                missingMessage:
                  summary: Missing message
                  value:
                    error: "message is required"
                titleTooLong:
                  summary: Title too long
                  value:
                    error: "title cannot exceed 60 characters"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"

  /instances/{instanceId}/token/{instanceToken}/send-button-actions:
    post:
      tags:
        - Messages
      summary: Send interactive action buttons message
      description: |
        Sends an interactive message with action buttons (CTA buttons).
        Supports URL, call, copy, and quick reply buttons.

        **Button Types:**
        - `quick_reply` - Simple reply button (max 20 chars label)
        - `cta_url` - Opens a URL in browser
        - `cta_call` - Initiates a phone call
        - `cta_copy` - Copies text to clipboard
        - `payment_info` - Payment information button
        - `review_and_pay` - Review and pay action

        **Features:**
        - ‚úÖ Up to 3 action buttons
        - ‚úÖ Optional header image
        - ‚úÖ Title, message body, and footer
        - ‚úÖ Custom message ID for tracking
        - ‚úÖ Delay message support
        - ‚úÖ FIFO queue with per-recipient ordering

        **Limits:**
        - Max 3 buttons per message
        - Label: max 25 characters (20 for quick_reply)
        - Title: max 60 characters
        - Message: max 1024 characters
        - Footer: max 60 characters

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendButtonActionsMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendButtonActionsRequest"
            examples:
              urlButton:
                summary: Single URL button
                description: Message with a button that opens a website
                value:
                  phone: "5511999999999"
                  title: "Visit Our Website"
                  message: "Check out our latest products and special offers!"
                  footer: "Click the button below"
                  buttons:
                    - id: "btn_url"
                      type: "cta_url"
                      label: "Visit Website"
                      url: "https://httpbin.org/anything/products"
              callButton:
                summary: Call button
                description: Message with a button to initiate a phone call
                value:
                  phone: "5511999999999"
                  title: "Need Help?"
                  message: "Our support team is ready to assist you. Call us now!"
                  footer: "Available 24/7"
                  buttons:
                    - id: "btn_call"
                      type: "cta_call"
                      label: "Call Support"
                      phone: "+5511999999999"
              copyButton:
                summary: Copy code button
                description: Message with a button to copy a discount code
                value:
                  phone: "5511999999999"
                  title: "Special Discount!"
                  message: "Use this exclusive code for 20% off your next purchase."
                  footer: "Valid until end of month"
                  buttons:
                    - id: "btn_copy"
                      type: "cta_copy"
                      label: "Copy Code"
                      copyCode: "SAVE20OFF"
              multipleButtons:
                summary: Multiple action buttons
                description: Message with multiple different action buttons
                value:
                  phone: "5511999999999"
                  title: "Contact Us"
                  message: "Choose how you would like to get in touch with our team."
                  footer: "We're here to help!"
                  image: "https://picsum.photos/600/400.jpg"
                  buttons:
                    - id: "btn_web"
                      type: "cta_url"
                      label: "Visit Website"
                      url: "https://httpbin.org/get"
                    - id: "btn_call"
                      type: "cta_call"
                      label: "Call Us"
                      phone: "+5511999999999"
                    - id: "btn_email"
                      type: "cta_copy"
                      label: "Copy Email"
                      copyCode: "support@httpbin.org"
              quickReplyButtons:
                summary: Quick reply buttons
                description: Simple reply buttons for quick responses
                value:
                  phone: "5511999999999"
                  title: "Quick Question"
                  message: "Would you like to receive our newsletter?"
                  buttons:
                    - type: "quick_reply"
                      id: "newsletter_yes"
                      label: "Yes, subscribe me"
                    - type: "quick_reply"
                      id: "newsletter_no"
                      label: "No, thanks"
                    - type: "quick_reply"
                      id: "newsletter_later"
                      label: "Maybe later"
              withImage:
                summary: With header image
                description: Action buttons with promotional image
                value:
                  phone: "5511999999999"
                  title: "New Collection Available!"
                  message: "Discover our Spring 2024 collection with exclusive designs."
                  footer: "Limited stock available"
                  image: "https://picsum.photos/600/400.jpg"
                  buttons:
                    - id: "btn_shop"
                      type: "cta_url"
                      label: "Shop Now"
                      url: "https://httpbin.org/anything/spring-2024"
                  delayMessage: 3
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageQueuedResponse"
              example:
                success: true
                message: "Message queued successfully"
                data:
                  zaapId: "39BB1684570F00E91090F6BBC7EE7646"
                  messageId: "39BB1684570F00E91090F6BBC7EE7646"
                  status: "queued"
        "400":
          description: Invalid request (validation error)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingButtons:
                  summary: Missing buttons
                  value:
                    error: "buttons is required and must have at least 1 item"
                tooManyButtons:
                  summary: Too many buttons
                  value:
                    error: "buttons cannot have more than 3 items"
                invalidButtonType:
                  summary: Invalid button type
                  value:
                    error: "invalid button type: must be one of quick_reply, cta_url, cta_call, cta_copy, payment_info, review_and_pay"
                missingUrl:
                  summary: Missing URL for cta_url button
                  value:
                    error: "url is required for cta_url button type"
                missingPhone:
                  summary: Missing phone for cta_call button
                  value:
                    error: "phone is required for cta_call button type"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"

  /instances/{instanceId}/token/{instanceToken}/send-option-list:
    post:
      tags:
        - Messages
      summary: Send simple option list message
      description: |
        Sends an interactive message with a simple list of options.
        Similar to button list but without sections (flat list).

        **Features:**
        - ‚úÖ Simple flat list of options
        - ‚úÖ Up to 10 options
        - ‚úÖ Title and description for each option
        - ‚úÖ Button to open options
        - ‚úÖ Custom message ID for tracking
        - ‚úÖ Delay message support
        - ‚úÖ FIFO queue with per-recipient ordering

        **Limits:**
        - Max 10 options
        - Title: max 60 characters
        - Option title: max 24 characters
        - Option description: max 72 characters
        - Button text: max 20 characters

        **Use Cases:**
        - Simple surveys
        - Quick polls
        - Rating selection
        - Single-level menus

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendOptionListMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendOptionListRequest"
            examples:
              restaurantMenu:
                summary: Restaurant menu with sections
                description: Menu organized by food categories
                value:
                  phone: "5511999999999"
                  title: "Our Menu"
                  message: "Choose your meal from our delicious options"
                  footer: "Tap to view options"
                  buttonLabel: "View Menu"
                  sections:
                    - title: "Main Dishes"
                      rows:
                        - id: "dish_pizza"
                          title: "Pizza Margherita"
                          description: "Classic cheese pizza with basil"
                        - id: "dish_burger"
                          title: "Classic Burger"
                          description: "Beef burger with cheese"
                        - id: "dish_pasta"
                          title: "Spaghetti Carbonara"
                          description: "Creamy pasta with bacon"
                    - title: "Drinks"
                      rows:
                        - id: "drink_soda"
                          title: "Soda"
                          description: "Coca-Cola, Sprite, Fanta"
                        - id: "drink_juice"
                          title: "Fresh Juice"
                          description: "Orange, Apple, Mango"
              customerSupport:
                summary: Customer support options
                description: Service selection with sections
                value:
                  phone: "5511999999999"
                  title: "Customer Support"
                  message: "How can we help you today?"
                  buttonLabel: "Select Option"
                  sections:
                    - title: "Technical Support"
                      rows:
                        - id: "tech_install"
                          title: "Installation Help"
                          description: "Get help with installation"
                        - id: "tech_bug"
                          title: "Report a Bug"
                          description: "Report technical issues"
                    - title: "Billing"
                      rows:
                        - id: "bill_invoice"
                          title: "Invoice Questions"
                          description: "Questions about your bill"
                        - id: "bill_payment"
                          title: "Payment Methods"
                          description: "Update payment info"
              appointmentSlots:
                summary: Appointment time slots
                description: Select available appointment time
                value:
                  phone: "5511999999999"
                  title: "Available Appointments"
                  message: "Select your preferred time slot"
                  footer: "All times in local timezone"
                  buttonLabel: "Select Time"
                  sections:
                    - title: "Morning"
                      rows:
                        - id: "slot_9am"
                          title: "9:00 AM"
                          description: "Early morning"
                        - id: "slot_11am"
                          title: "11:00 AM"
                          description: "Late morning"
                    - title: "Afternoon"
                      rows:
                        - id: "slot_2pm"
                          title: "2:00 PM"
                          description: "Early afternoon"
                        - id: "slot_4pm"
                          title: "4:00 PM"
                          description: "Late afternoon"
                  messageId: "appointment-booking-12345"
              withDelay:
                summary: With message delay
                description: Option list with typing delay
                value:
                  phone: "5511999999999"
                  title: "Quick Survey"
                  message: "Please share your feedback"
                  buttonLabel: "Rate Us"
                  sections:
                    - title: "Rating"
                      rows:
                        - id: "rate_good"
                          title: "Excellent"
                          description: "Very satisfied"
                        - id: "rate_ok"
                          title: "Good"
                          description: "Satisfied"
                        - id: "rate_bad"
                          title: "Poor"
                          description: "Not satisfied"
                  delayMessage: 5
                  delayTyping: 3
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageQueuedResponse"
              example:
                success: true
                message: "Message queued successfully"
                data:
                  zaapId: "39BB1684570F00E91090F6BBC7EE7646"
                  messageId: "39BB1684570F00E91090F6BBC7EE7646"
                  status: "queued"
        "400":
          description: Invalid request (validation error)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingSections:
                  summary: Missing sections
                  value:
                    error: "At least one section is required"
                tooManySections:
                  summary: Too many sections
                  value:
                    error: "sections cannot have more than 10 items"
                missingButtonLabel:
                  summary: Missing button label
                  value:
                    error: "buttonLabel is required"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"

  /instances/{instanceId}/token/{instanceToken}/send-button-pix:
    post:
      tags:
        - Messages
      summary: Send PIX payment message (Brazil)
      description: |
        Sends an interactive message with PIX payment information (Brazilian instant payment system).
        Includes QR code generation and copy-paste PIX code button.

        **PIX Key Types:**
        - `CPF` - Brazilian individual taxpayer ID (11 digits)
        - `CNPJ` - Brazilian company taxpayer ID (14 digits)
        - `EMAIL` - Email address
        - `PHONE` - Phone number with country code
        - `EVP` - Random PIX key (UUID format)

        **Features:**
        - ‚úÖ Automatic PIX QR code generation
        - ‚úÖ Copy PIX code button
        - ‚úÖ Payment amount and description
        - ‚úÖ Beneficiary name display
        - ‚úÖ Transaction ID for reconciliation
        - ‚úÖ Additional action buttons
        - ‚úÖ Custom message ID for tracking
        - ‚úÖ FIFO queue with per-recipient ordering

        **Required Fields:**
        - `phone` - Recipient WhatsApp number
        - `payment.keyType` - Type of PIX key
        - `payment.key` - The PIX key value
        - `payment.name` - Beneficiary name
        - `payment.amount` - Payment amount in BRL

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendButtonPixMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendButtonPIXRequest"
            examples:
              cpfKey:
                summary: PIX with CPF key
                description: Payment request using individual taxpayer ID
                value:
                  phone: "5511999999999"
                  title: "Payment Request"
                  message: "Please complete your purchase payment via PIX"
                  footer: "Secure instant payment"
                  pixKey: "12345678900"
                  type: "CPF"
                  name: "John Doe"
                  amount: 99.90
                  transactionId: "ORDER12345"
              cnpjKey:
                summary: PIX with CNPJ key
                description: Payment request using company taxpayer ID
                value:
                  phone: "5511999999999"
                  title: "Invoice Payment"
                  message: "Pay your invoice instantly via PIX"
                  footer: "Company Name Ltd"
                  pixKey: "12345678000199"
                  type: "CNPJ"
                  name: "Company Name Ltd"
                  amount: 1500.00
                  transactionId: "INV2024001"
              emailKey:
                summary: PIX with email key
                description: Donation request using email as PIX key
                value:
                  phone: "5511999999999"
                  title: "Support Our Cause"
                  message: "Your donation helps us continue our work"
                  footer: "Thank you for your support!"
                  pixKey: "donations@charity.org"
                  type: "EMAIL"
                  name: "Charity Organization"
                  amount: 50.00
              phoneKey:
                summary: PIX with phone key
                description: Payment using phone number as PIX key
                value:
                  phone: "5511999999999"
                  title: "Pay Freelancer"
                  message: "Payment for design services"
                  pixKey: "+5511988887777"
                  type: "PHONE"
                  name: "Jane Designer"
                  amount: 750.00
              evpKey:
                summary: PIX with EVP (random) key
                description: Payment using random PIX key (UUID)
                value:
                  phone: "5511999999999"
                  title: "Split Bill Payment"
                  message: "Your share of the dinner bill"
                  pixKey: "123e4567-e89b-12d3-a456-426614174000"
                  type: "EVP"
                  name: "Restaurant Name"
                  amount: 85.50
                  transactionId: "DINNER-TABLE15-001"
              withDelay:
                summary: PIX with message delay
                description: Payment request with typing delay
                value:
                  phone: "5511999999999"
                  title: "Complete Your Order"
                  message: "Pay via PIX to confirm your order"
                  footer: "Questions? Contact us!"
                  pixKey: "98765432100"
                  type: "CPF"
                  name: "Seller Name"
                  amount: 299.99
                  delayMessage: 5
                  delayTyping: 3
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageQueuedResponse"
              example:
                success: true
                message: "Message queued successfully"
                data:
                  zaapId: "39BB1684570F00E91090F6BBC7EE7646"
                  messageId: "39BB1684570F00E91090F6BBC7EE7646"
                  status: "queued"
        "400":
          description: Invalid request (validation error)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingPayment:
                  summary: Missing payment information
                  value:
                    error: "payment is required"
                invalidKeyType:
                  summary: Invalid PIX key type
                  value:
                    error: "payment.keyType must be one of: CPF, CNPJ, EMAIL, PHONE, EVP"
                invalidCpf:
                  summary: Invalid CPF format
                  value:
                    error: "invalid CPF format: must be 11 digits"
                invalidCnpj:
                  summary: Invalid CNPJ format
                  value:
                    error: "invalid CNPJ format: must be 14 digits"
                invalidAmount:
                  summary: Invalid amount
                  value:
                    error: "payment.amount must be greater than 0"
                missingName:
                  summary: Missing beneficiary name
                  value:
                    error: "payment.name is required"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"

  /instances/{instanceId}/token/{instanceToken}/send-button-otp:
    post:
      tags:
        - Messages
      summary: Send OTP (One-Time Password) message
      description: |
        Sends a one-time password (OTP) message with a copy button.
        The recipient can easily copy the code with one tap.

        **Use Cases:**
        - Account verification
        - Two-factor authentication (2FA)
        - Password reset codes
        - Login verification
        - Transaction confirmation

        **Features:**
        - ‚úÖ Prominent OTP code display
        - ‚úÖ One-tap copy button
        - ‚úÖ Custom button text
        - ‚úÖ Expiration message support
        - ‚úÖ Custom message ID for tracking
        - ‚úÖ Delay message support
        - ‚úÖ FIFO queue with per-recipient ordering

        **Security Notes:**
        - OTP codes should have limited validity (typically 5-10 minutes)
        - Messages automatically include security warnings
        - Never log or store OTP codes in plain text

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendButtonOtpMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendButtonOTPRequest"
            examples:
              verification:
                summary: Account verification code
                description: Standard verification code message
                value:
                  phone: "5511999999999"
                  title: "Verification Code"
                  message: "Your verification code is below. This code expires in 5 minutes. Do not share it with anyone."
                  code: "123456"
                  footer: "Code expires in 5 minutes"
              login2fa:
                summary: Two-factor authentication
                description: 2FA login code
                value:
                  phone: "5511999999999"
                  title: "Login Verification"
                  message: "Your login verification code for MyApp. If you didn't request this, please ignore this message."
                  code: "789012"
              passwordReset:
                summary: Password reset code
                description: Code for password reset flow
                value:
                  phone: "5511999999999"
                  title: "Password Reset"
                  message: "Use this code to reset your password. This code is valid for 10 minutes only."
                  code: "RESET-ABC123"
                  footer: "Valid for 10 minutes"
              transactionConfirm:
                summary: Transaction confirmation
                description: Code to confirm a financial transaction
                value:
                  phone: "5511999999999"
                  title: "Transaction Confirmation"
                  message: "Confirm your transaction of $500.00 to Account ****1234. Enter this code in the app to proceed."
                  code: "TXN-998877"
              numericOnly:
                summary: Simple numeric OTP
                description: Short numeric code
                value:
                  phone: "5511999999999"
                  message: "Your code:"
                  code: "0000"
              withDelay:
                summary: OTP with delay
                description: Delayed OTP message
                value:
                  phone: "5511999999999"
                  title: "Security Code"
                  message: "Security code for your account access. Valid for 5 minutes."
                  code: "SEC-456789"
                  footer: "Valid for 5 minutes"
                  delayMessage: 2
              withCustomId:
                summary: OTP with tracking ID
                description: OTP message with custom message ID for tracking
                value:
                  phone: "5511999999999"
                  title: "Authentication"
                  message: "Your authentication code for session verification."
                  code: "AUTH-112233"
                  messageId: "auth-session-abc123-otp"
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageQueuedResponse"
              example:
                success: true
                message: "Message queued successfully"
                data:
                  zaapId: "39BB1684570F00E91090F6BBC7EE7646"
                  messageId: "39BB1684570F00E91090F6BBC7EE7646"
                  status: "queued"
        "400":
          description: Invalid request (validation error)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingCode:
                  summary: Missing OTP code
                  value:
                    error: "code is required"
                emptyCode:
                  summary: Empty OTP code
                  value:
                    error: "code cannot be empty"
                missingPhone:
                  summary: Missing phone number
                  value:
                    error: "phone is required"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"

  /instances/{instanceId}/token/{instanceToken}/send-carousel:
    post:
      tags:
        - Messages
      summary: Send carousel message
      description: |
        Sends an interactive carousel message with multiple cards.
        Each card can have an image/video header, body text, and action buttons.

        **Features:**
        - ‚úÖ 1-10 cards per carousel
        - ‚úÖ Image or video header per card
        - ‚úÖ Body text per card
        - ‚úÖ Up to 2 action buttons per card
        - ‚úÖ Horizontal swipe navigation
        - ‚úÖ Introduction message before carousel
        - ‚úÖ Custom message ID for tracking
        - ‚úÖ Delay message support
        - ‚úÖ FIFO queue with per-recipient ordering

        **Limits:**
        - Min 1 card, max 10 cards
        - Max 2 buttons per card
        - Body text: max 1024 characters per card
        - Header media: image or video URL

        **Use Cases:**
        - Product catalogs
        - Image galleries
        - Service showcases
        - Portfolio presentations
        - Tutorial sequences

        **Media Formats:**
        - Images: JPEG, PNG, WebP
        - Videos: MP4 (recommended), 3GP

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendCarouselMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendCarouselRequest"
            examples:
              productCatalog:
                summary: Product catalog
                description: E-commerce product showcase
                value:
                  phone: "5511999999999"
                  cardType: "HSCROLL_CARDS"
                  cards:
                    - mediaUrl: "https://picsum.photos/id/1/600/400.jpg"
                      body: "Premium Widget Pro\n\nOur flagship product with advanced features.\n\n$199.99"
                      buttons:
                        - id: "btn_view_pro"
                          type: "cta_url"
                          label: "View Details"
                          url: "https://httpbin.org/anything/products/widget-pro"
                        - id: "add_widget_pro"
                          type: "quick_reply"
                          label: "Add to Cart"
                    - mediaUrl: "https://picsum.photos/id/2/600/400.jpg"
                      body: "Standard Widget\n\nPerfect for everyday use.\n\n$99.99"
                      buttons:
                        - id: "btn_view_basic"
                          type: "cta_url"
                          label: "View Details"
                          url: "https://httpbin.org/anything/products/widget-basic"
                        - id: "add_widget_basic"
                          type: "quick_reply"
                          label: "Add to Cart"
                    - mediaUrl: "https://picsum.photos/id/3/600/400.jpg"
                      body: "Mini Widget\n\nCompact and portable design.\n\n$49.99"
                      buttons:
                        - id: "btn_view_mini"
                          type: "cta_url"
                          label: "View Details"
                          url: "https://httpbin.org/anything/products/widget-mini"
                        - id: "add_widget_mini"
                          type: "quick_reply"
                          label: "Add to Cart"
              imageGallery:
                summary: Image gallery
                description: Photo gallery showcase
                value:
                  phone: "5511999999999"
                  cardType: "ALBUM_IMAGE"
                  cards:
                    - mediaUrl: "https://picsum.photos/id/10/600/400.jpg"
                      body: "Golden Sunset\n\nCaptured at Pacific Beach, California"
                      buttons:
                        - id: "btn_sunset"
                          type: "quick_reply"
                          label: "Like"
                    - mediaUrl: "https://picsum.photos/id/11/600/400.jpg"
                      body: "Mountain Majesty\n\nSwiss Alps in winter"
                      buttons:
                        - id: "btn_mountains"
                          type: "quick_reply"
                          label: "Like"
                    - mediaUrl: "https://picsum.photos/id/12/600/400.jpg"
                      body: "Ocean Waves\n\nMaldives crystal clear waters"
                      buttons:
                        - id: "btn_ocean"
                          type: "quick_reply"
                          label: "Like"
                    - mediaUrl: "https://picsum.photos/id/13/600/400.jpg"
                      body: "Forest Path\n\nRedwood National Park"
                      buttons:
                        - id: "btn_forest"
                          type: "quick_reply"
                          label: "Like"
                    - mediaUrl: "https://picsum.photos/id/14/600/400.jpg"
                      body: "City Lights\n\nNew York City skyline at night"
                      buttons:
                        - id: "btn_city"
                          type: "quick_reply"
                          label: "Like"
              videoTutorials:
                summary: Video tutorials
                description: Tutorial series with videos
                value:
                  phone: "5511999999999"
                  cardType: "HSCROLL_CARDS"
                  cards:
                    - mediaUrl: "https://download.blender.org/durian/trailer/sintel_trailer-480p.mp4"
                      body: "Getting Started Guide\n\nLearn the basics in 5 minutes"
                      buttons:
                        - id: "btn_tutorial_1"
                          type: "cta_url"
                          label: "Watch Full Video"
                          url: "https://youtube.com/watch?v=eRsGyueVLvQ"
                    - mediaUrl: "https://download.blender.org/peach/trailer/trailer_480p.mov"
                      body: "Advanced Features\n\nUnlock the full potential"
                      buttons:
                        - id: "btn_tutorial_2"
                          type: "cta_url"
                          label: "Watch Full Video"
                          url: "https://youtube.com/watch?v=YE7VzlLtp-4"
                    - mediaUrl: "https://download.blender.org/demo/movies/ToS/ToS-4k-1920.mov"
                      body: "Pro Tips & Tricks\n\nBoost your productivity"
                      buttons:
                        - id: "btn_tutorial_3"
                          type: "cta_url"
                          label: "Watch Full Video"
                          url: "https://youtube.com/watch?v=aqz-KE-bpKQ"
              realEstate:
                summary: Real estate listings
                description: Property listings carousel
                value:
                  phone: "5511999999999"
                  cardType: "HSCROLL_CARDS"
                  cards:
                    - mediaUrl: "https://picsum.photos/id/49/600/400.jpg"
                      body: "Modern Family Home\n\n4 bed | 3 bath | 2,500 sqft\nPacific Heights, SF\n\n$1,250,000"
                      buttons:
                        - id: "btn_view_house1"
                          type: "cta_url"
                          label: "View Listing"
                          url: "https://httpbin.org/anything/property/house1"
                        - id: "btn_call_house1"
                          type: "cta_call"
                          label: "Call Agent"
                          phone: "+14155551234"
                    - mediaUrl: "https://picsum.photos/id/164/600/400.jpg"
                      body: "Luxury Condo\n\n2 bed | 2 bath | 1,200 sqft\nSoMa District\n\n$850,000"
                      buttons:
                        - id: "btn_view_condo1"
                          type: "cta_url"
                          label: "View Listing"
                          url: "https://httpbin.org/anything/property/condo1"
                        - id: "btn_call_condo1"
                          type: "cta_call"
                          label: "Call Agent"
                          phone: "+14155551234"
                    - mediaUrl: "https://picsum.photos/id/188/600/400.jpg"
                      body: "Charming Townhouse\n\n3 bed | 2.5 bath | 1,800 sqft\nMission District\n\n$975,000"
                      buttons:
                        - id: "btn_view_townhouse1"
                          type: "cta_url"
                          label: "View Listing"
                          url: "https://httpbin.org/anything/property/townhouse1"
                        - id: "btn_call_townhouse1"
                          type: "cta_call"
                          label: "Call Agent"
                          phone: "+14155551234"
              restaurantMenu:
                summary: Restaurant menu
                description: Visual menu with images
                value:
                  phone: "5511999999999"
                  cardType: "HSCROLL_CARDS"
                  messageId: "menu-daily-specials"
                  cards:
                    - mediaUrl: "https://picsum.photos/id/292/600/400.jpg"
                      body: "Prime Ribeye Steak\n\n12oz USDA Prime, grilled to perfection\nServed with seasonal vegetables\n\n$45.00"
                      buttons:
                        - id: "order_steak"
                          type: "quick_reply"
                          label: "Order Now"
                    - mediaUrl: "https://picsum.photos/id/493/600/400.jpg"
                      body: "Atlantic Salmon\n\nFresh salmon with lemon butter sauce\nAsparagus and rice pilaf\n\n$32.00"
                      buttons:
                        - id: "order_salmon"
                          type: "quick_reply"
                          label: "Order Now"
                    - mediaUrl: "https://picsum.photos/id/312/600/400.jpg"
                      body: "Truffle Pasta\n\nFresh fettuccine with black truffle\nParmesan and cream sauce\n\n$28.00"
                      buttons:
                        - id: "order_pasta"
                          type: "quick_reply"
                          label: "Order Now"
              singleCard:
                summary: Single card carousel
                description: Carousel with just one card
                value:
                  phone: "5511999999999"
                  cardType: "HSCROLL_CARDS"
                  cards:
                    - mediaUrl: "https://picsum.photos/id/96/600/400.jpg"
                      body: "Limited Edition Product\n\nOnly 50 units available worldwide.\nGet yours before they're gone!"
                      buttons:
                        - id: "btn_shop_featured"
                          type: "cta_url"
                          label: "Shop Now"
                          url: "https://httpbin.org/anything/featured"
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageQueuedResponse"
              example:
                success: true
                message: "Message queued successfully"
                data:
                  zaapId: "39BB1684570F00E91090F6BBC7EE7646"
                  messageId: "39BB1684570F00E91090F6BBC7EE7646"
                  status: "queued"
        "400":
          description: Invalid request (validation error)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingCards:
                  summary: Missing cards
                  value:
                    error: "cards is required and must have at least 1 item"
                tooManyCards:
                  summary: Too many cards
                  value:
                    error: "cards cannot have more than 10 items"
                missingHeader:
                  summary: Missing card header
                  value:
                    error: "each card must have a header with type and url"
                invalidHeaderType:
                  summary: Invalid header type
                  value:
                    error: "header.type must be 'image' or 'video'"
                tooManyButtons:
                  summary: Too many buttons per card
                  value:
                    error: "each card can have maximum 2 buttons"
                bodyTooLong:
                  summary: Body text too long
                  value:
                    error: "card body cannot exceed 1024 characters"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"

  /instances/{instanceId}/token/{instanceToken}/send-poll:
    post:
      tags:
        - Messages
      summary: Send poll message (Z-API compatible)
      description: |
        Sends a poll (voting/survey) message to a WhatsApp user or group.

        **Features:**
        - ‚úÖ 2-12 poll options
        - ‚úÖ Single or multiple choice voting
        - ‚úÖ Custom message ID for tracking
        - ‚úÖ Delay message support
        - ‚úÖ FIFO queue with per-recipient ordering

        **Z-API Format:**
        - `message` field contains the poll question
        - `poll` array contains options with `name` field
        - `pollMaxOptions` controls voting: 0 or 1 = single choice, >1 = multiple choice

        **Limits:**
        - Min 2 options, max 12 options
        - Option text: max 100 characters each
        - Question text: max 256 characters

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendPollMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendPollRequest"
            examples:
              singleChoice:
                summary: Single choice poll
                description: Poll where user can select only one option
                value:
                  phone: "5511999999999"
                  message: "Qual o melhor sabor de pizza?"
                  poll:
                    - name: "Calabresa"
                    - name: "Marguerita"
                    - name: "Portuguesa"
                    - name: "Frango"
                  pollMaxOptions: 1
              multipleChoice:
                summary: Multiple choice poll
                description: Poll where user can select multiple options
                value:
                  phone: "5511999999999"
                  message: "Quais redes sociais voce usa?"
                  poll:
                    - name: "WhatsApp"
                    - name: "Instagram"
                    - name: "Twitter"
                    - name: "TikTok"
                    - name: "Facebook"
                  pollMaxOptions: 3
              groupPoll:
                summary: Poll to group
                description: Send poll to a WhatsApp group
                value:
                  phone: "120363356737170752@g.us"
                  message: "Qual dia fica melhor para a reuniao?"
                  poll:
                    - name: "Segunda-feira"
                    - name: "Terca-feira"
                    - name: "Quarta-feira"
                    - name: "Quinta-feira"
                    - name: "Sexta-feira"
                  pollMaxOptions: 1
              replyPoll:
                summary: Poll as reply
                description: Poll sent as reply to another message
                value:
                  phone: "5511999999999"
                  message: "Respondendo sua pergunta, qual voce prefere?"
                  poll:
                    - name: "Opcao A"
                    - name: "Opcao B"
                    - name: "Opcao C"
                  pollMaxOptions: 1
                  messageId: "3EB047ED70306656281B34"
              completeExample:
                summary: Complete poll with all fields
                description: Poll with all available options configured
                value:
                  phone: "5511999999999"
                  message: "Como voce avalia nosso atendimento?"
                  poll:
                    - name: "Excelente"
                    - name: "Bom"
                    - name: "Regular"
                    - name: "Ruim"
                  pollMaxOptions: 1
                  messageId: "3EB047ED70306656281B34"
                  delayMessage: 3
                  delayTyping: 2
      responses:
        "200":
          description: Poll message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageQueuedResponse"
              example:
                success: true
                message: "Message queued successfully"
                data:
                  zaapId: "39BB1684570F00E91090F6BBC7EE7646"
                  messageId: "39BB1684570F00E91090F6BBC7EE7646"
                  status: "queued"
        "400":
          description: Invalid request (validation error)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingQuestion:
                  summary: Missing poll question
                  value:
                    error: "message (poll question) is required"
                missingOptions:
                  summary: Missing poll options
                  value:
                    error: "poll options are required"
                tooFewOptions:
                  summary: Too few options
                  value:
                    error: "poll must have at least 2 options"
                tooManyOptions:
                  summary: Too many options
                  value:
                    error: "poll cannot have more than 12 options"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"

  /instances/{instanceId}/token/{instanceToken}/send-event:
    post:
      tags:
        - Messages
      summary: Send event message (Z-API compatible)
      description: |
        Sends a scheduled event message to a WhatsApp group.

        **Features:**
        - ‚úÖ Event name and description
        - ‚úÖ Date and time scheduling (ISO 8601)
        - ‚úÖ Location support (name and coordinates)
        - ‚úÖ Call link type (voice/video)
        - ‚úÖ Event cancellation support
        - ‚úÖ Custom message ID for tracking
        - ‚úÖ FIFO queue with per-recipient ordering

        **Z-API Format:**
        - Nested `event` object with all event details
        - `dateTime` in ISO 8601 format (e.g., "2024-04-29T09:30:53.309Z")
        - `location` object with name and optional coordinates
        - `callLinkType` can be "voice" or "video"

        **Restrictions:**
        - Events can only be sent to groups
        - Sender must be group admin for some event features

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendEventMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendEventRequest"
            examples:
              basicEvent:
                summary: Basic event
                description: Simple event with name, description and date
                value:
                  phone: "120363356737170752@g.us"
                  event:
                    name: "Reuniao de Equipe"
                    description: "Reuniao semanal para alinhamento de projetos"
                    dateTime: "2024-04-29T14:00:00.000Z"
              eventWithLocationName:
                summary: Event with location name only
                description: Event with location name but no coordinates
                value:
                  phone: "120363356737170752@g.us"
                  event:
                    name: "Encontro Presencial"
                    description: "Encontro do grupo no escritorio"
                    dateTime: "2024-05-10T09:00:00.000Z"
                    location:
                      name: "Escritorio Central - Av. Paulista, 1000, Sao Paulo"
              eventWithLocationCoordinates:
                summary: Event with location and coordinates
                description: Event with physical location and GPS coordinates
                value:
                  phone: "120363356737170752@g.us"
                  event:
                    name: "Happy Hour da Empresa"
                    description: "Confraternizacao mensal"
                    dateTime: "2024-05-15T18:30:00.000Z"
                    location:
                      name: "Bar do Ze - Rua das Flores, 123"
                      degreesLatitude: -23.5505
                      degreesLongitude: -46.6333
              eventWithVideoCall:
                summary: Event with video call
                description: Online event with video call link
                value:
                  phone: "120363356737170752@g.us"
                  event:
                    name: "Workshop de Vendas"
                    description: "Treinamento online de tecnicas de vendas"
                    dateTime: "2024-05-20T10:00:00.000Z"
                    callLinkType: "video"
              eventWithVoiceCall:
                summary: Event with voice call
                description: Online event with voice call link
                value:
                  phone: "120363356737170752@g.us"
                  event:
                    name: "Call de Alinhamento"
                    description: "Chamada rapida para alinhar pendencias"
                    dateTime: "2024-05-22T15:00:00.000Z"
                    callLinkType: "voice"
              canceledEvent:
                summary: Canceled event
                description: Event marked as canceled
                value:
                  phone: "120363356737170752@g.us"
                  event:
                    name: "Evento Cancelado"
                    description: "Este evento foi cancelado"
                    dateTime: "2024-04-30T09:00:00.000Z"
                    canceled: true
              eventWithDelay:
                summary: Event with delay
                description: Event sent with delay for typing simulation
                value:
                  phone: "120363356737170752@g.us"
                  event:
                    name: "Reuniao Importante"
                    description: "Discussao sobre novos projetos"
                    dateTime: "2024-06-01T10:00:00.000Z"
                  delayMessage: 3
                  delayTyping: 2
              eventReply:
                summary: Event as reply
                description: Event sent as reply to another message
                value:
                  phone: "120363356737170752@g.us"
                  event:
                    name: "Agenda Confirmada"
                    description: "Conforme solicitado, agendamos o evento"
                    dateTime: "2024-06-05T14:00:00.000Z"
                  messageId: "3EB047ED70306656281B34"
              completeEventExample:
                summary: Complete event with all fields
                description: Event with all available options configured
                value:
                  phone: "120363356737170752@g.us"
                  event:
                    name: "Evento Completo"
                    description: "Evento de exemplo com todas as opcoes"
                    dateTime: "2024-07-01T16:00:00.000Z"
                    location:
                      name: "Centro de Convencoes - Rua Principal, 500"
                      degreesLatitude: -23.5489
                      degreesLongitude: -46.6388
                    callLinkType: "video"
                  messageId: "3EB047ED70306656281B34"
                  delayMessage: 5
                  delayTyping: 3
      responses:
        "200":
          description: Event message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageQueuedResponse"
              example:
                success: true
                message: "Message queued successfully"
                data:
                  zaapId: "39BB1684570F00E91090F6BBC7EE7646"
                  messageId: "39BB1684570F00E91090F6BBC7EE7646"
                  status: "queued"
        "400":
          description: Invalid request (validation error)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingEvent:
                  summary: Missing event object
                  value:
                    error: "event object is required"
                missingName:
                  summary: Missing event name
                  value:
                    error: "event name is required"
                missingDateTime:
                  summary: Missing event date/time
                  value:
                    error: "event dateTime is required"
                invalidDateTime:
                  summary: Invalid date/time format
                  value:
                    error: "invalid dateTime format, expected ISO 8601"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"

  /instances/{instanceId}/token/{instanceToken}/send-link:
    post:
      tags:
        - Messages
      summary: Send link with preview (Z-API compatible)
      description: |
        Sends a text message with a customized link preview.

        **Features:**
        - ‚úÖ Custom link preview title
        - ‚úÖ Custom link preview description
        - ‚úÖ Custom preview image
        - ‚úÖ Message text before the link
        - ‚úÖ Automatic URL validation
        - ‚úÖ Custom message ID for tracking
        - ‚úÖ Delay message support
        - ‚úÖ FIFO queue with per-recipient ordering

        **Z-API Format:**
        - `linkUrl` is the URL to preview (required)
        - `title` overrides the default link title
        - `linkDescription` overrides the default description
        - `image` provides a custom preview thumbnail
        - `message` adds text before the link preview

        **Preview Image:**
        - Must be a valid image URL (JPEG, PNG, WebP)
        - Will be downloaded and used as thumbnail
        - Falls back to default Open Graph image if download fails

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendLinkMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendLinkRequest"
            examples:
              basicLink:
                summary: Basic link with custom preview
                description: Link with custom title and description
                value:
                  phone: "5511999999999"
                  message: "Confira nosso novo produto!"
                  linkUrl: "https://www.example.com/produto"
                  title: "Produto Incrivel"
                  linkDescription: "O melhor produto do mercado com desconto especial"
              linkWithImage:
                summary: Link with custom image
                description: Link with custom preview image using real image URL
                value:
                  phone: "5511999999999"
                  message: "Veja esta oferta especial"
                  linkUrl: "https://www.example.com/oferta"
                  title: "Super Oferta"
                  linkDescription: "50% de desconto em todos os produtos"
                  image: "https://picsum.photos/600/400.jpg"
              linkWithDelay:
                summary: Link with delay
                description: Link with delay message and typing indicator
                value:
                  phone: "5511999999999"
                  message: "Acesse nosso site"
                  linkUrl: "https://www.example.com"
                  title: "Nosso Site Oficial"
                  linkDescription: "Visite-nos e conheca nossos servicos"
                  delayMessage: 3
                  delayTyping: 2
              minimalLink:
                summary: Minimal link
                description: Just the URL with auto-fetched metadata
                value:
                  phone: "5511999999999"
                  linkUrl: "https://github.com"
              linkToGroup:
                summary: Link to group
                description: Send link with preview to a WhatsApp group
                value:
                  phone: "120363356737170752@g.us"
                  message: "Material para estudo do grupo"
                  linkUrl: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf"
                  title: "Documento PDF"
                  linkDescription: "Baixe o documento em PDF para o proximo encontro"
                  image: "https://picsum.photos/600/400.jpg"
              linkAsReply:
                summary: Link as reply
                description: Send link as reply to another message
                value:
                  phone: "5511999999999"
                  message: "Aqui esta o video que voce pediu"
                  linkUrl: "https://download.blender.org/durian/trailer/sintel_trailer-480p.mp4"
                  title: "Sintel Trailer"
                  linkDescription: "Trailer do filme Sintel em 480p"
                  image: "https://picsum.photos/600/400.jpg"
                  messageId: "3EB047ED70306656281B34"
              completeLinkExample:
                summary: Complete link with all fields
                description: Link with all available options configured
                value:
                  phone: "5511999999999"
                  message: "Confira este conteudo incrivel que separei para voce!"
                  linkUrl: "https://www.example.com/conteudo-especial"
                  title: "Conteudo Especial"
                  linkDescription: "Acesse agora e aproveite esta oportunidade unica"
                  image: "https://picsum.photos/600/400.jpg"
                  messageId: "3EB047ED70306656281B34"
                  delayMessage: 5
                  delayTyping: 3
      responses:
        "200":
          description: Link message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageQueuedResponse"
              example:
                success: true
                message: "Message queued successfully"
                data:
                  zaapId: "39BB1684570F00E91090F6BBC7EE7646"
                  messageId: "39BB1684570F00E91090F6BBC7EE7646"
                  status: "queued"
        "400":
          description: Invalid request (validation error)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingUrl:
                  summary: Missing link URL
                  value:
                    error: "linkUrl is required"
                invalidUrl:
                  summary: Invalid URL format
                  value:
                    error: "linkUrl must be a valid URL"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"

  /instances/{instanceId}/token/{instanceToken}/messages:
    delete:
      tags:
        - Messages
      summary: Delete message (Z-API compatible)
      description: |
        Deletes (revokes) a previously sent message from a chat.

        **Features:**
        - ‚úÖ Delete own messages (sender = you)
        - ‚úÖ Delete others' messages (group admin only)
        - ‚úÖ Works in private chats and groups
        - ‚úÖ Z-API compatible query parameters

        **Z-API Format:**
        Uses query parameters instead of request body:
        - `phone` - The chat phone number (recipient)
        - `messageId` - The WhatsApp message ID to delete
        - `owner` - "true" for own messages, "false" for others (admin delete)

        **Behavior:**
        - For `owner=true`: Message is deleted for everyone ("Delete for Everyone")
        - For `owner=false`: Admin delete in groups (removes message sent by others)
        - Deleted messages show "This message was deleted" placeholder

        **Restrictions:**
        - Own messages: Can be deleted within ~1 hour of sending
        - Admin delete: Requires group admin privileges
        - Once deleted, the message cannot be recovered

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: deleteMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: phone
          required: true
          schema:
            type: string
          description: Phone number of the chat (recipient)
          example: "5511999999999"
        - in: query
          name: messageId
          required: true
          schema:
            type: string
          description: WhatsApp message ID to delete
          example: "3EB047ED70306656281B34"
        - in: query
          name: owner
          required: true
          schema:
            type: string
            enum:
              - "true"
              - "false"
          description: |
            Whether the message was sent by you:
            - "true" = your own message (Delete for Everyone)
            - "false" = someone else's message (admin delete in groups)
          example: "true"
      responses:
        "200":
          description: Message deleted successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeleteMessageResponse"
              examples:
                ownMessage:
                  summary: Own message deleted
                  value:
                    success: true
                    phone: "5511999999999"
                    messageId: "3EB047ED70306656281B34"
                    message: "message deleted successfully"
                adminDelete:
                  summary: Admin deleted message
                  value:
                    success: true
                    phone: "120363356737170752@g.us"
                    messageId: "3EB047ED70306656281B34"
                    message: "message deleted successfully"
        "400":
          description: Invalid request (missing parameters)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingPhone:
                  summary: Missing phone
                  value:
                    error: "phone is required"
                missingMessageId:
                  summary: Missing message ID
                  value:
                    error: "messageId is required"
                missingOwner:
                  summary: Missing owner flag
                  value:
                    error: "owner is required"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "500":
          description: Failed to delete message
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "failed to delete message: timeout"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"

  /instances/{instanceId}/token/{instanceToken}/modify-chat:
    post:
      tags:
        - Messages
      summary: Modify chat (Z-API compatible)
      description: |
        Performs various chat modification actions like read, archive, pin, mute, clear, or delete.

        **Supported Actions:**
        - `read` - Mark chat as read
        - `archive` - Archive the chat
        - `unarchive` - Unarchive the chat
        - `pin` - Pin the chat to top
        - `unpin` - Unpin the chat
        - `mute` - Mute chat notifications
        - `unmute` - Unmute chat notifications
        - `clear` - Clear all messages in chat
        - `delete` - Delete the entire chat

        **Z-API Format:**
        Request body with `phone` and `action` fields.

        **Behavior:**
        - `read`: Marks all messages in chat as read (blue checkmarks)
        - `archive/unarchive`: Moves chat to/from archive
        - `pin/unpin`: Pins/unpins chat to top of chat list
        - `mute/unmute`: Enables/disables notifications
        - `clear`: Removes all messages but keeps chat
        - `delete`: Completely removes the chat

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: modifyChat
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ModifyChatRequest"
            examples:
              markRead:
                summary: Mark chat as read
                description: Mark all messages in chat as read
                value:
                  phone: "5511999999999"
                  action: "read"
              archiveChat:
                summary: Archive chat
                description: Move chat to archive
                value:
                  phone: "5511999999999"
                  action: "archive"
              unarchiveChat:
                summary: Unarchive chat
                description: Remove chat from archive
                value:
                  phone: "5511999999999"
                  action: "unarchive"
              pinChat:
                summary: Pin chat
                description: Pin chat to top of list
                value:
                  phone: "5511999999999"
                  action: "pin"
              unpinChat:
                summary: Unpin chat
                description: Unpin chat from top
                value:
                  phone: "5511999999999"
                  action: "unpin"
              muteChat:
                summary: Mute notifications
                description: Disable notifications for chat
                value:
                  phone: "5511999999999"
                  action: "mute"
              unmuteChat:
                summary: Unmute notifications
                description: Enable notifications for chat
                value:
                  phone: "5511999999999"
                  action: "unmute"
              clearChat:
                summary: Clear chat
                description: Remove all messages from chat
                value:
                  phone: "5511999999999"
                  action: "clear"
              deleteChat:
                summary: Delete chat
                description: Completely remove the chat
                value:
                  phone: "5511999999999"
                  action: "delete"
      responses:
        "200":
          description: Chat modified successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ModifyChatResponse"
              examples:
                readSuccess:
                  summary: Marked as read
                  value:
                    success: true
                    phone: "5511999999999"
                    action: "read"
                    message: "chat marked as read successfully"
                archiveSuccess:
                  summary: Archived
                  value:
                    success: true
                    phone: "5511999999999"
                    action: "archive"
                    message: "chat archived successfully"
                pinSuccess:
                  summary: Pinned
                  value:
                    success: true
                    phone: "5511999999999"
                    action: "pin"
                    message: "chat pinned successfully"
                muteSuccess:
                  summary: Muted
                  value:
                    success: true
                    phone: "5511999999999"
                    action: "mute"
                    message: "chat muted successfully"
        "400":
          description: Invalid request (validation error)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingPhone:
                  summary: Missing phone
                  value:
                    error: "phone is required"
                missingAction:
                  summary: Missing action
                  value:
                    error: "action is required"
                invalidAction:
                  summary: Invalid action
                  value:
                    error: "invalid action: must be one of read, archive, unarchive, pin, unpin, mute, unmute, clear, delete"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "500":
          description: Failed to modify chat
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "failed to modify chat: operation not supported"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"

  /instances/{instanceId}/token/{instanceToken}/contacts:
    get:
      tags:
        - Contacts
      summary: List WhatsApp contacts
      description: |
        Returns a paginated list of WhatsApp contacts from the instance's device.

        **Features:**
        - ‚úÖ Pagination support (page, pageSize)
        - ‚úÖ Device contacts integration (name, short name)
        - ‚úÖ WhatsApp profile data (notify/push name)
        - ‚úÖ VCard information (if shared)
        - ‚úÖ Privacy-aware (respects WhatsApp privacy settings)
        - ‚úÖ X-Total-Count header for total count

        **Data Sources:**
        - Device address book (name, short, vname fields)
        - WhatsApp profile (notify field from push name)
        - VCard sharing (vname field)

        **Field Availability:**
        - `phone`: Always present (WhatsApp JID)
        - `name`, `short`, `vname`: Only if in address book
        - `notify`: Only if user has interacted with contact

        **Privacy Notes:** Contact data respects WhatsApp privacy settings.
        Users who hide their profile will only show notify field.

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: getContacts
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: page
          required: true
          schema:
            type: integer
            minimum: 1
          description: Page number (1-indexed)
          example: 1
        - in: query
          name: pageSize
          required: true
          schema:
            type: integer
            minimum: 1
            maximum: 100
          description: Number of contacts per page (max 100)
          example: 20
      responses:
        "200":
          description: Contacts retrieved successfully
          headers:
            X-Total-Count:
              description: Total number of contacts available
              schema:
                type: integer
              example: 150
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Contact"
              example:
                - phone: "5511999999999"
                  name: "Jo√£o Silva Santos"
                  short: "Jo√£o"
                  notify: "Jo√£o S."
                  vname: null
                - phone: "5511888888888"
                  name: "Maria Oliveira"
                  short: "Maria"
                  notify: "Maria O."
                  vname: null
                - phone: "5511777777777"
                  name: null
                  short: null
                  notify: "Carlos"
                  vname: null
        "400":
          description: Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "page must be >= 1"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"
  /instances/{instanceId}/token/{instanceToken}/phone-exists/{phone}:
    get:
      tags:
        - Contacts
      summary: Check if phone number has WhatsApp
      description: |
        Verifies if a phone number is registered on WhatsApp.

        **Use Cases:**
        - Form validation (verify phone before saving)
        - Contact verification before sending messages
        - Lead qualification in CRM systems

        **Important Notes:**
        - Use this API for form validation purposes
        - Do NOT use before sending messages (Z-API validates automatically)
        - Using for message validation creates duplicate checks
        - Not designed for spam - use responsibly

        **Phone Format:**
        - International format: DDI + DDD + NUMBER
        - Numbers only (no formatting, spaces, or masks)
        - Example: `551199999999` (Brazil mobile)

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: phoneExists
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: phone
          in: path
          required: true
          schema:
            type: string
            pattern: "^\\d+$"
          description: |
            Phone number in international format (DDI DDD NUMBER).
            Numbers only - no formatting, spaces, or masks.
          example: "551199999999"
      responses:
        "200":
          description: Phone validation result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PhoneExistsResponse"
              examples:
                exists_with_lid:
                  summary: Phone exists with LID
                  description: Phone number is registered on WhatsApp and LID is available
                  value:
                    exists: true
                    phone: "5521979232690"
                    lid: "140712372899859@lid"
                exists_without_lid:
                  summary: Phone exists without LID
                  description: Phone number is registered but LID is not available
                  value:
                    exists: true
                    phone: "5521979232690"
                    lid: null
                not_exists:
                  summary: Phone does not exist
                  description: Phone number is not registered on WhatsApp
                  value:
                    exists: false
                    phone: null
                    lid: null
        "400":
          description: Invalid phone number format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Phone number must contain only digits"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Failed to check phone number"
        "503":
          description: Contacts service not available
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Contacts service not available"
  /instances/{instanceId}/token/{instanceToken}/phone-exists-batch:
    post:
      tags:
        - Contacts
      summary: Batch validate phone numbers on WhatsApp
      description: |
        Validates multiple phone numbers to check if they are registered on WhatsApp.

        **Use Cases:**
        - Bulk contact validation before marketing campaigns
        - CRM data cleansing and enrichment
        - Lead qualification at scale
        - Form validation with multiple numbers

        **Important Notes:**
        - Maximum batch size: 50,000 numbers per request
        - Use for validation purposes, not before sending messages
        - Not designed for spam - use responsibly

        **Phone Format:**
        - International format: DDI + DDD + NUMBER
        - Numbers only (no formatting, spaces, or masks)
        - Example: `551199999999` (Brazil mobile)

        **Response Fields:**
        - `exists`: Whether the phone has WhatsApp
        - `inputPhone`: The number as you sent it
        - `outputPhone`: The number formatted by WhatsApp (may include 9th digit)

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: phoneExistsBatch
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PhoneExistsBatchRequest"
            example:
              phones:
                - "554499999999"
                - "554488888888"
      responses:
        "200":
          description: Batch validation results
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/PhoneExistsBatchResponse"
              example:
                - exists: true
                  inputPhone: "554499999999"
                  outputPhone: "554499999999"
                - exists: false
                  inputPhone: "554488888888"
                  outputPhone: "554488888888"
        "400":
          description: Invalid request (empty array, invalid format, or batch size exceeded)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                empty_array:
                  value:
                    error: "Phones array is required and cannot be empty"
                invalid_format:
                  value:
                    error: "Phone at index 0 must contain only digits"
                batch_exceeded:
                  value:
                    error: "Batch size exceeds maximum limit of 50000 numbers"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Failed to check phone numbers"
        "503":
          description: Contacts service not available
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Contacts service not available"
  /instances/{instanceId}/token/{instanceToken}/chats:
    get:
      tags:
        - Chats
      summary: List WhatsApp chats
      description: |
        Returns a paginated list of WhatsApp chats (conversations) for the instance.

        **Features:**
        - ‚úÖ Pagination support (page, pageSize)
        - ‚úÖ Individual, group, and community chats
        - ‚úÖ Unread message counts
        - ‚úÖ Last message timestamp
        - ‚úÖ Mute status and expiry
        - ‚úÖ Archive, pin, and spam status
        - ‚úÖ X-Total-Count header for total count
        - ‚úÖ Ordered by lastMessageTime (most recent first)

        **Chat Types:**
        - Individual chats (person-to-person)
        - Group chats (multiple participants)
        - Community announcement channels

        **Data Sources:**
        - WhatsApp chat metadata (from store)
        - Message history (last message timestamp)
        - Chat settings (mute, archive, pin, spam status)

        **Ordering:** Chats are ordered by lastMessageTime descending (most recent first).

        **Unread Counts:** Both `unread` and `messagesUnread` fields represent the same count (Z-API compatibility).

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: getChats
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: page
          required: true
          schema:
            type: integer
            minimum: 1
          description: Page number (1-indexed)
          example: 1
        - in: query
          name: pageSize
          required: true
          schema:
            type: integer
            minimum: 1
            maximum: 100
          description: Number of chats per page (max 100)
          example: 20
      responses:
        "200":
          description: Chats retrieved successfully
          headers:
            X-Total-Count:
              description: Total number of chats available
              schema:
                type: integer
              example: 75
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Chat"
              example:
                - phone: "5511999999999@s.whatsapp.net"
                  name: "Jo√£o Silva"
                  unread: 5
                  lastMessageTime: "2025-01-11T14:30:00Z"
                  isMuted: false
                  muteEndTime: "0001-01-01T00:00:00Z"
                  isMarkedSpam: false
                  archived: false
                  pinned: true
                  messagesUnread: 5
                  isGroup: false
                - phone: "120363047204807488@g.us"
                  name: "Fam√≠lia Silva"
                  unread: 12
                  lastMessageTime: "2025-01-11T13:45:00Z"
                  isMuted: true
                  muteEndTime: "2025-01-12T14:30:00Z"
                  isMarkedSpam: false
                  archived: false
                  pinned: false
                  messagesUnread: 12
                  isGroup: true
                - phone: "5511888888888@s.whatsapp.net"
                  name: "Maria Oliveira"
                  unread: 0
                  lastMessageTime: "2025-01-11T10:15:00Z"
                  isMuted: false
                  muteEndTime: "0001-01-01T00:00:00Z"
                  isMarkedSpam: false
                  archived: true
                  pinned: false
                  messagesUnread: 0
                  isGroup: false
        "400":
          description: Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "page must be >= 1"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"
  /instances/{instanceId}/token/{instanceToken}/groups:
    get:
      tags:
        - Groups
      summary: List groups
      description: Returns a paginated list of WhatsApp groups the instance participates in (Z-API compatible).
      operationId: listGroups
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: page
          required: true
          schema:
            type: integer
            minimum: 1
          description: Page number (1-indexed).
          example: 1
        - in: query
          name: pageSize
          required: true
          schema:
            type: integer
            minimum: 1
          description: Number of groups to return per page.
          example: 10
      responses:
        "200":
          description: Array of groups (unwrapped, matching Z-API behaviour).
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/GroupListItem"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/create-group:
    post:
      tags:
        - Groups
      summary: Create group
      description: Creates a WhatsApp group with the provided participants (Z-API compatible).
      operationId: createGroup
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupCreateRequest"
            example:
              autoInvite: true
              groupName: "Grupo Z-API"
              phones:
                - "5544999999999"
                - "5544888888888"
      responses:
        "200":
          description: Group created successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupCreateResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-group-name:
    post:
      tags:
        - Groups
      summary: Update group name
      description: Updates the subject (name) of an existing group.
      operationId: updateGroupName
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupUpdateNameRequest"
            example:
              groupId: "120363019502650977-group"
              groupName: "Mudou o nome do meu grupo"
      responses:
        "200":
          description: Group name updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-group-photo:
    post:
      tags:
        - Groups
      summary: Update group photo
      description: Updates the profile picture of an existing group.
      operationId: updateGroupPhoto
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupUpdatePhotoRequest"
            example:
              groupId: "120363019502650977-group"
              groupPhoto: "https://www.z-api.io/wp-content/themes/z-api/dist/images/logo.svg"
      responses:
        "200":
          description: Group photo updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/add-participant:
    post:
      tags:
        - Groups
        - Communities
      summary: Add participants
      description: Adds participants to a group or to the announcements group of a community.
      operationId: addParticipants
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/GroupAddParticipantsRequest"
                - $ref: "#/components/schemas/CommunityAddParticipantsRequest"
            examples:
              group:
                summary: Add participants to a group
                value:
                  autoInvite: true
                  groupId: "120363019502650977-group"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
              community:
                summary: Add participants to a community
                value:
                  autoInvite: true
                  communityId: "120363019502650977"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
      responses:
        "200":
          description: Participants added successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, group or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/remove-participant:
    post:
      tags:
        - Groups
        - Communities
      summary: Remove participants
      description: Removes participants from a group or a community announcements group.
      operationId: removeParticipants
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/GroupParticipantListRequest"
                - $ref: "#/components/schemas/CommunityParticipantListRequest"
            examples:
              group:
                summary: Remove participants from a group
                value:
                  groupId: "120363019502650977-group"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
              community:
                summary: Remove participants from a community
                value:
                  communityId: "120363019502650977"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
      responses:
        "200":
          description: Participants removed successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, group or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/approve-participant:
    post:
      tags:
        - Groups
      summary: Approve participants
      description: Approves pending join requests for a group.
      operationId: approveGroupParticipants
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupParticipantListRequest"
            example:
              groupId: "120363019502650977-group"
              phones:
                - "5544999999999"
                - "5544888888888"
      responses:
        "200":
          description: Participants approved successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/reject-participant:
    post:
      tags:
        - Groups
      summary: Reject participants
      description: Rejects pending join requests for a group.
      operationId: rejectGroupParticipants
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupParticipantListRequest"
            example:
              groupId: "120363019502650977-group"
              phones:
                - "5544999999999"
                - "5544888888888"
      responses:
        "200":
          description: Participants rejected successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/add-admin:
    post:
      tags:
        - Groups
        - Communities
      summary: Promote administrators
      description: Promotes participants to administrators for a group or community.
      operationId: addAdministrators
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/GroupParticipantListRequest"
                - $ref: "#/components/schemas/CommunityAdminMutationRequest"
            examples:
              group:
                summary: Promote group administrators
                value:
                  groupId: "120363019502650977-group"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
              community:
                summary: Promote community administrators
                value:
                  communityId: "120363019502650977"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
      responses:
        "200":
          description: Administrators promoted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, group or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/remove-admin:
    post:
      tags:
        - Groups
        - Communities
      summary: Demote administrators
      description: Removes administrator privileges from participants in a group or community.
      operationId: removeAdministrators
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/GroupParticipantListRequest"
                - $ref: "#/components/schemas/CommunityAdminMutationRequest"
            examples:
              group:
                summary: Demote group administrators
                value:
                  groupId: "120363019502650977-group"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
              community:
                summary: Demote community administrators
                value:
                  communityId: "120363019502650977"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
      responses:
        "200":
          description: Administrators demoted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, group or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/leave-group:
    post:
      tags:
        - Groups
      summary: Leave group
      description: Removes the connected WhatsApp account from a group.
      operationId: leaveGroup
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupLeaveRequest"
            example:
              groupId: "120363019502650977-group"
      responses:
        "200":
          description: Left the group successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/group-metadata/{groupId}:
    get:
      tags:
        - Groups
      summary: Get group metadata
      description: Returns detailed metadata for a specific group.
      operationId: getGroupMetadata
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: groupId
          in: path
          required: true
          schema:
            type: string
          description: "Group JID (suffix `-group`)."
      responses:
        "200":
          description: Group metadata returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupMetadataResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/light-group-metadata/{groupId}:
    get:
      tags:
        - Groups
      summary: Get group metadata (light)
      description: Returns metadata for a specific group without fetching the invitation link (lower latency variant).
      operationId: getLightGroupMetadata
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: groupId
          in: path
          required: true
          schema:
            type: string
          description: "Group JID (suffix `-group`)."
      responses:
        "200":
          description: Group metadata returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupMetadataResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/group-invitation-metadata:
    get:
      tags:
        - Groups
      summary: Resolve group invitation metadata
      description: Resolves a group invitation link and returns metadata about the group.
      operationId: getGroupInvitationMetadata
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: url
          required: true
          schema:
            type: string
            format: uri
          description: Group invitation URL.
      responses:
        "200":
          description: Invitation metadata returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupInvitationMetadataResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or invitation not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-group-settings:
    post:
      tags:
        - Groups
      summary: Update group settings
      description: Updates group preferences such as admin-only messaging and approvals.
      operationId: updateGroupSettings
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupSettingsRequest"
            example:
              phone: "120363019502650977-group"
              adminOnlyMessage: true
              adminOnlySettings: true
              requireAdminApproval: false
              adminOnlyAddMember: true
      responses:
        "200":
          description: Group settings updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-group-description:
    post:
      tags:
        - Groups
      summary: Update group description
      description: Updates the description text of a group.
      operationId: updateGroupDescription
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupDescriptionRequest"
            example:
              groupId: "120363019502650977-group"
              groupDescription: "Descri√ß√£o do grupo"
      responses:
        "200":
          description: Group description updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/redefine-invitation-link/{resourceId}:
    post:
      tags:
        - Groups
        - Communities
      summary: Redefine invitation link
      description: Generates a new invitation link for a group or community.
      operationId: redefineInvitationLink
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: resourceId
          in: path
          required: true
          schema:
            type: string
          description: "Group JID (suffix `-group`) or community ID whose invitation link should be reset."
      responses:
        "200":
          description: Invitation link regenerated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvitationLinkResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, group or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/group-invitation-link/{groupId}:
    post:
      tags:
        - Groups
      summary: Get group invitation link
      description: Returns the current invitation link for a group.
      operationId: getGroupInvitationLink
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: groupId
          in: path
          required: true
          schema:
            type: string
          description: "Group JID (suffix `-group`)."
      responses:
        "200":
          description: Invitation link retrieved successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupInvitationLinkResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/accept-invite-group:
    get:
      tags:
        - Groups
      summary: Accept group invite
      description: Accepts a group invitation link on behalf of the connected WhatsApp account.
      operationId: acceptGroupInvite
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: url
          required: true
          schema:
            type: string
            format: uri
          description: Group invitation URL to accept.
      responses:
        "200":
          description: Invitation accepted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanSuccessResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or invitation not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/communities:
    post:
      tags:
        - Communities
      summary: Create community
      description: Creates a new WhatsApp community (Z-API compatible).
      operationId: createCommunity
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityCreateRequest"
            example:
              name: "Minha primeira Comunidade"
              description: "Comunidade de testes"
      responses:
        "200":
          description: Community created successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CommunityCreateResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    get:
      tags:
        - Communities
      summary: List communities
      description: Returns the communities the connected account participates in.
      operationId: listCommunities
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
          description: Optional page number (1-indexed).
          example: 1
        - in: query
          name: pageSize
          schema:
            type: integer
            minimum: 1
          description: Optional page size.
          example: 10
      responses:
        "200":
          description: Array of communities (unwrapped, matching Z-API behaviour).
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CommunityListItem"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/communities/link:
    post:
      tags:
        - Communities
      summary: Link groups to community
      description: Links one or more groups to a community.
      operationId: linkCommunityGroups
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityLinkRequest"
            example:
              communityId: "98372465382764532938"
              groupsPhones:
                - "1345353454354354-group"
                - "1203634230225498-group"
      responses:
        "200":
          description: Groups linked successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanSuccessResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, community or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/communities/unlink:
    post:
      tags:
        - Communities
      summary: Unlink groups from community
      description: Removes the association between groups and a community.
      operationId: unlinkCommunityGroups
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityLinkRequest"
            example:
              communityId: "98372465382764532938"
              groupsPhones:
                - "1345353454354354-group"
      responses:
        "200":
          description: Groups unlinked successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanSuccessResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, community or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/communities/settings:
    post:
      tags:
        - Communities
      summary: Update community settings
      description: Updates who can add new groups to the community.
      operationId: updateCommunitySettings
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunitySettingsRequest"
            example:
              communityId: "98372465382764532938"
              whoCanAddNewGroups: "admins"
      responses:
        "200":
          description: Settings updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanSuccessResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-community-description:
    post:
      tags:
        - Communities
      summary: Update community description
      description: Updates the textual description of a community.
      operationId: updateCommunityDescription
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityDescriptionRequest"
            example:
              communityId: "120363565656565656"
              communityDescription: "descri√ß√£o da comunidade"
      responses:
        "200":
          description: Description updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/communities-metadata/{communityId}:
    get:
      tags:
        - Communities
      summary: Get community metadata
      description: Returns metadata and linked groups for a community.
      operationId: getCommunityMetadata
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: communityId
          in: path
          required: true
          schema:
            type: string
          description: Community identifier.
      responses:
        "200":
          description: Community metadata returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CommunityMetadataResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/communities/{communityId}:
    delete:
      tags:
        - Communities
      summary: Delete community
      description: |
        Mirrors Z-API `DELETE /communities/{communityId}`, permanently deleting a community.

        **Important**: This action is irreversible. All linked groups will be unlinked but not deleted.
      operationId: deleteCommunity
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: communityId
          in: path
          required: true
          schema:
            type: string
          description: Community identifier (e.g., "120363019502650977")
          example: "120363019502650977"
      responses:
        "200":
          description: Community deleted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
              example:
                value: true
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/create-newsletter:
    post:
      tags:
        - Channels
      summary: Create channel
      description: Creates a WhatsApp channel (newsletter) owned by the connected account.
      operationId: createNewsletter
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterCreateRequest"
            example:
              name: "Nome do canal"
              description: "Descri√ß√£o do canal"
      responses:
        "201":
          description: Channel created successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NewsletterCreateResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-newsletter-picture:
    post:
      tags:
        - Channels
      summary: Update channel picture
      description: Updates the profile picture of an existing channel.
      operationId: updateNewsletterPicture
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterUpdatePictureRequest"
            example:
              id: "120363336258908380@newsletter"
              pictureUrl: "https://www.funnelchatapi.io/wp-content/themes/funnelchatapi/dist/images/logo.svg"
      responses:
        "201":
          description: Channel picture updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-newsletter-name:
    post:
      tags:
        - Channels
      summary: Update channel name
      description: Updates the display name of a channel.
      operationId: updateNewsletterName
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterUpdateNameRequest"
            example:
              id: "120363336258908380@newsletter"
              name: "Novo nome do canal"
      responses:
        "201":
          description: Channel name updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-newsletter-description:
    post:
      tags:
        - Channels
      summary: Update channel description
      description: Updates the description of a channel.
      operationId: updateNewsletterDescription
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterUpdateDescriptionRequest"
            example:
              id: "120363336258908380@newsletter"
              description: "Nova descri√ß√£o do canal"
      responses:
        "201":
          description: Channel description updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/follow-newsletter:
    put:
      tags:
        - Channels
      summary: Follow channel
      description: Follows a channel (newsletter) to receive updates.
      operationId: followNewsletter
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterIdRequest"
            example:
              id: "120363336258908380@newsletter"
      responses:
        "200":
          description: Channel followed successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/unfollow-newsletter:
    put:
      tags:
        - Channels
      summary: Unfollow channel
      description: Stops following a channel.
      operationId: unfollowNewsletter
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterIdRequest"
            example:
              id: "120363336258908380@newsletter"
      responses:
        "200":
          description: Channel unfollowed successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/mute-newsletter:
    put:
      tags:
        - Channels
      summary: Mute channel
      description: Mutes notifications for a channel.
      operationId: muteNewsletter
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterIdRequest"
            example:
              id: "120363336258908380@newsletter"
      responses:
        "200":
          description: Channel muted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/unmute-newsletter:
    put:
      tags:
        - Channels
      summary: Unmute channel
      description: Unmutes notifications for a channel.
      operationId: unmuteNewsletter
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterIdRequest"
            example:
              id: "120363336258908380@newsletter"
      responses:
        "200":
          description: Channel unmuted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/delete-newsletter:
    delete:
      tags:
        - Channels
      summary: Delete channel
      description: Deletes a channel owned by the connected account.
      operationId: deleteNewsletter
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterIdRequest"
            example:
              id: "120363336258908380@newsletter"
      responses:
        "200":
          description: Channel deleted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter:
    get:
      tags:
        - Channels
      summary: List channels
      description: Returns metadata for channels followed or owned by the connected account.
      operationId: listNewsletters
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Array of channels (unwrapped, matching Z-API behaviour).
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NewsletterMetadata"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter/metadata/{newsletterId}:
    get:
      tags:
        - Channels
      summary: Get channel metadata
      description: Returns metadata about a specific channel (newsletter).
      operationId: getNewsletterMetadata
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: "Channel identifier (suffix `@newsletter`)."
      responses:
        "200":
          description: Channel metadata returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NewsletterMetadata"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/search-newsletter:
    post:
      tags:
        - Channels
      summary: Search channels
      description: Searches for public channels using the filters supported by WhatsApp.
      operationId: searchNewsletters
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterSearchRequest"
            example:
              limit: 50
              view: TRENDING
              filters:
                countryCodes:
                  - BR
                  - CA
              searchText: "Z-API"
      responses:
        "200":
          description: Search results returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NewsletterSearchResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter/settings/{newsletterId}:
    post:
      tags:
        - Channels
      summary: Update channel settings
      description: Updates channel reaction settings.
      operationId: updateNewsletterSettings
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: "Channel identifier (suffix `@newsletter`)."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterSettingsRequest"
            example:
              reactionCodes: basic
      responses:
        "201":
          description: Channel settings updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-newsletter-admin-invite:
    post:
      tags:
        - Channels
      summary: Send channel admin invitation
      description: Sends an invitation to a participant to become channel administrator via direct message.
      operationId: sendNewsletterAdminInvite
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendNewsletterAdminInviteRequest"
            example:
              id: "123456789@newsletter"
              phone: "5511999999999"
      responses:
        "201":
          description: Admin invitation sent successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter/accept-admin-invite/{newsletterId}:
    post:
      tags:
        - Channels
      summary: Accept channel admin invite
      description: Accepts an invitation to become administrator of a channel.
      operationId: acceptNewsletterAdminInvite
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: "Channel identifier (suffix `@newsletter`)."
      responses:
        "201":
          description: Admin invitation accepted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter/remove-admin/{newsletterId}:
    post:
      tags:
        - Channels
      summary: Remove channel admin
      description: Removes an administrator from a channel.
      operationId: removeNewsletterAdmin
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: "Channel identifier (suffix `@newsletter`)."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterAdminActionRequest"
            example:
              phone: "5544999999999"
      responses:
        "201":
          description: Administrator removed successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter/revoke-admin-invite/{newsletterId}:
    post:
      tags:
        - Channels
      summary: Revoke channel admin invite
      description: Revokes a pending administrator invitation for a channel.
      operationId: revokeNewsletterAdminInvite
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: "Channel identifier (suffix `@newsletter`)."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterAdminActionRequest"
            example:
              phone: "5544999999999"
      responses:
        "201":
          description: Invitation revoked successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter/transfer-ownership/{newsletterId}:
    post:
      tags:
        - Channels
      summary: Transfer channel ownership
      description: Transfers ownership of a channel to another administrator.
      operationId: transferNewsletterOwnership
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: "Channel identifier (suffix `@newsletter`)."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterTransferOwnershipRequest"
            examples:
              basic:
                summary: Transfer ownership and keep current admin role
                value:
                  phone: "5544999999999"
              quitAdmin:
                summary: Transfer ownership and leave admin role
                value:
                  phone: "5544999999999"
                  quitAdmin: true
      responses:
        "200":
          description: Ownership transfer attempted.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NewsletterTransferOwnershipResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  # ===== Status Cache Schemas =====
  /instances/{instanceId}/token/{instanceToken}/messages-status:
    get:
      tags:
        - Status Cache
      summary: Query message delivery status
      description: |
        Query the cached status of message deliveries. Status Cache stores delivery receipts
        (sent, delivered, read, played) for messages, especially useful for group messages
        where tracking individual participant statuses is important.

        **Query Types:**
        - By `messageId`: Get status for a specific message
        - By `groupId`: Get all message statuses for a group
        - By `phone`: Get all message statuses for a phone number

        **Response Formats:**
        - `aggregated` (default): Returns aggregated counts and optionally participant details
        - `raw`: Returns data in Z-API webhook format for compatibility

        **Use Cases:**
        - Check if a message was read by all group participants
        - Get delivery statistics for messages to a specific contact
        - Retrieve batch status updates for UI dashboards

        **Note:** Status data is cached with a configurable TTL (default 24h).
      operationId: getMessagesStatus
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: messageId
          in: query
          required: false
          schema:
            type: string
          description: |
            Query status for a specific message. When provided, returns detailed status
            for that message including all participant statuses.
          example: "3EB0A1B2C3D4E5F6"
        - name: groupId
          in: query
          required: false
          schema:
            type: string
          description: |
            Query all message statuses for a group. Returns paginated results.
            The groupId should be the numeric part of the WhatsApp JID (without @g.us).
          example: "120363182823169824"
        - name: phone
          in: query
          required: false
          schema:
            type: string
          description: |
            Query all message statuses for messages to/from a phone number.
            Use E.164 format without the + prefix.
          example: "5511999999999"
        - name: format
          in: query
          required: false
          schema:
            type: string
            enum:
              - aggregated
              - raw
            default: aggregated
          description: |
            Response format:
            - `aggregated`: Returns aggregated counts with optional participant details
            - `raw`: Returns data in Z-API MessageStatusCallback webhook format
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 100
          description: Maximum number of results to return (1-1000).
        - name: offset
          in: query
          required: false
          schema:
            type: integer
            minimum: 0
            default: 0
          description: Number of results to skip for pagination.
        - name: includeParticipants
          in: query
          required: false
          schema:
            type: boolean
            default: false
          description: |
            When true and format is `aggregated`, includes the full list of
            participant statuses in the response. Useful for detailed analysis
            but increases response size significantly for groups.
      responses:
        "200":
          description: Status data retrieved successfully.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/StatusCacheQueryResult"
                  - $ref: "#/components/schemas/StatusCacheRawQueryResult"
              examples:
                aggregatedSingle:
                  summary: Single message aggregated status
                  value:
                    data:
                      - messageId: "3EB0A1B2C3D4E5F6"
                        instanceId: "550e8400-e29b-41d4-a716-446655440000"
                        groupId: "120363182823169824"
                        phone: "120363182823169824-group"
                        isGroup: true
                        totalParticipants: 100
                        status:
                          sent: 100
                          delivered: 95
                          read: 42
                          played: 0
                        createdAt: 1703548800000
                        updatedAt: 1703552400000
                    meta:
                      total: 1
                      limit: 100
                      offset: 0
                aggregatedWithParticipants:
                  summary: With participant details
                  value:
                    data:
                      - messageId: "3EB0A1B2C3D4E5F6"
                        instanceId: "550e8400-e29b-41d4-a716-446655440000"
                        phone: "5511999999999"
                        isGroup: false
                        totalParticipants: 1
                        status:
                          sent: 1
                          delivered: 1
                          read: 1
                          played: 0
                        participants:
                          - phone: "5511999999999"
                            status: "read"
                            timestamp: 1703548900000
                            device: 1
                        createdAt: 1703548800000
                        updatedAt: 1703548900000
                    meta:
                      total: 1
                      limit: 100
                      offset: 0
                rawFormat:
                  summary: Raw Z-API format
                  value:
                    data:
                      - status: "read"
                        ids:
                          - "3EB0A1B2C3D4E5F6"
                        momment: 1703548900000
                        phone: "5511999999999"
                        isGroup: false
                        instanceId: "550e8400-e29b-41d4-a716-446655440000"
                        type: "MessageStatusCallback"
                        fromMe: true
                        senderDevice: 1
                    meta:
                      total: 1
                      limit: 100
                      offset: 0
                empty:
                  summary: No cached status found
                  value:
                    data: []
                    meta:
                      total: 0
                      limit: 0
                      offset: 0
        "400":
          description: Bad request - missing required parameter
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "missing required parameter: messageId, groupId, or phone"
        "401":
          description: Unauthorized - invalid or missing Client-Token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /instances/{instanceId}/token/{instanceToken}/messages-status/flush:
    post:
      tags:
        - Status Cache
      summary: Flush pending webhooks
      description: |
        Triggers delivery of suppressed webhooks for cached status events.

        When `STATUS_CACHE_SUPPRESS_WEBHOOKS=true`, status webhooks are not immediately
        sent but stored for later delivery. This endpoint allows manual triggering
        of those pending webhooks.

        **Use Cases:**
        - Force immediate delivery of status updates to webhook endpoints
        - Recover from webhook endpoint downtime
        - Batch process status updates at specific intervals

        **Options:**
        - Flush by specific `messageId`: Delivers webhooks for one message
        - Flush all (`all: true`): Delivers all pending webhooks for the instance

        **Note:** Flushing is idempotent - already-flushed webhooks won't be re-sent.
      operationId: flushMessagesStatus
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StatusCacheFlushRequest"
            examples:
              flushMessage:
                summary: Flush specific message
                value:
                  messageId: "3EB0A1B2C3D4E5F6"
              flushAll:
                summary: Flush all pending
                value:
                  all: true
      responses:
        "200":
          description: Flush completed successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StatusCacheFlushResult"
              examples:
                success:
                  summary: Flush completed
                  value:
                    flushed: 15
                    webhooksTriggered: 15
                noPending:
                  summary: No pending webhooks
                  value:
                    flushed: 0
                    webhooksTriggered: 0
        "400":
          description: Bad request - invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                missingParam:
                  summary: Missing parameter
                  value:
                    error: "specify messageId or set all=true"
                invalidBody:
                  summary: Invalid request body
                  value:
                    error: "invalid request body"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /instances/{instanceId}/token/{instanceToken}/messages-status/cache:
    delete:
      tags:
        - Status Cache
      summary: Clear cached status entries
      description: |
        Removes cached status entries from the status cache.

        **Options:**
        - Clear by `messageId`: Removes cache for a specific message
        - Clear all (`all=true`): Removes all cached entries for the instance

        **Warning:** Clearing cache is irreversible. Cached status data and pending
        webhooks for cleared entries will be permanently deleted.

        **Use Cases:**
        - Free up cache storage space
        - Remove obsolete message status data
        - Reset cache after testing
      operationId: clearMessagesStatusCache
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: messageId
          in: query
          required: false
          schema:
            type: string
          description: Clear cache for a specific message ID.
          example: "3EB0A1B2C3D4E5F6"
        - name: all
          in: query
          required: false
          schema:
            type: boolean
            default: false
          description: Set to true to clear all cached entries for this instance.
      responses:
        "200":
          description: Cache cleared successfully.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/StatusCacheClearSingleResult"
                  - $ref: "#/components/schemas/StatusCacheClearAllResult"
              examples:
                singleMessage:
                  summary: Single message cleared
                  value:
                    cleared: 1
                    messageId: "3EB0A1B2C3D4E5F6"
                allCleared:
                  summary: All entries cleared
                  value:
                    cleared: 150
        "400":
          description: Bad request - missing parameter
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "specify messageId or set all=true"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /instances/{instanceId}/token/{instanceToken}/messages-status/stats:
    get:
      tags:
        - Status Cache
      summary: Get cache statistics
      description: |
        Returns statistics about the status cache for this instance.

        **Metrics included:**
        - Total cached entries
        - Entries breakdown by instance
        - Number of pending webhooks awaiting flush

        **Use Cases:**
        - Monitor cache usage and storage
        - Determine if flush is needed
        - Debug cache behavior
      operationId: getMessagesStatusStats
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Statistics retrieved successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StatusCacheStats"
              example:
                totalEntries: 1500
                entriesByInstance:
                  "550e8400-e29b-41d4-a716-446655440000": 1500
                pendingWebhooks: 45
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  # Media endpoints
  /media/{instanceId}/{filepath}:
    get:
      tags:
        - Media
      summary: Serve media file
      description: |
        Serves a media file with HMAC signature validation for secure access.
        URLs are time-limited and must include valid signature parameters.

        **URL Format:**
        `/media/{instanceId}/{filepath}?sig={signature}&exp={expiration}`

        **Security:**
        - HMAC-SHA256 signature validation
        - Time-limited URLs (configurable expiration)
        - Instance-scoped access control

        **Supported Media Types:**
        - Images (JPEG, PNG, WebP, GIF)
        - Audio (MP3, OGG, M4A)
        - Video (MP4, MOV)
        - Documents (PDF, DOC, etc.)
      operationId: serveMedia
      security: []
      parameters:
        - name: instanceId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Instance identifier that owns the media
        - name: filepath
          in: path
          required: true
          schema:
            type: string
          description: Path to the media file within instance storage
          example: "images/photo_123.jpg"
        - name: sig
          in: query
          required: true
          schema:
            type: string
          description: HMAC-SHA256 signature for URL validation
          example: "a1b2c3d4e5f6..."
        - name: exp
          in: query
          required: true
          schema:
            type: integer
            format: int64
          description: Unix timestamp when the URL expires
          example: 1704067200
      responses:
        "200":
          description: Media file served successfully
          content:
            image/*:
              schema:
                type: string
                format: binary
            audio/*:
              schema:
                type: string
                format: binary
            video/*:
              schema:
                type: string
                format: binary
            application/octet-stream:
              schema:
                type: string
                format: binary
        "400":
          description: Missing or invalid signature parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "missing signature parameter"
        "403":
          description: Invalid signature or expired URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "invalid signature"
        "404":
          description: Media file not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "file not found"
        "410":
          description: URL has expired
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "URL expired"

  /media/stats:
    get:
      tags:
        - Media
      summary: Get media storage statistics
      description: |
        Returns statistics about the media storage system.

        **Statistics Include:**
        - Total number of stored files
        - Total storage size in bytes
        - Base storage path configuration
        - URL expiration settings
        - Public base URL for media access

        **Use Cases:**
        - Monitor storage usage
        - Capacity planning
        - Debug media configuration
      operationId: getMediaStats
      security:
        - PartnerBearer: []
      responses:
        "200":
          description: Media statistics retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MediaStatsResponse"
              example:
                total_files: 1234
                total_bytes: 1073741824
                base_path: "/data/media"
                url_expiry: "24h0m0s"
                public_base_url: "https://api.example.com/media"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
