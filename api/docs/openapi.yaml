openapi: 3.1.0
info:
  title: FunnelChat API (Whatsmeow Bridge)
  version: 0.1.0
  description: "REST API compatible with Z-API schemas, backed by Whatsmeow.

    The specification currently covers the instance management surface implemented in this phase.

    "
servers:
  - url: https://api.example.com
    description: Production placeholder
  - url: http://localhost:8080
    description: Local development
components:
  securitySchemes:
    ClientTokenAuth:
      type: apiKey
      in: header
      name: Client-Token
      description: Instance client token obtained during provisioning.
    PartnerBearer:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Partner integrator bearer token.
  parameters:
    InstanceId:
      name: instanceId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Unique instance identifier.
    InstanceToken:
      name: instanceToken
      in: path
      required: true
      schema:
        type: string
      description: Token returned during provisioning.
  schemas:
    ErrorResponse:
      type: object
      properties:
        error:
          type: string
      required:
        - error
    HealthStatusResponse:
      type: object
      description: Liveness probe response.
      properties:
        status:
          type: string
          example: ok
        service:
          type: string
          example: whatsapp-api
      required:
        - status
        - service
      additionalProperties: false
    ReadinessComponentStatus:
      type: object
      description: Status information for a single dependency checked by the readiness probe.
      properties:
        status:
          type: string
          enum:
            - healthy
            - degraded
            - unhealthy
        error:
          type: string
          nullable: true
        duration_ms:
          type: integer
          format: int64
          description: Time spent executing the check in milliseconds.
        circuit_state:
          type: string
          nullable: true
          description: Circuit breaker state reported by the lock manager (when available).
      required:
        - status
      additionalProperties: false
    ReadinessResponse:
      type: object
      description: Readiness probe payload containing aggregated dependency status.
      properties:
        ready:
          type: boolean
        observed_at:
          type: string
          format: date-time
        checks:
          type: object
          additionalProperties:
            $ref: "#/components/schemas/ReadinessComponentStatus"
          description: "Map of dependency name to component status (e.g. `database`, `redis`)."
      required:
        - ready
        - observed_at
        - checks
      additionalProperties: false
    InstanceStatusResponse:
      type: object
      description: Z-API compatible payload returned by `/instances/{instanceId}/token/{instanceToken}/status`.
      properties:
        connected:
          type: boolean
          description: Mirrors Z-API `connected`, indicating if the instance is linked to WhatsApp.
        error:
          type: string
          nullable: true
          description: Same semantics as Z-API, detailing why the instance is not connected (empty string when everything is ok).
        smartphoneConnected:
          type: boolean
          description: Matches Z-API `smartphoneConnected`, signalling if the paired device has internet access.
      required:
        - connected
        - error
        - smartphoneConnected
      additionalProperties: false
    QRCodeImageResponse:
      type: object
      properties:
        image:
          type: string
          description: "PNG image encoded as data URL (`data:image/png;base64,...`)."
      required:
        - image
      additionalProperties: false
    PhoneCodeResponse:
      type: object
      properties:
        code:
          type: string
          description: "Six-character pairing code formatted with dash (e.g., `ABCD-EF`)."
      required:
        - code
      additionalProperties: false
    InstanceDeviceDetails:
      type: object
      properties:
        sessionName:
          type: string
        device_model:
          type: string
        wa_version:
          type: string
        mcc:
          type: string
        mnc:
          type: string
        os_version:
          type: string
        device_manufacturer:
          type: string
        osbuildnumber:
          type: string
        platform:
          type: string
      additionalProperties: false
    InstanceDeviceResponse:
      type: object
      properties:
        phone:
          type: string
          description: WhatsApp number linked to the instance.
        imgUrl:
          type: string
          nullable: true
          description: Direct URL to the current profile picture (null when unavailable).
        name:
          type: string
          description: Latest push name associated with the instance.
        device:
          $ref: "#/components/schemas/InstanceDeviceDetails"
        originalDevice:
          type: string
          description: Raw device/platform identifier reported by WhatsApp (e.g. `smba`, `smbi`).
        sessionId:
          type: integer
          format: int64
          description: Device identifier assigned by WhatsApp (0 for the primary phone).
        isBusiness:
          type: boolean
          description: Indicates if the paired account is a business profile.
      required:
        - phone
        - imgUrl
        - name
        - device
        - sessionId
        - isBusiness
      additionalProperties: false
    OperationStatusResponse:
      type: object
      properties:
        status:
          type: string
      required:
        - status
      additionalProperties: false
    WebhookSettings:
      type: object
      properties:
        deliveryCallbackUrl:
          type: string
          format: uri
          nullable: true
        receivedCallbackUrl:
          type: string
          format: uri
          nullable: true
        receivedAndDeliveryCallbackUrl:
          type: string
          format: uri
          nullable: true
        messageStatusCallbackUrl:
          type: string
          format: uri
          nullable: true
        disconnectedCallbackUrl:
          type: string
          format: uri
          nullable: true
        presenceChatCallbackUrl:
          type: string
          format: uri
          nullable: true
        connectedCallbackUrl:
          type: string
          format: uri
          nullable: true
        notifySentByMe:
          type: boolean
      additionalProperties: false
    WebhookValueRequest:
      type: object
      properties:
        value:
          type: string
          description: HTTPS endpoint that should receive the webhook.
      required:
        - value
      additionalProperties: false
    WebhookEveryRequest:
      type: object
      properties:
        value:
          type: string
          description: HTTPS endpoint applied to all webhook types.
        notifySentByMe:
          type: boolean
          description: Optional flag to also toggle the notify-sent-by-me option.
      required:
        - value
      additionalProperties: false
    BoolValueRequest:
      type: object
      properties:
        value:
          type: boolean
          description: Boolean value for the setting.
      required:
        - value
      additionalProperties: false
    StringValueRequest:
      type: object
      properties:
        value:
          type: string
          description: String value for the setting.
      required:
        - value
      additionalProperties: false
    ValueResponse:
      type: object
      properties:
        value:
          type: boolean
          description: Indicates whether the operation was successful.
      additionalProperties: false
    NotifySentByMeRequest:
      type: object
      properties:
        notifySentByMe:
          type: boolean
      required:
        - notifySentByMe
      additionalProperties: false
    WebhookUpdateResponse:
      type: object
      properties:
        value:
          type: boolean
          description: Indicates whether the update was accepted.
        webhooks:
          $ref: "#/components/schemas/WebhookSettings"
      required:
        - value
      additionalProperties: false
    PartnerInstanceCreateRequest:
      type: object
      properties:
        name:
          type: string
          description: Display name for the instance.
        sessionName:
          type: string
          description: Optional session identifier used by partners.
        deliveryCallbackUrl:
          type: string
          format: uri
        receivedCallbackUrl:
          type: string
          format: uri
        receivedAndDeliveryCallbackUrl:
          type: string
          format: uri
        disconnectedCallbackUrl:
          type: string
          format: uri
        connectedCallbackUrl:
          type: string
          format: uri
        messageStatusCallbackUrl:
          type: string
          format: uri
        presenceChatCallbackUrl:
          type: string
          format: uri
        notifySentByMe:
          type: boolean
          default: false
        callRejectAuto:
          type: boolean
          description: When true, the instance rejects calls automatically.
        callRejectMessage:
          type: string
          description: Message returned when a call is rejected automatically.
        autoReadMessage:
          type: boolean
          description: When true, messages are marked as read automatically.
        isDevice:
          type: boolean
          default: false
        businessDevice:
          type: boolean
          default: true
      required:
        - name
      additionalProperties: false
    PartnerInstanceCreateResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Z-API compatible identifier (duplicate of instanceId).
        token:
          type: string
          description: Z-API compatible instance token.
        due:
          type: integer
          format: int64
          description: Millisecond timestamp returned for Z-API compatibility.
        instanceId:
          type: string
          format: uuid
        name:
          type: string
        sessionName:
          type: string
        instanceToken:
          type: string
        subscriptionActive:
          type: boolean
        callRejectAuto:
          type: boolean
        callRejectMessage:
          type: string
          nullable: true
        autoReadMessage:
          type: boolean
        middleware:
          type: string
          enum:
            - web
            - mobile
        webhooks:
          $ref: "#/components/schemas/WebhookSettings"
        createdAt:
          type: string
          format: date-time
      required:
        - id
        - token
        - due
        - instanceId
        - name
        - sessionName
        - instanceToken
        - subscriptionActive
        - createdAt
      additionalProperties: false
    InstanceListItem:
      type: object
      description: Z-API compatible instance summary enriched with internal credentials.
      properties:
        id:
          type: string
          format: uuid
          description: Instance identifier (Z-API field).
        token:
          type: string
          description: Instance token used by Z-API clients.
        due:
          type: integer
          format: int64
          description: Millisecond timestamp used by Z-API tooling.
        name:
          type: string
          description: Human friendly name for the instance.
        created:
          type: string
          format: date-time
          description: ISO-8601 creation timestamp.
        phoneConnected:
          type: boolean
          description: True when a phone is connected (derived from registry snapshot).
        whatsappConnected:
          type: boolean
          description: True when the WhatsApp session is connected.
        middleware:
          type: string
          description: Middleware flag returned for Z-API compatibility.
          enum:
            - web
            - mobile
        deliveryCallbackUrl:
          type: string
          format: uri
          nullable: true
        receivedCallbackUrl:
          type: string
          format: uri
          nullable: true
        receivedAndDeliveryCallbackUrl:
          type: string
          format: uri
          nullable: true
        disconnectedCallbackUrl:
          type: string
          format: uri
          nullable: true
        connectedCallbackUrl:
          type: string
          format: uri
          nullable: true
        messageStatusCallbackUrl:
          type: string
          format: uri
          nullable: true
        presenceChatCallbackUrl:
          type: string
          format: uri
          nullable: true
        sessionName:
          type: string
          description: Underlying WhatsApp session display name.
        callRejectAuto:
          type: boolean
        callRejectMessage:
          type: string
          nullable: true
        autoReadMessage:
          type: boolean
        subscriptionActive:
          type: boolean
        notifySentByMe:
          type: boolean
          description: When true, webhook will include sent-by-me events.
        instanceId:
          type: string
          format: uuid
          description: "Internal instance identifier (duplicate of `id` for compatibility)."
        instanceToken:
          type: string
          description: Token required on instance scoped requests.
      required:
        - id
        - token
        - due
        - name
        - created
        - phoneConnected
        - whatsappConnected
        - middleware
        - sessionName
        - callRejectAuto
        - autoReadMessage
        - subscriptionActive
        - notifySentByMe
        - instanceId
        - instanceToken
      additionalProperties: false
    InstanceListResponse:
      type: object
      description: Z-API compatible pagination envelope for partner instances.
      properties:
        total:
          type: integer
          minimum: 0
        totalPage:
          type: integer
          minimum: 0
        pageSize:
          type: integer
          minimum: 1
        page:
          type: integer
          minimum: 1
        content:
          type: array
          items:
            $ref: "#/components/schemas/InstanceListItem"
      required:
        - total
        - totalPage
        - pageSize
        - page
        - content
      additionalProperties: false
    QueueMessageResponse:
      type: object
      description: Represents a message in the queue with Z-API compatible format
      properties:
        _id:
          type: string
          description: Message ID (same as zaapId for Z-API compatibility)
          example: 39BB1684570F00E91090F6BBC7EE7646
        zaapId:
          type: string
          description: Z-API message tracking ID
          example: 39BB1684570F00E91090F6BBC7EE7646
        messageId:
          type: string
          description: WhatsApp message ID (after sending)
          example: 7AD29EAA5EF34C301F0B
        instanceId:
          type: string
          format: uuid
          description: Instance UUID
          example: 550e8400-e29b-41d4-a716-446655440000
        phone:
          type: string
          description: Recipient phone/group/newsletter
          example: "5511999999999"
        message:
          type: string
          description: Message text content (only for text messages)
          example: Hello from Z-API
          nullable: true
        delayMessage:
          type: integer
          format: int64
          description: Delay in seconds before sending
          example: 5
        delayTyping:
          type: integer
          format: int64
          description: Typing indicator duration in seconds
          example: 3
        created:
          type: integer
          format: int64
          description: Unix timestamp in milliseconds
          example: 1624977905648
        messageType:
          type: string
          description: Type of message
          enum:
            - text
            - image
            - audio
            - video
            - document
          example: text
        status:
          type: string
          description: Current job status
          enum:
            - available
            - scheduled
            - running
            - completed
            - failed
            - cancelled
            - discarded
          example: available
        sequenceNumber:
          type: integer
          format: int64
          description: FIFO sequence number
          example: 1
        attempt:
          type: integer
          description: Current attempt number (0-based)
          example: 0
        maxAttempts:
          type: integer
          description: Maximum retry attempts
          example: 3
        errors:
          type: array
          items:
            type: string
          description: List of error messages (if any)
          nullable: true
      required:
        - _id
        - zaapId
        - messageId
        - instanceId
        - phone
        - delayMessage
        - delayTyping
        - created
      additionalProperties: false
    QueueListResponse:
      type: array
      description: Array of queue messages (Z-API compatible - direct array, not wrapped)
      items:
        $ref: "#/components/schemas/QueueMessageResponse"
    QueueCountResponse:
      type: object
      description: Queue count response
      properties:
        count:
          type: integer
          description: Number of messages in queue
          example: 42
      required:
        - count
      additionalProperties: false
    QueueClearResponse:
      type: object
      description: Queue clear operation response
      properties:
        message:
          type: string
          description: Operation confirmation message
          example: Queue cleared successfully
      required:
        - message
      additionalProperties: false
    QueueCancelResponse:
      type: object
      description: Message cancellation response
      properties:
        message:
          type: string
          description: Operation confirmation message
          example: Message cancelled successfully
      required:
        - message
      additionalProperties: false
    GroupMention:
      type: object
      description: Group mention in WhatsApp communities
      properties:
        phone:
          type: string
          description: Group JID
          example: 120363XXXXX@g.us
        subject:
          type: string
          description: Group name
          example: Z-API Community
      required:
        - phone
        - subject
    SendTextRequest:
      type: object
      description: Request body for sending text messages (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number in international format (numbers only) or WhatsApp JID
          example: "5511999999999"
        message:
          type: string
          description: Text message content
          example: Hello from Z-API!
        messageId:
          type: string
          description: Optional WhatsApp message ID to reply to
          nullable: true
          example: 3EB0796DC18B7F954D54
        delayMessage:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending (1-15 seconds, default random 1-3)
          nullable: true
          example: 5
        delayTyping:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds (1-15 seconds, default 0)
          nullable: true
          example: 3
        duration:
          type: integer
          description: Ephemeral message duration in seconds (0, 86400, 604800, 7776000)
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
          nullable: true
          example: 86400
        privateAnswer:
          type: boolean
          description: For group messages - if true, reply in private to sender
          default: false
          example: false
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
          example:
            - "5511999999999"
            - "5511888888888"
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members without listing them
          default: false
        linkPreview:
          type: boolean
          description: If nil/omitted, auto-detect URLs and generate preview; if true, force preview; if false, disable preview
          nullable: true
          example: true
      required:
        - phone
        - message
      additionalProperties: false
    SendImageRequest:
      type: object
      description: Request body for sending image messages (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        image:
          type: string
          description: Image URL (http/https) or base64 data URI (data:image/png;base64,...)
          example: https://example.com/image.jpg
        caption:
          type: string
          description: Optional image caption/title
          nullable: true
          example: Check out this image!
        messageId:
          type: string
          description: Optional WhatsApp message ID to reply to
          nullable: true
        delayMessage:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending (1-15 seconds)
          nullable: true
        delayTyping:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds (1-15 seconds)
          nullable: true
        viewOnce:
          type: boolean
          description: If true, image can only be viewed once
          default: false
        duration:
          type: integer
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
          nullable: true
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
          example:
            - "5511999999999"
            - "5511888888888"
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members without listing them
          default: false
        privateAnswer:
          type: boolean
          description: For group messages, reply in private to sender
          default: false
      required:
        - phone
        - image
      additionalProperties: false
    SendAudioRequest:
      type: object
      description: Request body for sending audio/voice messages (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        audio:
          type: string
          description: Audio URL (http/https) or base64 data URI (data:audio/ogg;base64,...)
          example: https://example.com/audio.ogg
        messageId:
          type: string
          description: Optional WhatsApp message ID to reply to
          nullable: true
        delayMessage:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending (1-15 seconds)
          nullable: true
        delayTyping:
          type: integer
          minimum: 1
          maximum: 15
          description: 'Optional "recording audio" indicator duration in seconds (1-15 seconds)'
          nullable: true
        viewOnce:
          type: boolean
          description: If true, audio can only be played once
          default: false
        duration:
          type: integer
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
          nullable: true
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
          example:
            - "5511999999999"
            - "5511888888888"
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members without listing them
          default: false
        privateAnswer:
          type: boolean
          description: For group messages, reply in private to sender
          default: false
      required:
        - phone
        - audio
      additionalProperties: false
    SendVideoRequest:
      type: object
      description: Request body for sending video messages (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        video:
          type: string
          description: Video URL (http/https) or base64 data URI (data:video/mp4;base64,...)
          example: https://example.com/video.mp4
        caption:
          type: string
          description: Optional video caption/title
          nullable: true
        messageId:
          type: string
          description: Optional WhatsApp message ID to reply to
          nullable: true
        delayMessage:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending (1-15 seconds)
          nullable: true
        delayTyping:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds (1-15 seconds)
          nullable: true
        viewOnce:
          type: boolean
          description: If true, video can only be viewed once
          default: false
        duration:
          type: integer
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
          nullable: true
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
          example:
            - "5511999999999"
            - "5511888888888"
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members without listing them
          default: false
        privateAnswer:
          type: boolean
          description: For group messages, reply in private to sender
          default: false
      required:
        - phone
        - video
      additionalProperties: false
    SendDocumentRequest:
      type: object
      description: Request body for sending document messages (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        document:
          type: string
          description: Document URL (http/https) or base64 data URI (data:application/pdf;base64,...)
          example: https://example.com/document.pdf
        fileName:
          type: string
          description: Optional document filename
          nullable: true
          example: report.pdf
        caption:
          type: string
          description: Optional document caption/description
          nullable: true
        messageId:
          type: string
          description: Optional WhatsApp message ID to reply to
          nullable: true
        delayMessage:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending (1-15 seconds)
          nullable: true
        delayTyping:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds (1-15 seconds)
          nullable: true
        duration:
          type: integer
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
          nullable: true
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
          example:
            - "5511999999999"
            - "5511888888888"
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members without listing them
          default: false
        privateAnswer:
          type: boolean
          description: For group messages, reply in private to sender
          default: false
      required:
        - phone
        - document
      additionalProperties: false
    SendStickerRequest:
      type: object
      description: |
        Request body for sending sticker messages (Z-API compatible).

        **Sticker Format**: Accepts URL (http/https) or base64 data URI (data:image/webp;base64,...).

        **Key Features**:
        - Animated stickers supported (WebP format)
        - No caption support (stickers are sent without text)
        - Reply to messages via messageId
        - Schedule delivery with delayMessage (1-15s)
        - Show typing indicator with delayTyping (1-15s)
        - Ephemeral messages with duration (0, 86400, 604800, 7776000)
        - Mention users (@mentions)
        - Mention groups/communities
        - Mention all participants (@everyone)
        - Private reply in groups

        **Message Queue**: Messages are queued per recipient with FIFO ordering.

        **WhatsApp Compatibility**: Uses whatsmeow library with full WhatsApp Web protocol support.
      properties:
        phone:
          type: string
          description: |
            Recipient phone number in international format (without + prefix).

            **Examples**:
            - Individual: `5511999999999` (Brazil mobile)
            - Group: `120363047204807488@g.us`
            - Community: `123456789@newsletter`
          example: "5511999999999"
        sticker:
          type: string
          description: |
            Sticker file URL or base64 data URI.

            **Supported Formats**:
            - URL: `https://example.com/sticker.webp`
            - Base64: `data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=`

            **Requirements**:
            - Format: WebP (animated or static)
            - Max size: 100KB recommended for animated, 500KB for static
            - Dimensions: 512x512 pixels recommended
          example: "https://example.com/sticker.webp"
        messageId:
          type: string
          description: Optional WhatsApp message ID to reply to (quoted message)
          nullable: true
          example: "3EB0796DC1B61E519"
        delayMessage:
          type: integer
          minimum: 1
          maximum: 15
          description: |
            Optional delay in seconds before sending the message (1-15 seconds).
            Used to simulate human behavior and avoid spam detection.
          nullable: true
          example: 3
        delayTyping:
          type: integer
          minimum: 1
          maximum: 15
          description: |
            Optional typing indicator duration in seconds (1-15 seconds).
            Shows "typing..." to recipient before message is sent.
          nullable: true
          example: 2
        duration:
          type: integer
          enum: [0, 86400, 604800, 7776000]
          description: |
            Optional ephemeral message duration (view-once timer).

            **Values**:
            - `0`: Permanent (default)
            - `86400`: 24 hours (1 day)
            - `604800`: 7 days (1 week)
            - `7776000`: 90 days (3 months)
          nullable: true
          example: 0
        mentioned:
          type: array
          description: |
            Optional array of phone numbers to mention (@mention).
            Users will be notified and text will show @mentions.
          items:
            type: string
            example: "5511888888888"
          nullable: true
        groupMentioned:
          type: array
          description: |
            Optional array of groups/communities to mention.
            Used for cross-community mentions and notifications.
          items:
            $ref: "#/components/schemas/GroupMention"
          nullable: true
        mentionedAll:
          type: boolean
          description: |
            Mention all participants in group (@everyone).
            Only works in groups where user has admin permissions.
          default: false
        privateAnswer:
          type: boolean
          description: |
            Send message as private reply in group context.
            Only recipient will see the message, others see "private reply".
          default: false
      required:
        - phone
        - sticker
      additionalProperties: false
    SendGifRequest:
      type: object
      description: |
        Request body for sending GIF messages (Z-API compatible).

        **GIF Format**: Accepts URL (http/https) or base64 data URI (data:image/gif;base64,...).

        **Key Features**:
        - Animated GIFs supported
        - Optional caption/text
        - Reply to messages via messageId
        - Schedule delivery with delayMessage (1-15s)
        - Show typing indicator with delayTyping (1-15s)
        - View-once messages with viewOnce flag
        - Ephemeral messages with duration (0, 86400, 604800, 7776000)
        - Mention users (@mentions)
        - Mention groups/communities
        - Mention all participants (@everyone)
        - Private reply in groups

        **Message Queue**: Messages are queued per recipient with FIFO ordering.

        **WhatsApp Compatibility**: Uses whatsmeow library with full WhatsApp Web protocol support.
      properties:
        phone:
          type: string
          description: |
            Recipient phone number in international format (without + prefix).

            **Examples**:
            - Individual: `5511999999999` (Brazil mobile)
            - Group: `120363047204807488@g.us`
            - Community: `123456789@newsletter`
          example: "5511999999999"
        gif:
          type: string
          description: |
            GIF file URL or base64 data URI.

            **Supported Formats**:
            - URL: `https://example.com/animation.gif`
            - Base64: `data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==`

            **Requirements**:
            - Format: GIF (animated or static)
            - Max size: 16MB recommended
            - Aspect ratio: Any (auto-adjusted by WhatsApp)
          example: "https://example.com/animation.gif"
        caption:
          type: string
          description: |
            Optional text caption for the GIF.
            Supports @mentions via mentioned/groupMentioned arrays.
          nullable: true
          example: "Check this out! üéâ"
        messageId:
          type: string
          description: Optional WhatsApp message ID to reply to (quoted message)
          nullable: true
          example: "3EB0796DC1B61E519"
        delayMessage:
          type: integer
          minimum: 1
          maximum: 15
          description: |
            Optional delay in seconds before sending the message (1-15 seconds).
            Used to simulate human behavior and avoid spam detection.
          nullable: true
          example: 3
        delayTyping:
          type: integer
          minimum: 1
          maximum: 15
          description: |
            Optional typing indicator duration in seconds (1-15 seconds).
            Shows "typing..." to recipient before message is sent.
          nullable: true
          example: 2
        viewOnce:
          type: boolean
          description: |
            Send as view-once message (disappears after first view).
            Recipient can only view the GIF once.
          default: false
        duration:
          type: integer
          enum: [0, 86400, 604800, 7776000]
          description: |
            Optional ephemeral message duration (view-once timer).

            **Values**:
            - `0`: Permanent (default)
            - `86400`: 24 hours (1 day)
            - `604800`: 7 days (1 week)
            - `7776000`: 90 days (3 months)
          nullable: true
          example: 0
        mentioned:
          type: array
          description: |
            Optional array of phone numbers to mention (@mention).
            Users will be notified and text will show @mentions.
          items:
            type: string
            example: "5511888888888"
          nullable: true
        groupMentioned:
          type: array
          description: |
            Optional array of groups/communities to mention.
            Used for cross-community mentions and notifications.
          items:
            $ref: "#/components/schemas/GroupMention"
          nullable: true
        mentionedAll:
          type: boolean
          description: |
            Mention all participants in group (@everyone).
            Only works in groups where user has admin permissions.
          default: false
        privateAnswer:
          type: boolean
          description: |
            Send message as private reply in group context.
            Only recipient will see the message, others see "private reply".
          default: false
      required:
        - phone
        - gif
      additionalProperties: false
    Contact:
      type: object
      description: |
        WhatsApp contact information (Z-API compatible).

        **Data Sources**:
        - Device contacts (if contact is in user's address book)
        - WhatsApp profile data (notify field from push name)
        - VCard information (if contact shared via vcard)

        **Field Availability**:
        - `phone`: Always present
        - `name`, `short`, `vname`: Only if contact is in address book
        - `notify`: Only if user has interacted with contact

        **Privacy Notes**: Contact data respects WhatsApp privacy settings.
        Users who hide their profile will only show notify field.
      properties:
        phone:
          type: string
          description: |
            WhatsApp phone number in international format (without + prefix).
            This is the WhatsApp JID user part.
          example: "5511999999999"
        name:
          type: string
          description: |
            Full contact name from device address book.
            Only present if contact exists in user's phone contacts.
          nullable: true
          example: "Jo√£o Silva Santos"
        short:
          type: string
          description: |
            First name or nickname from device address book.
            Only present if contact exists in user's phone contacts.
          nullable: true
          example: "Jo√£o"
        notify:
          type: string
          description: |
            Name from WhatsApp settings (push name).
            This is how the user identifies themselves on WhatsApp.
            Present if user has ever interacted with the contact.
          nullable: true
          example: "Jo√£o S."
        vname:
          type: string
          description: |
            Full name from VCard if contact was shared via contact card.
            Only present if contact was received through VCard sharing.
          nullable: true
          example: "Jo√£o Silva Santos"
      required:
        - phone
      additionalProperties: false
    Chat:
      type: object
      description: |
        WhatsApp chat information (Z-API compatible).

        **Chat Types**:
        - Individual chats (person-to-person)
        - Group chats (multiple participants)
        - Community announcement channels

        **Data Sources**:
        - WhatsApp chat metadata (from store)
        - Message history (last message timestamp)
        - Chat settings (mute, archive, pin, spam status)

        **Ordering**: By default, chats are ordered by lastMessageTime descending (most recent first).

        **Unread Counts**: Both `unread` and `messagesUnread` represent the same count (Z-API compatibility).
      properties:
        phone:
          type: string
          description: |
            WhatsApp JID (Java ID) for the chat.

            **Formats**:
            - Individual: `5511999999999@s.whatsapp.net`
            - Group: `120363047204807488@g.us`
            - Newsletter: `123456789@newsletter`
          example: "5511999999999@s.whatsapp.net"
        name:
          type: string
          description: |
            Chat display name.

            **For Individuals**: Contact name (from address book) or WhatsApp push name
            **For Groups**: Group subject/title
            **For Communities**: Community name
          example: "Jo√£o Silva"
        unread:
          type: integer
          description: Count of unread messages in this chat
          minimum: 0
          example: 5
        lastMessageTime:
          type: string
          format: date-time
          description: |
            ISO 8601 timestamp of the last message received in this chat.
            Used for sorting chats by recency.
          example: "2025-01-11T14:30:00Z"
        isMuted:
          type: boolean
          description: Whether notifications are muted for this chat
          example: false
        muteEndTime:
          type: string
          format: date-time
          description: |
            ISO 8601 timestamp when mute expires (if chat is muted).
            Zero value if not muted or muted indefinitely.
          example: "2025-01-12T14:30:00Z"
        isMarkedSpam:
          type: boolean
          description: Whether this chat is marked as spam by the user
          example: false
        archived:
          type: boolean
          description: Whether this chat is archived (hidden from main chat list)
          example: false
        pinned:
          type: boolean
          description: Whether this chat is pinned to the top of the chat list
          example: false
        messagesUnread:
          type: integer
          description: |
            Alternative unread count field for Z-API compatibility.
            Contains the same value as `unread`.
          minimum: 0
          example: 5
        isGroup:
          type: boolean
          description: |
            Whether this is a group chat (true) or individual chat (false).
            Communities are treated as groups.
          example: false
      required:
        - phone
        - name
        - unread
        - lastMessageTime
        - isMuted
        - muteEndTime
        - isMarkedSpam
        - archived
        - pinned
        - messagesUnread
        - isGroup
      additionalProperties: false
    SendMessageResponse:
      type: object
      description: Response after enqueuing a message (Z-API compatible)
      properties:
        zaapId:
          type: string
          description: Unique message ID in our system (Z-API format)
          example: 39BB1684570F00E91090F6BBC7EE7646
        messageId:
          type: string
          description: WhatsApp message ID (initially same as zaapId, updated after send)
          example: 39BB1684570F00E91090F6BBC7EE7646
        id:
          type: string
          description: Same as messageId for Zapier compatibility
          example: 39BB1684570F00E91090F6BBC7EE7646
        status:
          type: string
          description: Queue status for the enqueued message (always queued on success)
          example: queued
        whatsAppStatus:
          $ref: "#/components/schemas/WhatsAppStatus"
      required:
        - zaapId
        - messageId
        - id
        - status
      additionalProperties: false
    WhatsAppStatus:
      type: object
      description: Snapshot of the WhatsApp connectivity state when the message was enqueued
      properties:
        connected:
          type: boolean
          description: Indicates if the WhatsApp client is connected at enqueue time
        lastSeen:
          type: string
          format: date-time
          nullable: true
          description: Timestamp of the last known successful connection (RFC3339)
        reason:
          type: string
          description: Reason for the current connectivity state (connected, reconnecting, logged_out, etc.)
          example: disconnected
        workerId:
          type: string
          nullable: true
          description: Identifier of the worker handling the instance, when available
    SendLocationRequest:
      type: object
      description: Request body for sending location messages
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        latitude:
          type: number
          format: double
          description: Location latitude
          example: -23.55052
        longitude:
          type: number
          format: double
          description: Location longitude
          example: -46.633308
        name:
          type: string
          description: Optional location name/title
          nullable: true
          example: Paulista Avenue
        address:
          type: string
          description: Optional location address
          nullable: true
          example: Av. Paulista, 1578 - S√£o Paulo, SP
        messageId:
          type: string
          description: Optional WhatsApp message ID to reply to
          nullable: true
        delayMessage:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending
          nullable: true
        delayTyping:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds
          nullable: true
        duration:
          type: integer
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
          nullable: true
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members
          default: false
      required:
        - phone
        - latitude
        - longitude
      additionalProperties: false
    SendContactRequest:
      type: object
      description: Request body for sending a single contact card (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        contactName:
          type: string
          description: Full name of the contact (Z-API compatible field)
          example: John Doe
        contactPhone:
          type: string
          description: Phone number of the contact in international format (Z-API compatible field)
          example: "5511999999999"
        contactBusinessDescription:
          type: string
          description: Optional business or organization description of the contact (Z-API compatible field)
          nullable: true
          example: Sales Manager at Example Corp
        firstName:
          type: string
          description: Given name component for the vCard
          nullable: true
          example: John
        lastName:
          type: string
          description: Family name component for the vCard
          nullable: true
          example: Doe
        middleName:
          type: string
          description: Middle name or additional names
          nullable: true
          example: Michael
        namePrefix:
          type: string
          description: Honorific prefix (e.g. Dr., Mr., Ms.)
          nullable: true
          example: Dr.
        nameSuffix:
          type: string
          description: Honorific suffix (e.g. Jr., Sr.)
          nullable: true
          example: Jr.
        nickname:
          type: string
          description: Nickname or alias for the contact
          nullable: true
          example: Johnny
        email:
          type: string
          format: email
          description: Email address associated with the contact
          nullable: true
          example: john@example.com
        url:
          type: string
          format: uri
          description: Website or social media URL for the contact
          nullable: true
          example: https://example.com/john
        organization:
          type: string
          description: Organization or company name (overrides contactBusinessDescription when provided)
          nullable: true
          example: Example Corp
        jobTitle:
          type: string
          description: Job title or position
          nullable: true
          example: Sales Manager
        address:
          allOf:
            - $ref: "#/components/schemas/ContactAddress"
          nullable: true
          description: Structured address details for the vCard
        birthday:
          type: string
          format: date
          description: Birthday in YYYY-MM-DD format
          nullable: true
          example: "1990-05-17"
        note:
          type: string
          description: Additional notes or comments to include in the vCard
          nullable: true
          example: Met at WhatsApp Summit 2024
        messageId:
          type: string
          description: Optional WhatsApp message ID to reply to
          nullable: true
        delayMessage:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending
          nullable: true
        delayTyping:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds
          nullable: true
        duration:
          type: integer
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
          nullable: true
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members
          default: false
        privateAnswer:
          type: boolean
          description: For group messages - if true, reply privately to the sender instead of the group
          default: false
      required:
        - phone
        - contactName
        - contactPhone
      additionalProperties: false
    ContactAddress:
      type: object
      description: Structured address details included in contact vCards
      properties:
        type:
          type: string
          description: Address type (e.g. HOME, WORK)
          nullable: true
          example: WORK
        postBox:
          type: string
          description: Post office box number
          nullable: true
          example: "1234"
        extended:
          type: string
          description: Extended address information such as apartment or suite
          nullable: true
          example: Suite 1203
        street:
          type: string
          description: Street address
          nullable: true
          example: Av. Paulista, 1578
        city:
          type: string
          description: City or locality
          nullable: true
          example: S√£o Paulo
        region:
          type: string
          description: State, province or region
          nullable: true
          example: SP
        postalCode:
          type: string
          description: Postal or ZIP code
          nullable: true
          example: "01310-200"
        country:
          type: string
          description: Country name
          nullable: true
          example: Brasil
      additionalProperties: false
    ContactInfo:
      type: object
      description: Contact information for multiple contacts (Z-API compatible)
      properties:
        contactName:
          type: string
          description: Full name of the contact
          example: John Doe
        contactPhone:
          type: string
          description: Phone number of the contact in international format
          example: "5511999999999"
        contactBusinessDescription:
          type: string
          description: Optional business description of the contact
          nullable: true
          example: Sales Manager
        firstName:
          type: string
          description: Given name component for the vCard
          nullable: true
        lastName:
          type: string
          description: Family name component for the vCard
          nullable: true
        middleName:
          type: string
          description: Middle name or additional names
          nullable: true
        namePrefix:
          type: string
          description: Honorific prefix (e.g. Dr., Mr., Ms.)
          nullable: true
        nameSuffix:
          type: string
          description: Honorific suffix (e.g. Jr., Sr.)
          nullable: true
        nickname:
          type: string
          description: Nickname or alias for the contact
          nullable: true
        email:
          type: string
          format: email
          description: Email address associated with the contact
          nullable: true
        url:
          type: string
          format: uri
          description: Website or social media URL for the contact
          nullable: true
        organization:
          type: string
          description: Organization or company name
          nullable: true
        jobTitle:
          type: string
          description: Job title or position
          nullable: true
        address:
          allOf:
            - $ref: "#/components/schemas/ContactAddress"
          nullable: true
          description: Structured address details for the vCard
        birthday:
          type: string
          format: date
          description: Birthday in YYYY-MM-DD format
          nullable: true
        note:
          type: string
          description: Additional notes or comments to include in the vCard
          nullable: true
      required:
        - contactName
        - contactPhone
      additionalProperties: false
    SendContactsRequest:
      type: object
      description: Request body for sending multiple contact cards (Z-API compatible)
      properties:
        phone:
          type: string
          description: Recipient phone number or WhatsApp JID
          example: "5511999999999"
        contacts:
          type: array
          items:
            $ref: "#/components/schemas/ContactInfo"
          description: Array of contacts to send (1-10 items, matching WhatsApp UI behaviour)
          minItems: 1
          maxItems: 10
        messageId:
          type: string
          description: Optional WhatsApp message ID to reply to
          nullable: true
        delayMessage:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional delay in seconds before sending
          nullable: true
        delayTyping:
          type: integer
          minimum: 1
          maximum: 15
          description: Optional typing indicator duration in seconds
          nullable: true
        duration:
          type: integer
          description: Ephemeral message duration in seconds
          enum:
            - 0
            - 86400
            - 604800
            - 7776000
          nullable: true
        mentioned:
          type: array
          items:
            type: string
          description: Array of phone numbers to mention
        groupMentioned:
          type: array
          items:
            $ref: "#/components/schemas/GroupMention"
          description: Array of groups to mention in communities
        mentionedAll:
          type: boolean
          description: Mention all group members
          default: false
        privateAnswer:
          type: boolean
          description: For group messages - if true, reply privately to the sender instead of the group
          default: false
      required:
        - phone
        - contacts
      additionalProperties: false
    BooleanStatusResponse:
      type: object
      description: "Z-API compatible acknowledgement payload using a boolean `value`."
      properties:
        value:
          type: boolean
          description: "Indicates whether the operation succeeded (`true`) or failed (`false`)."
      required:
        - value
      additionalProperties: false
    BooleanSuccessResponse:
      type: object
      description: "Z-API compatible acknowledgement payload using a boolean `success`."
      properties:
        success:
          type: boolean
          description: "Indicates whether the operation succeeded (`true`) or failed (`false`)."
      required:
        - success
      additionalProperties: false
    InvitationLinkResponse:
      type: object
      description: Response containing a regenerated invitation link.
      properties:
        invitationLink:
          type: string
          format: uri
          description: Invitation link generated by WhatsApp.
      required:
        - invitationLink
      additionalProperties: false
    GroupInvitationLinkResponse:
      type: object
      description: Response containing the current invitation link for a specific group.
      properties:
        phone:
          type: string
          description: "Group JID that owns the invitation link (suffix `-group`)."
        invitationLink:
          type: string
          format: uri
          description: Invitation link generated by WhatsApp.
      required:
        - phone
        - invitationLink
      additionalProperties: false
    GroupListItem:
      type: object
      description: "Z-API compatible summary entry returned by `/groups`."
      properties:
        archived:
          type: boolean
          description: Indicates whether the chat is archived.
        pinned:
          type: boolean
          description: Indicates whether the chat is pinned.
        phone:
          type: string
          description: "Group JID identifier (`{id}-group`)."
        unread:
          type: string
          description: Number of unread messages represented as string for Z-API parity.
        name:
          type: string
          description: Group name.
        lastMessageTime:
          type: string
          description: Millisecond timestamp of the last interaction represented as string.
        muteEndTime:
          type: string
          nullable: true
          description: "Millisecond timestamp when mute expires (`null` or `-1` for indefinitely muted)."
        isMuted:
          type: string
          description: '`"0"` when notifications are enabled and `"1"` when muted.'
        isMarkedSpam:
          type: boolean
          description: Indicates whether the chat is marked as spam.
        isGroup:
          type: boolean
          description: "Always `true` for group listings."
        messagesUnread:
          type: string
          description: Deprecated unread counter kept for compatibility.
      required:
        - archived
        - pinned
        - phone
        - unread
        - name
        - lastMessageTime
        - isMuted
        - isMarkedSpam
        - isGroup
        - messagesUnread
      additionalProperties: false
    GroupParticipant:
      type: object
      description: Participant metadata within a WhatsApp group.
      properties:
        phone:
          type: string
          description: Participant phone number or JID.
        lid:
          type: string
          nullable: true
          description: LID value returned by WhatsApp (when available).
        isAdmin:
          type: boolean
          description: Indicates whether the participant is an administrator.
        isSuperAdmin:
          type: boolean
          description: Indicates whether the participant is the group owner.
        short:
          type: string
          nullable: true
          description: Short name provided by WhatsApp (when available).
        name:
          type: string
          nullable: true
          description: Display name for the participant (when available).
      required:
        - phone
        - isAdmin
        - isSuperAdmin
      additionalProperties: false
    GroupCreateRequest:
      type: object
      description: Request body for creating a new WhatsApp group.
      properties:
        autoInvite:
          type: boolean
          description: When true, sends private invites to contacts that cannot be added immediately.
        groupName:
          type: string
          description: Display name for the newly created group.
        phones:
          type: array
          description: Array of participant phone numbers (E.164) to add to the group.
          items:
            type: string
          minItems: 1
      required:
        - autoInvite
        - groupName
        - phones
      additionalProperties: false
    GroupCreateResponse:
      type: object
      description: Response returned after creating a group.
      properties:
        phone:
          type: string
          description: Group JID generated by WhatsApp.
        invitationLink:
          type: string
          format: uri
          description: Invitation link returned by WhatsApp for the new group.
      required:
        - phone
        - invitationLink
      additionalProperties: false
    GroupUpdateNameRequest:
      type: object
      description: Request body for updating an existing group name.
      properties:
        groupId:
          type: string
          description: "Group JID (suffix `-group`)."
        groupName:
          type: string
          description: New group name.
      required:
        - groupId
        - groupName
      additionalProperties: false
    GroupUpdatePhotoRequest:
      type: object
      description: Request body for updating a group picture.
      properties:
        groupId:
          type: string
          description: "Group JID (suffix `-group`)."
        groupPhoto:
          type: string
          description: URL or base64 data URL representing the group picture.
      required:
        - groupId
        - groupPhoto
      additionalProperties: false
    GroupAddParticipantsRequest:
      type: object
      description: Request body for adding participants to a group.
      properties:
        autoInvite:
          type: boolean
          description: Sends private invites for contacts that could not be added automatically.
        groupId:
          type: string
          description: "Group JID (suffix `-group`)."
        phones:
          type: array
          description: Array of participant phone numbers (E.164) to add.
          items:
            type: string
          minItems: 1
      required:
        - autoInvite
        - groupId
        - phones
      additionalProperties: false
    GroupParticipantListRequest:
      type: object
      description: Request body for removing, approving or rejecting group participants.
      properties:
        groupId:
          type: string
          description: "Group JID (suffix `-group`)."
        phones:
          type: array
          description: Array of participant phone numbers (E.164) targeted by the operation.
          items:
            type: string
          minItems: 1
      required:
        - groupId
        - phones
      additionalProperties: false
    GroupLeaveRequest:
      type: object
      description: Request body for leaving a group.
      properties:
        groupId:
          type: string
          description: "Group JID (suffix `-group`)."
      required:
        - groupId
      additionalProperties: false
    GroupMetadataResponse:
      type: object
      description: Full metadata payload for a WhatsApp group, including participants and invitation link.
      properties:
        phone:
          type: string
          description: "Group JID (suffix `-group`)."
        description:
          type: string
          nullable: true
          description: Group description text.
        owner:
          type: string
          description: Phone number of the group creator.
        subject:
          type: string
          description: Current group subject (name).
        creation:
          type: integer
          format: int64
          description: Creation timestamp in milliseconds since epoch.
        invitationLink:
          type: string
          format: uri
          nullable: true
          description: Invitation link for the group (available to admins).
        invitationLinkError:
          type: string
          nullable: true
          description: Error returned when the invitation link cannot be retrieved.
        communityId:
          type: string
          nullable: true
          description: Community identifier when the group belongs to a community.
        adminOnlyMessage:
          type: boolean
          description: Indicates whether only admins may send messages.
        adminOnlySettings:
          type: boolean
          description: Indicates whether only admins may change group settings.
        requireAdminApproval:
          type: boolean
          description: Indicates whether new participants require admin approval.
        isGroupAnnouncement:
          type: boolean
          description: Indicates whether the group is configured as an announcements group.
        participants:
          type: array
          description: Array of group participants.
          items:
            $ref: "#/components/schemas/GroupParticipant"
        subjectTime:
          type: integer
          format: int64
          nullable: true
          description: Timestamp of the last subject change.
        subjectOwner:
          type: string
          nullable: true
          description: Phone number of the participant who last changed the subject.
      required:
        - phone
        - owner
        - subject
        - creation
        - adminOnlyMessage
        - adminOnlySettings
        - requireAdminApproval
        - isGroupAnnouncement
        - participants
      additionalProperties: false
    GroupInvitationMetadataResponse:
      type: object
      description: Metadata returned when resolving a group invitation link.
      properties:
        phone:
          type: string
          description: "Group JID (suffix `-group`)."
        owner:
          type: string
          description: Phone number of the group creator.
        subject:
          type: string
          description: Group subject (name).
        description:
          type: string
          nullable: true
          description: Group description text.
        creation:
          type: integer
          format: int64
          description: Creation timestamp in milliseconds since epoch.
        invitationLink:
          type: string
          format: uri
          description: Invitation link used in the lookup.
        contactsCount:
          type: integer
          description: Total number of contacts in the group.
        participantsCount:
          type: integer
          description: Total number of participants in the group.
        participants:
          type: array
          description: Array of group participants.
          items:
            $ref: "#/components/schemas/GroupParticipant"
        subjectTime:
          type: integer
          format: int64
          nullable: true
          description: Timestamp of the last subject change.
        subjectOwner:
          type: string
          nullable: true
          description: Phone number that owns the invitation subject.
      required:
        - phone
        - owner
        - subject
        - creation
        - invitationLink
        - contactsCount
        - participantsCount
        - participants
      additionalProperties: false
    GroupSettingsRequest:
      type: object
      description: Request body for updating group settings.
      properties:
        phone:
          type: string
          description: "Group JID (suffix `-group`)."
        adminOnlyMessage:
          type: boolean
          description: When true, only admins can send messages.
        adminOnlySettings:
          type: boolean
          description: When true, only admins can change group settings.
        requireAdminApproval:
          type: boolean
          description: When true, new participants must be approved by an admin.
        adminOnlyAddMember:
          type: boolean
          description: When true, only admins can add members.
      required:
        - phone
        - adminOnlyMessage
        - adminOnlySettings
        - requireAdminApproval
        - adminOnlyAddMember
      additionalProperties: false
    GroupDescriptionRequest:
      type: object
      description: Request body for updating a group description.
      properties:
        groupId:
          type: string
          description: "Group JID (suffix `-group`)."
        groupDescription:
          type: string
          description: New group description text.
      required:
        - groupId
        - groupDescription
      additionalProperties: false
    CommunityCreateRequest:
      type: object
      description: Request body for creating a new community.
      properties:
        name:
          type: string
          description: Name of the community.
        description:
          type: string
          nullable: true
          description: Optional description for the community.
      required:
        - name
      additionalProperties: false
    CommunitySubGroup:
      type: object
      description: Representation of a subgroup linked to a community.
      properties:
        name:
          type: string
          description: Group display name.
        phone:
          type: string
          description: "Group JID (suffix `-group`)."
        isGroupAnnouncement:
          type: boolean
          description: Indicates whether the subgroup is an announcements-only group.
      required:
        - name
        - phone
        - isGroupAnnouncement
      additionalProperties: false
    CommunityCreateResponse:
      type: object
      description: Response returned after creating a community.
      properties:
        id:
          type: string
          description: Community identifier assigned by WhatsApp.
        subGroups:
          type: array
          description: Groups automatically linked to the community (includes the announcements group).
          items:
            $ref: "#/components/schemas/CommunitySubGroup"
      required:
        - id
        - subGroups
      additionalProperties: false
    CommunityListItem:
      type: object
      description: Community summary returned by the listing endpoint.
      properties:
        name:
          type: string
          description: Community display name.
        id:
          type: string
          description: Community identifier.
      required:
        - name
        - id
      additionalProperties: false
    CommunityLinkRequest:
      type: object
      description: Request body for linking groups to a community.
      properties:
        communityId:
          type: string
          description: Community identifier.
        groupsPhones:
          type: array
          description: Array of group JIDs to link to the community.
          items:
            type: string
          minItems: 1
      required:
        - communityId
        - groupsPhones
      additionalProperties: false
    CommunitySettingsRequest:
      type: object
      description: Request body for updating community settings.
      properties:
        communityId:
          type: string
          description: Community identifier.
        whoCanAddNewGroups:
          type: string
          description: Defines who can add new groups to the community (`admins` or `all`).
          enum:
            - admins
            - all
      required:
        - communityId
        - whoCanAddNewGroups
      additionalProperties: false
    CommunityDescriptionRequest:
      type: object
      description: Request body for updating the community description.
      properties:
        communityId:
          type: string
          description: Community identifier.
        communityDescription:
          type: string
          description: New community description text.
          minLength: 1
      required:
        - communityId
        - communityDescription
      additionalProperties: false
    CommunityMetadataResponse:
      type: object
      description: Metadata returned for a community.
      properties:
        name:
          type: string
          description: Community display name.
        id:
          type: string
          description: Community identifier.
        description:
          type: string
          nullable: true
          description: Community description text.
        subGroups:
          type: array
          description: Linked groups.
          items:
            $ref: "#/components/schemas/CommunitySubGroup"
      required:
        - name
        - id
        - subGroups
      additionalProperties: false
    CommunityAddParticipantsRequest:
      type: object
      description: Request body for adding participants to a community announcements group.
      properties:
        autoInvite:
          type: boolean
          description: Sends private invites for contacts that could not be added automatically.
        communityId:
          type: string
          description: Community identifier.
        phones:
          type: array
          description: Array of participant phone numbers (E.164) to add.
          items:
            type: string
          minItems: 1
      required:
        - autoInvite
        - communityId
        - phones
      additionalProperties: false
    CommunityParticipantListRequest:
      type: object
      description: Request body for removing participants from a community announcements group.
      properties:
        communityId:
          type: string
          description: Community identifier.
        phones:
          type: array
          description: Array of participant phone numbers (E.164) targeted by the operation.
          items:
            type: string
          minItems: 1
      required:
        - communityId
        - phones
      additionalProperties: false
    CommunityAdminMutationRequest:
      type: object
      description: Request body for promoting or demoting community administrators.
      properties:
        communityId:
          type: string
          description: Community identifier.
        phones:
          type: array
          description: Array of participant phone numbers (E.164) targeted by the operation.
          items:
            type: string
          minItems: 1
      required:
        - communityId
        - phones
      additionalProperties: false
    NewsletterCreateRequest:
      type: object
      description: Request body for creating a WhatsApp channel (newsletter).
      properties:
        name:
          type: string
          description: Channel display name.
        description:
          type: string
          nullable: true
          description: Optional channel description.
      required:
        - name
      additionalProperties: false
    NewsletterCreateResponse:
      type: object
      description: Response returned after creating a channel.
      properties:
        id:
          type: string
          description: "Channel identifier (always suffixed with `@newsletter`)."
      required:
        - id
      additionalProperties: false
    NewsletterUpdatePictureRequest:
      type: object
      description: Request body for updating the channel profile picture.
      properties:
        id:
          type: string
          description: "Channel identifier (suffix `@newsletter`)."
        pictureUrl:
          type: string
          description: URL or base64 data URL for the new picture.
      required:
        - id
        - pictureUrl
      additionalProperties: false
    NewsletterUpdateNameRequest:
      type: object
      description: Request body for updating the channel name.
      properties:
        id:
          type: string
          description: "Channel identifier (suffix `@newsletter`)."
        name:
          type: string
          description: New channel name.
      required:
        - id
        - name
      additionalProperties: false
    NewsletterUpdateDescriptionRequest:
      type: object
      description: Request body for updating the channel description.
      properties:
        id:
          type: string
          description: "Channel identifier (suffix `@newsletter`)."
        description:
          type: string
          description: New channel description.
      required:
        - id
        - description
      additionalProperties: false
    NewsletterIdRequest:
      type: object
      description: Request body for operations that only require the channel identifier.
      properties:
        id:
          type: string
          description: "Channel identifier (suffix `@newsletter`)."
      required:
        - id
      additionalProperties: false
    NewsletterMetadata:
      type: object
      description: Metadata describing a channel (newsletter).
      properties:
        id:
          type: string
          description: "Channel identifier (suffix `@newsletter`)."
        creationTime:
          type: string
          description: Unix timestamp in seconds represented as string.
        state:
          type: string
          description: "Channel state reported by WhatsApp (e.g. `ACTIVE`, `NON_EXISTING`)."
        name:
          type: string
          description: Channel display name.
        description:
          type: string
          nullable: true
          description: Channel description text.
        subscribersCount:
          type: string
          description: Total subscriber count represented as string.
        inviteLink:
          type: string
          format: uri
          nullable: true
          description: Invitation link for the channel.
        verification:
          type: string
          description: "Channel verification status (`VERIFIED`, `UNVERIFIED`)."
        picture:
          type: string
          format: uri
          nullable: true
          description: URL for the channel avatar.
        preview:
          type: string
          format: uri
          nullable: true
          description: URL for the preview image.
        viewMetadata:
          type: object
          description: Metadata about how the authenticated account sees the channel.
          properties:
            mute:
              type: string
              description: "Indicates whether the channel is muted (`ON`, `OFF`)."
            role:
              type: string
              description: "Role of the authenticated account (`OWNER`, `SUBSCRIBER`)."
          required:
            - mute
            - role
          additionalProperties: false
      required:
        - id
        - creationTime
        - state
        - name
        - subscribersCount
        - verification
        - viewMetadata
      additionalProperties: false
    NewsletterSearchFilters:
      type: object
      description: Filters applied when searching for channels.
      properties:
        countryCodes:
          type: array
          description: List of ISO country codes used to filter channels.
          items:
            type: string
          minItems: 1
      required:
        - countryCodes
      additionalProperties: false
    NewsletterSearchRequest:
      type: object
      description: Request body for searching public channels.
      properties:
        limit:
          type: integer
          minimum: 1
          description: Maximum number of results to return.
        view:
          type: string
          description: "Optional view name used by WhatsApp (`RECOMMENDED`, `TRENDING`, `POPULAR`, `NEW`)."
          enum:
            - RECOMMENDED
            - TRENDING
            - POPULAR
            - NEW
        filters:
          $ref: "#/components/schemas/NewsletterSearchFilters"
        searchText:
          type: string
          nullable: true
          description: Optional free text search term.
      required:
        - limit
        - filters
      additionalProperties: false
    NewsletterSearchItem:
      type: object
      description: Single result entry returned by the search endpoint.
      properties:
        id:
          type: string
          description: "Channel identifier (suffix `@newsletter`)."
        name:
          type: string
          description: Channel display name.
        description:
          type: string
          nullable: true
          description: Channel description snippet.
        subscribersCount:
          type: string
          description: Total subscriber count represented as string.
        picture:
          type: string
          format: uri
          nullable: true
          description: Channel picture URL when available.
      required:
        - id
        - name
        - subscribersCount
      additionalProperties: false
    NewsletterSearchResponse:
      type: object
      description: Response payload returned by the newsletter search endpoint.
      properties:
        cursor:
          type: string
          nullable: true
          description: Cursor returned by WhatsApp for subsequent pages (currently always null).
        data:
          type: array
          description: List of channels matching the search criteria.
          items:
            $ref: "#/components/schemas/NewsletterSearchItem"
      required:
        - cursor
        - data
      additionalProperties: false
    NewsletterSettingsRequest:
      type: object
      description: Request body for updating newsletter settings.
      properties:
        reactionCodes:
          type: string
          description: Restriction applied to reactions within the channel.
          enum:
            - basic
            - all
      required:
        - reactionCodes
      additionalProperties: false
    NewsletterAdminActionRequest:
      type: object
      description: Request body for admin invite management within a channel.
      properties:
        phone:
          type: string
          description: Phone number of the target administrator.
      required:
        - phone
      additionalProperties: false
    SendNewsletterAdminInviteRequest:
      type: object
      description: Request body for sending admin invite to a channel participant.
      properties:
        id:
          type: string
          description: Channel identifier (suffix `@newsletter`).
        phone:
          type: string
          description: Phone number of the participant to invite as administrator.
      required:
        - id
        - phone
      additionalProperties: false
    NewsletterTransferOwnershipRequest:
      type: object
      description: Request body for transferring channel ownership.
      properties:
        phone:
          type: string
          description: Phone number of the participant who will become the new owner.
        quitAdmin:
          type: boolean
          description: When true, the current owner leaves the admin role after transfer.
          default: false
      required:
        - phone
      additionalProperties: false
    NewsletterTransferOwnershipResponse:
      type: object
      description: Response returned after attempting to transfer channel ownership.
      properties:
        value:
          type: boolean
          description: Indicates whether the transfer succeeded.
        message:
          type: string
          nullable: true
          description: Optional error message when the transfer fails.
      required:
        - value
      additionalProperties: false
    PhoneExistsResponse:
      type: object
      description: |
        Z-API compatible response for phone number validation.
        Returns whether a phone number is registered on WhatsApp along with phone and LID.
      properties:
        exists:
          type: boolean
          description: true if the phone number has WhatsApp, false otherwise
          example: true
        phone:
          type: string
          nullable: true
          description: Phone number if exists on WhatsApp, null otherwise
          example: "5521979232690"
        lid:
          type: string
          nullable: true
          description: LID (Linked ID) if available, null otherwise
          example: "140712372899859@lid"
      required:
        - exists
      additionalProperties: false
    PhoneExistsBatchRequest:
      type: object
      description: |
        Z-API compatible request for batch phone number validation.
        Allows validating up to 50,000 phone numbers in a single request.
      properties:
        phones:
          type: array
          description: |
            Array of phone numbers to validate.
            Each number must be in international format (DDI DDD NUMBER).
            Numbers only - no formatting, spaces, or masks.
          items:
            type: string
            pattern: "^\\d+$"
          minItems: 1
          maxItems: 50000
          example:
            - "554499999999"
            - "554488888888"
      required:
        - phones
      additionalProperties: false
    PhoneExistsBatchResponse:
      type: object
      description: |
        Z-API compatible response for batch phone number validation.
        Contains the validation result for each phone number in the batch.
      properties:
        exists:
          type: boolean
          description: true if the phone number has WhatsApp, false otherwise
          example: true
        inputPhone:
          type: string
          description: Phone number as sent in the request (may or may not include ninth digit)
          example: "554499999999"
        outputPhone:
          type: string
          description: |
            Formatted phone number from WhatsApp response.
            Reflects the WhatsApp registration and includes ninth digit if applicable.
          example: "554499999999"
      required:
        - exists
        - inputPhone
        - outputPhone
      additionalProperties: false
paths:
  /health:
    get:
      tags:
        - System
      summary: Liveness probe
      description: Returns a JSON object indicating that the API process is running.
      operationId: healthLiveness
      responses:
        "200":
          description: Process is alive and capable of serving traffic.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HealthStatusResponse"
  /ready:
    get:
      tags:
        - System
      summary: Readiness probe
      description:
        "Checks critical dependencies (Postgres, Redis lock manager). The service is considered ready when all
        reported components are `healthy`. Any `degraded` or `unhealthy` status results in a `503` response.

        "
      operationId: healthReadiness
      responses:
        "200":
          description: Service is ready to receive traffic.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReadinessResponse"
              examples:
                ready:
                  value:
                    ready: true
                    observed_at: "2024-05-28T10:59:00Z"
                    checks:
                      database:
                        status: healthy
                        duration_ms: 12
                      redis:
                        status: healthy
                        duration_ms: 8
                        circuit_state: CLOSED
        "503":
          description: At least one dependency is degraded or unavailable.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReadinessResponse"
              examples:
                degraded:
                  value:
                    ready: false
                    observed_at: "2024-05-28T11:01:00Z"
                    checks:
                      database:
                        status: unhealthy
                        error: database not configured
                        duration_ms: 3
                      redis:
                        status: degraded
                        error: fallback lock in use
                        duration_ms: 7
                        circuit_state: OPEN
  /instances:
    get:
      tags:
        - Partner
      summary: List partner instances
      description: Returns a paginated list of managed WhatsApp instances for the partner account.
      operationId: listInstances
      security:
        - PartnerBearer: []
      parameters:
        - in: query
          name: query
          schema:
            type: string
          description: Filter results by instance name or session name.
        - in: query
          name: middleware
          schema:
            type: string
          description: Informational middleware flag (matches Z-API contract).
        - in: query
          name: page
          required: true
          schema:
            type: integer
            minimum: 1
          description: Page number (1-indexed).
          example: 1
        - in: query
          name: pageSize
          required: true
          schema:
            type: integer
            minimum: 1
            maximum: 200
          description: Page size (defaults to 15 as in Z-API examples).
          example: 15
      responses:
        "200":
          description: List of instances owned by the partner.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InstanceListResponse"
        "401":
          description: Missing or invalid Partner bearer token.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/integrator/on-demand:
    post:
      tags:
        - Partner
      summary: Partner creates an instance on demand
      description: Mirrors Z-API partner endpoint for provisioning instances via integrator credentials.
      operationId: partnerCreateInstance
      security:
        - PartnerBearer: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PartnerInstanceCreateRequest"
      responses:
        "201":
          description: Instance created for partner
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PartnerInstanceCreateResponse"
        "400":
          description: Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}:
    delete:
      tags:
        - Partner
      summary: Permanently delete instance (Partner API)
      description: "**‚ö†Ô∏è IRREVERSIBLE OPERATION ‚ö†Ô∏è**


        Permanently deletes a WhatsApp instance including all associated data from both databases.


        **Complete Cleanup Operations:**

        - ‚úÖ Disconnects the WhatsApp client immediately

        - ‚úÖ Disables auto-reconnect to prevent reconnection

        - ‚úÖ **Deletes device store from whatsmeow_store database**

        - ‚úÖ Stops lock refresh goroutine

        - ‚úÖ Releases Redis distributed lock

        - ‚úÖ Removes client from in-memory registry

        - ‚úÖ **Deletes instance record from api_core database**

        - ‚úÖ **Deletes all webhook configurations (CASCADE)**

        - ‚úÖ **Deletes all webhook outbox entries (CASCADE)**

        - ‚úÖ **Deletes all webhook DLQ entries (manual deletion)**

        - ‚úÖ **Deletes all instance event logs (manual deletion)**


        **Database Deletion Strategy:**

        - Uses transaction to ensure ACID compliance

        - Manually deletes tables without CASCADE constraints (webhook_dlq, instance_events_log)

        - Relies on CASCADE for webhook_configs and webhook_outbox

        - Deletes device credentials from separate whatsmeow_store database


        **Authentication:**

        - Requires Partner Bearer token only (no instance token needed)

        - This is a Partner-level administrative operation


        **Use Cases:**

        - Cleanup of test/development instances

        - Customer offboarding and data removal

        - GDPR/data deletion compliance requests

        - Freeing resources from inactive instances


        **Important Notes:**

        - **This operation cannot be undone or reversed**

        - All data associated with the instance is permanently lost

        - The instance cannot be recovered or reconnected after deletion

        - Consider using `/disconnect` if you need to preserve the instance record

        "
      operationId: partnerDeleteInstance
      security:
        - PartnerBearer: []
      parameters:
        - name: instanceId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Unique instance identifier to permanently delete.
          example: 550e8400-e29b-41d4-a716-446655440000
      responses:
        "200":
          description: Instance permanently deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - deleted
                    description: Confirmation that instance was deleted
                    example: deleted
                required:
                  - status
              example:
                status: deleted
        "400":
          description: Invalid instance ID format (must be valid UUID)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: invalid instance id
        "401":
          description: Missing or invalid Partner bearer token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: unauthorized
        "404":
          description: Instance not found in database
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: instance not found
        "500":
          description: Internal error during deletion (transaction may have been rolled back)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "delete instance from database: connection error"
  /instances/{instanceId}/token/{instanceToken}/status:
    get:
      tags:
        - Instances
      summary: Retrieve instance status
      description: "Mirrors Z-API `/status`, returning live connectivity information for a provisioned instance."
      operationId: getInstanceStatus
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Instance status snapshot
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InstanceStatusResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/qr-code:
    get:
      tags:
        - Instances
      summary: Fetch QR code for pairing
      description: "Mirrors Z-API `/qr-code`, returning the current QR string required to link a phone."
      operationId: getInstanceQRCode
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Current QR code payload (text/plain)
          content:
            text/plain:
              schema:
                type: string
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/qr-code/image:
    get:
      tags:
        - Instances
      summary: Fetch QR code as base64 image
      description: "Mirrors Z-API `/qr-code/image`, returning a PNG image encoded in base64 for rendering in clients."
      operationId: getInstanceQRCodeImage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: QR code rendered as base64 PNG data URL.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QRCodeImageResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/device:
    get:
      tags:
        - Instances
      summary: Retrieve device metadata
      description: "Mirrors Z-API `/device`, returning information about the currently linked phone."
      operationId: getInstanceDevice
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Device metadata currently associated with the instance.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InstanceDeviceResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/phone-code/{phone}:
    get:
      tags:
        - Instances
      summary: Fetch phone pairing code
      description:
        Mirrors Z-API `/phone-code/{phone}`, returning a code that can be typed into WhatsApp instead of scanning
        the QR code.
      operationId: getInstancePhoneCode
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: path
          name: phone
          required: true
          schema:
            type: string
          description: International phone number (numbers only) used for code pairing.
      responses:
        "200":
          description: Pairing code generated for the provided phone number.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PhoneCodeResponse"
        "400":
          description: Invalid phone number supplied.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/restart:
    get:
      tags:
        - Instances
      summary: Restart an instance connection
      description: "Equivalent to Z-API `/restart`, forcing the client to reconnect to WhatsApp."
      operationId: restartInstanceGet
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Restart signal accepted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
              example:
                value: true
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      tags:
        - Instances
      summary: Restart an instance connection
      description: "Equivalent to Z-API `/restart`, forcing the client to reconnect to WhatsApp."
      operationId: restartInstance
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Restart signal accepted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
              example:
                value: true
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/disconnect:
    get:
      tags:
        - Instances
      summary: Complete disconnect with cleanup (Logout)
      description: |
        Performs a complete disconnect with full cleanup, equivalent to logout/reset.

        **This operation performs the following actions:**

        - ‚úÖ Disables auto-reconnect to prevent automatic reconnection
        - ‚úÖ Disconnects WebSocket connection immediately
        - ‚úÖ **Deletes device store from whatsmeow_store database**
        - ‚úÖ Stops lock refresh goroutine
        - ‚úÖ Releases Redis distributed lock
        - ‚úÖ Removes client from in-memory registry
        - ‚úÖ Clears store_jid in api_core database (sets to NULL)

        **Important Notes:**

        - The instance record remains in the database (status becomes "disconnected")
        - To permanently delete the instance, use `DELETE /partner/instances/{instanceId}`
        - After disconnect, you can reconnect by calling `/qrcode` or `/pairphone`
        - All webhook configurations are preserved

        **Use Cases:**

        - User logout from WhatsApp
        - Switching to a different phone number
        - Temporary disconnection for maintenance
        - Resetting a stuck connection

        **Comparison with DELETE endpoint:**

        - Disconnect: Keeps instance record, allows reconnection
        - Delete: Permanent removal, cannot be recovered
      operationId: disconnectInstanceGet
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Complete disconnect with cleanup accepted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
              example:
                value: true
        "401":
          description: Unauthorized (invalid client token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      tags:
        - Instances
      summary: Complete disconnect with cleanup (Logout)
      description:
        'Performs a complete disconnect with full cleanup, equivalent to logout/reset.


        **This operation performs the following actions:**

        - ‚úÖ Disables auto-reconnect to prevent automatic reconnection

        - ‚úÖ Disconnects WebSocket connection immediately

        - ‚úÖ **Deletes device store from whatsmeow_store database**

        - ‚úÖ Stops lock refresh goroutine

        - ‚úÖ Releases Redis distributed lock

        - ‚úÖ Removes client from in-memory registry

        - ‚úÖ Clears store_jid in api_core database (sets to NULL)


        **Important Notes:**

        - The instance record remains in the database (status becomes "disconnected")

        - To permanently delete the instance, use `DELETE /partner/instances/{instanceId}`

        - After disconnect, you can reconnect by calling `/qrcode` or `/pairphone`

        - All webhook configurations are preserved


        **Use Cases:**

        - User logout from WhatsApp

        - Switching to a different phone number

        - Temporary disconnection for maintenance

        - Resetting a stuck connection


        **Comparison with DELETE endpoint:**

        - Disconnect: Keeps instance record, allows reconnection

        - Delete: Permanent removal, cannot be recovered

        '
      operationId: disconnectInstance
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Complete disconnect with cleanup accepted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
              example:
                value: true
        "401":
          description: Unauthorized (invalid client token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-delivery:
    put:
      tags:
        - Instances
      summary: Update delivery webhook
      description: "Mirrors Z-API `/update-webhook-delivery`, configuring the sent-message webhook endpoint."
      operationId: updateWebhookDelivery
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-received:
    put:
      tags:
        - Instances
      summary: Update received webhook
      description: "Mirrors Z-API `/update-webhook-received`, configuring the incoming message webhook endpoint."
      operationId: updateWebhookReceived
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-received-delivery:
    put:
      tags:
        - Instances
      summary: Update received+delivery webhook
      description:
        Mirrors Z-API `/update-webhook-received-delivery`, configuring the webhook used when `notifySentByMe` is
        enabled.
      operationId: updateWebhookReceivedDelivery
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-message-status:
    put:
      tags:
        - Instances
      summary: Update message status webhook
      description: "Mirrors Z-API `/update-webhook-message-status`, configuring delivery-read status updates."
      operationId: updateWebhookMessageStatus
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-disconnected:
    put:
      tags:
        - Instances
      summary: Update disconnected webhook
      description: "Mirrors Z-API `/update-webhook-disconnected`, configuring the disconnect notification endpoint."
      operationId: updateWebhookDisconnected
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-connected:
    put:
      tags:
        - Instances
      summary: Update connected webhook
      description: "Mirrors Z-API `/update-webhook-connected`, configuring the connection notification endpoint."
      operationId: updateWebhookConnected
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-webhook-chat-presence:
    put:
      tags:
        - Instances
      summary: Update chat presence webhook
      description: "Mirrors Z-API `/update-webhook-chat-presence`, configuring the typing/presence webhook endpoint."
      operationId: updateWebhookChatPresence
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookValueRequest"
      responses:
        "200":
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-notify-sent-by-me:
    put:
      tags:
        - Instances
      summary: Toggle notify-sent-by-me
      description: "Mirrors Z-API `/update-notify-sent-by-me`, enabling or disabling callbacks for messages sent by the instance."
      operationId: updateNotifySentByMe
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NotifySentByMeRequest"
      responses:
        "200":
          description: Setting updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-every-webhooks:
    put:
      tags:
        - Instances
      summary: Update all webhooks at once
      description: "Mirrors Z-API `/update-every-webhooks`, applying the same HTTPS endpoint to every webhook type."
      operationId: updateEveryWebhooks
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookEveryRequest"
      responses:
        "200":
          description: Webhooks updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebhookUpdateResponse"
        "400":
          description: Invalid payload or non-HTTPS URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-call-reject-auto:
    put:
      tags:
        - Instances
      summary: Toggle automatic call rejection
      description: "Mirrors Z-API `/update-call-reject-auto`, enabling or disabling automatic rejection of incoming calls."
      operationId: updateCallRejectAuto
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BoolValueRequest"
      responses:
        "200":
          description: Setting updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValueResponse"
        "400":
          description: Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-call-reject-message:
    put:
      tags:
        - Instances
      summary: Update call rejection message
      description: "Mirrors Z-API `/update-call-reject-message`, setting the message sent when rejecting calls."
      operationId: updateCallRejectMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StringValueRequest"
      responses:
        "200":
          description: Setting updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValueResponse"
        "400":
          description: Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-auto-read-message:
    put:
      tags:
        - Instances
      summary: Toggle automatic message reading
      description: "Mirrors Z-API `/update-auto-read-message`, enabling or disabling automatic marking of messages as read."
      operationId: updateAutoReadMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BoolValueRequest"
      responses:
        "200":
          description: Setting updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ValueResponse"
        "400":
          description: Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/integrator/on-demand/subscription:
    post:
      tags:
        - Partner
      summary: Activate partner subscription
      description: Enables on-demand billing/usage for the specified instance (Z-API parity).
      operationId: partnerSubscribeInstance
      security:
        - PartnerBearer: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Subscription activated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OperationStatusResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/integrator/on-demand/cancel:
    post:
      tags:
        - Partner
      summary: Cancel partner subscription
      description: Cancels the on-demand subscription for the instance, matching Z-API behaviour.
      operationId: partnerCancelInstance
      security:
        - PartnerBearer: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Subscription cancelled
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OperationStatusResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-text:
    post:
      tags:
        - Messages
      summary: Send text message
      description:
        "Sends a text message via WhatsApp with Z-API compatible format.


        **Features:**

        - ‚úÖ Text message with optional reply-to

        - ‚úÖ Typing indicator simulation (delayTyping)

        - ‚úÖ Delayed sending (delayMessage)

        - ‚úÖ Ephemeral/disappearing messages support

        - ‚úÖ Private reply in groups (privateAnswer)

        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)

        - ‚úÖ FIFO queue with per-recipient ordering

        - ‚úÖ Non-blocking (returns immediately with zaapId)


        **Z-API Compatible:** Matches Z-API request/response format exactly.

        "
      operationId: sendTextMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendTextRequest"
            example:
              phone: "5511999999999"
              message: Hello from Z-API!
              delayMessage: 5
              delayTyping: 3
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
              example:
                zaapId: 39BB1684570F00E91090F6BBC7EE7646
                messageId: 39BB1684570F00E91090F6BBC7EE7646
                id: 39BB1684570F00E91090F6BBC7EE7646
        "400":
          description: Invalid request (missing phone or message)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-image:
    post:
      tags:
        - Messages
      summary: Send image message
      description: "Sends an image message via WhatsApp with optional caption.


        **Features:**

        - ‚úÖ Image URL or base64 data URI support

        - ‚úÖ Optional caption/title

        - ‚úÖ View once support (disappears after viewing)

        - ‚úÖ Reply-to message support

        - ‚úÖ Typing indicator and delayed sending

        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)

        - ‚úÖ FIFO queue with per-recipient ordering


        **Supported Formats:**

        - Image URL: `https://example.com/image.jpg`

        - Base64: `data:image/png;base64,iVBORw0KG...`


        **Z-API Compatible:** Matches Z-API request/response format exactly.

        "
      operationId: sendImageMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendImageRequest"
            example:
              phone: "5511999999999"
              image: https://example.com/image.jpg
              caption: Check out this image!
              viewOnce: false
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-sticker:
    post:
      tags:
        - Messages
      summary: Send sticker message
      description: |
        Sends a sticker message via WhatsApp with Z-API compatible format.

        **Features:**
        - ‚úÖ Sticker URL or base64 data URI support
        - ‚úÖ Animated stickers (WebP format)
        - ‚úÖ Reply-to message support
        - ‚úÖ Typing indicator and delayed sending
        - ‚úÖ Ephemeral/disappearing messages support
        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)
        - ‚úÖ Private reply in groups (privateAnswer)
        - ‚úÖ FIFO queue with per-recipient ordering
        - ‚úÖ Non-blocking (returns immediately with zaapId)

        **Sticker Format:**
        - WebP format (animated or static)
        - 512x512 pixels recommended
        - Max 100KB for animated, 500KB for static
        - No caption support (stickers don't have text)

        **Supported Formats:**
        - URL: `https://example.com/sticker.webp`
        - Base64: `data:image/webp;base64,UklGRiQAAABXRUJQ...`

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendStickerMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendStickerRequest"
            example:
              phone: "5511999999999"
              sticker: "https://example.com/sticker.webp"
              delayMessage: 3
              delayTyping: 2
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
              example:
                zaapId: 39BB1684570F00E91090F6BBC7EE7646
                messageId: 39BB1684570F00E91090F6BBC7EE7646
                id: 39BB1684570F00E91090F6BBC7EE7646
                status: queued
        "400":
          description: Invalid request (missing phone or sticker, invalid format)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "sticker must be a valid URL or base64 data URI"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"
  /instances/{instanceId}/token/{instanceToken}/send-gif:
    post:
      tags:
        - Messages
      summary: Send GIF message
      description: |
        Sends a GIF message via WhatsApp with optional caption.

        **Features:**
        - ‚úÖ GIF URL or base64 data URI support
        - ‚úÖ Animated GIFs
        - ‚úÖ Optional caption/text
        - ‚úÖ View once support (disappears after viewing)
        - ‚úÖ Reply-to message support
        - ‚úÖ Typing indicator and delayed sending
        - ‚úÖ Ephemeral/disappearing messages support
        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)
        - ‚úÖ Private reply in groups (privateAnswer)
        - ‚úÖ FIFO queue with per-recipient ordering
        - ‚úÖ Non-blocking (returns immediately with zaapId)

        **GIF Format:**
        - GIF format (animated or static)
        - Any aspect ratio (auto-adjusted by WhatsApp)
        - Max 16MB recommended
        - Supports caption with @mentions

        **Supported Formats:**
        - URL: `https://example.com/animation.gif`
        - Base64: `data:image/gif;base64,R0lGODlhAQABAIAAAP...`

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: sendGifMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendGifRequest"
            example:
              phone: "5511999999999"
              gif: "https://example.com/animation.gif"
              caption: "Check this out! üéâ"
              viewOnce: false
              delayMessage: 3
              delayTyping: 2
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
              example:
                zaapId: 39BB1684570F00E91090F6BBC7EE7646
                messageId: 39BB1684570F00E91090F6BBC7EE7646
                id: 39BB1684570F00E91090F6BBC7EE7646
                status: queued
        "400":
          description: Invalid request (missing phone or gif, invalid format)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "gif must be a valid URL or base64 data URI"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"
  /instances/{instanceId}/token/{instanceToken}/send-audio:
    post:
      tags:
        - Messages
      summary: Send audio/voice message
      description: 'Sends an audio or voice note via WhatsApp.


        **Features:**

        - ‚úÖ Audio URL or base64 data URI support

        - ‚úÖ Voice note (PTT) detection

        - ‚úÖ "Recording audio" indicator (delayTyping)

        - ‚úÖ View once support

        - ‚úÖ Reply-to message support

        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)


        **Supported Formats:** OGG, MP3, WAV


        **Z-API Compatible:** Matches Z-API request/response format exactly.

        '
      operationId: sendAudioMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendAudioRequest"
            example:
              phone: "5511999999999"
              audio: https://example.com/audio.ogg
              delayTyping: 5
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-video:
    post:
      tags:
        - Messages
      summary: Send video message
      description: "Sends a video message via WhatsApp with optional caption.


        **Features:**

        - ‚úÖ Video URL or base64 data URI support

        - ‚úÖ Optional caption/title

        - ‚úÖ View once support

        - ‚úÖ Reply-to message support

        - ‚úÖ Typing indicator and delayed sending

        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)


        **Supported Formats:** MP4, 3GP, AVI, MOV


        **Z-API Compatible:** Matches Z-API request/response format exactly.

        "
      operationId: sendVideoMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendVideoRequest"
            example:
              phone: "5511999999999"
              video: https://example.com/video.mp4
              caption: Check out this video!
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-document:
    post:
      tags:
        - Messages
      summary: Send document message
      description:
        "Sends a document file via WhatsApp with optional caption and filename.


        **Features:**

        - ‚úÖ Document URL or base64 data URI support

        - ‚úÖ Custom filename support

        - ‚úÖ Optional caption/description

        - ‚úÖ Reply-to message support

        - ‚úÖ Typing indicator and delayed sending

        - ‚úÖ Mentions support (mentioned, groupMentioned, mentionedAll)


        **Supported Formats:** PDF, DOC, DOCX, XLS, XLSX, TXT, CSV, ZIP, RAR


        **Z-API Compatible:** Matches Z-API request/response format exactly.

        "
      operationId: sendDocumentMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendDocumentRequest"
            example:
              phone: "5511999999999"
              document: https://example.com/report.pdf
              fileName: Monthly Report.pdf
              caption: Here is the monthly report
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/queue:
    get:
      tags:
        - Queue
      summary: List messages in queue with pagination
      description:
        "Lists all messages in the queue for a specific instance with Z-API compatible pagination.


        **Z-API Compatibility:**

        - Uses `page` and `pageSize` parameters (Z-API standard)

        - Returns direct array of messages (not wrapped in object)

        - Field names in camelCase (Z-API format)

        - Delays in seconds (not milliseconds)

        - Created timestamp in milliseconds


        **Response Format:**

        - Direct array: `[{message1}, {message2}, ...]`

        - NOT wrapped: `{data: [{message1}]}` ‚ùå


        **Pagination:**

        - `page`: Page number starting from 1

        - `pageSize`: Messages per page (default 100, max 1000)

        "
      operationId: listQueueMessages
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: page
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number (1-indexed)
          example: 1
        - in: query
          name: pageSize
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 100
          description: Number of messages per page
          example: 50
      responses:
        "200":
          description: List of queue messages (direct array)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QueueListResponse"
              example:
                - _id: 39BB1684570F00E91090F6BBC7EE7646
                  zaapId: 39BB1684570F00E91090F6BBC7EE7646
                  messageId: 7AD29EAA5EF34C301F0B
                  instanceId: 550e8400-e29b-41d4-a716-446655440000
                  phone: "5511999999999"
                  message: Hello from Z-API
                  delayMessage: 5
                  delayTyping: 3
                  created: 1624977905648
                  messageType: text
                  status: available
                  sequenceNumber: 1
                  attempt: 0
                  maxAttempts: 3
                - _id: A1B2C3D4E5F6G7H8I9J0K1L2M3N4O5P6
                  zaapId: A1B2C3D4E5F6G7H8I9J0K1L2M3N4O5P6
                  messageId: F5G6H7I8J9K0L1M2N3O4
                  instanceId: 550e8400-e29b-41d4-a716-446655440000
                  phone: 120363XXXXX@g.us
                  message: null
                  delayMessage: 0
                  delayTyping: 0
                  created: 1624977906000
                  messageType: image
                  status: scheduled
                  sequenceNumber: 2
                  attempt: 0
                  maxAttempts: 3
        "401":
          description: Unauthorized (invalid or missing Client-Token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      tags:
        - Queue
      summary: Clear all pending messages in queue
      description:
        "Clears all pending messages from the queue for a specific instance.


        **Behavior:**

        - ‚úÖ Removes messages in state: `available`, `scheduled`

        - ‚ùå Does NOT affect messages: `running`, `completed`, `failed`, `discarded`


        **Use Cases:**

        - Emergency stop of all pending messages

        - Queue cleanup during maintenance

        - Cancel all scheduled messages at once


        **Z-API Compatible:** Matches Z-API endpoint structure and behavior.

        "
      operationId: clearQueue
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Queue cleared successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QueueClearResponse"
              example:
                message: Queue cleared successfully
        "401":
          description: Unauthorized (invalid or missing Client-Token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/queue/count:
    get:
      tags:
        - Queue
      summary: Get queue message count
      description:
        "Returns the total number of messages in the queue for a specific instance.


        **Z-API Compatible:** Matches Z-API response format exactly.

        "
      operationId: getQueueCount
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Queue message count
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QueueCountResponse"
              example:
                count: 42
        "401":
          description: Unauthorized (invalid or missing Client-Token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/queue/{zaapId}:
    delete:
      tags:
        - Queue
      summary: Cancel a specific message in queue
      description:
        "Cancels a pending message by its zaapId (returned when message was enqueued).


        **Behavior:**

        - ‚úÖ Cancels messages in state: `available`, `scheduled`, `retryable`

        - ‚ùå Returns error if message already processed or doesn't exist


        **Z-API Compatible:** Matches Z-API endpoint structure and behavior.

        "
      operationId: cancelQueueMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: path
          name: zaapId
          required: true
          schema:
            type: string
          description: Message ID returned when message was sent (zaapId)
          example: 39BB1684570F00E91090F6BBC7EE7646
      responses:
        "200":
          description: Message cancelled successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/QueueCancelResponse"
              example:
                message: Message cancelled successfully
        "400":
          description: Message not found or already processed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "job not found or already processed: 39BB1684570F00E91090F6BBC7EE7646"
        "401":
          description: Unauthorized (invalid or missing Client-Token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-location:
    post:
      tags:
        - Messages
      summary: Send location message
      description:
        Sends a location pin via WhatsApp with GPS coordinates, optional name/address, replies, mentions, and ephemeral
        support. Z-API compatible.
      operationId: sendLocationMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendLocationRequest"
            example:
              phone: "5511999999999"
              latitude: -23.55052
              longitude: -46.633308
              name: Paulista Avenue
              address: Av. Paulista, 1578 - S√£o Paulo, SP
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-contact:
    post:
      tags:
        - Messages
      summary: Send single contact card
      description:
        Sends a single contact card via WhatsApp. Fully compatible with Z-API format using contactName, contactPhone,
        and optional contactBusinessDescription fields.
      operationId: sendContactMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendContactRequest"
            example:
              phone: "5511999999999"
              contactName: John Doe
              contactPhone: "5511888888888"
              contactBusinessDescription: Sales Manager at Example Corp
              firstName: John
              lastName: Doe
              email: john.doe@example.com
              address:
                type: WORK
                street: Av. Paulista, 1578
                city: S√£o Paulo
                region: SP
                country: Brasil
              mentioned:
                - "5511990000000"
              groupMentioned:
                - phone: 120363000000000@g.us
                  subject: Equipe Comercial
              privateAnswer: false
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-contacts:
    post:
      tags:
        - Messages
      summary: Send multiple contact cards
      description:
        Sends multiple contact cards via WhatsApp in a single message. Fully compatible with Z-API format. Maximum
        10 contacts per request.
      operationId: sendContactsMessage
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendContactsRequest"
            example:
              phone: "5511999999999"
              contacts:
                - contactName: John Doe
                  contactPhone: "5511888888888"
                  contactBusinessDescription: Sales Manager
                  jobTitle: Sales Director
                  address:
                    type: WORK
                    street: Av. Paulista, 1578
                    city: S√£o Paulo
                    region: SP
                    country: Brasil
                - contactName: Jane Smith
                  contactPhone: "5511777777777"
                  contactBusinessDescription: CEO
                  email: jane.smith@example.com
                  url: https://example.com/jane
              privateAnswer: false
      responses:
        "200":
          description: Message enqueued successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendMessageResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/contacts:
    get:
      tags:
        - Contacts
      summary: List WhatsApp contacts
      description: |
        Returns a paginated list of WhatsApp contacts from the instance's device.

        **Features:**
        - ‚úÖ Pagination support (page, pageSize)
        - ‚úÖ Device contacts integration (name, short name)
        - ‚úÖ WhatsApp profile data (notify/push name)
        - ‚úÖ VCard information (if shared)
        - ‚úÖ Privacy-aware (respects WhatsApp privacy settings)
        - ‚úÖ X-Total-Count header for total count

        **Data Sources:**
        - Device address book (name, short, vname fields)
        - WhatsApp profile (notify field from push name)
        - VCard sharing (vname field)

        **Field Availability:**
        - `phone`: Always present (WhatsApp JID)
        - `name`, `short`, `vname`: Only if in address book
        - `notify`: Only if user has interacted with contact

        **Privacy Notes:** Contact data respects WhatsApp privacy settings.
        Users who hide their profile will only show notify field.

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: getContacts
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: page
          required: true
          schema:
            type: integer
            minimum: 1
          description: Page number (1-indexed)
          example: 1
        - in: query
          name: pageSize
          required: true
          schema:
            type: integer
            minimum: 1
            maximum: 100
          description: Number of contacts per page (max 100)
          example: 20
      responses:
        "200":
          description: Contacts retrieved successfully
          headers:
            X-Total-Count:
              description: Total number of contacts available
              schema:
                type: integer
              example: 150
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Contact"
              example:
                - phone: "5511999999999"
                  name: "Jo√£o Silva Santos"
                  short: "Jo√£o"
                  notify: "Jo√£o S."
                  vname: null
                - phone: "5511888888888"
                  name: "Maria Oliveira"
                  short: "Maria"
                  notify: "Maria O."
                  vname: null
                - phone: "5511777777777"
                  name: null
                  short: null
                  notify: "Carlos"
                  vname: null
        "400":
          description: Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "page must be >= 1"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"
  /instances/{instanceId}/token/{instanceToken}/phone-exists/{phone}:
    get:
      tags:
        - Contacts
      summary: Check if phone number has WhatsApp
      description: |
        Verifies if a phone number is registered on WhatsApp.

        **Use Cases:**
        - Form validation (verify phone before saving)
        - Contact verification before sending messages
        - Lead qualification in CRM systems

        **Important Notes:**
        - Use this API for form validation purposes
        - Do NOT use before sending messages (Z-API validates automatically)
        - Using for message validation creates duplicate checks
        - Not designed for spam - use responsibly

        **Phone Format:**
        - International format: DDI + DDD + NUMBER
        - Numbers only (no formatting, spaces, or masks)
        - Example: `551199999999` (Brazil mobile)

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: phoneExists
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: phone
          in: path
          required: true
          schema:
            type: string
            pattern: "^\\d+$"
          description: |
            Phone number in international format (DDI DDD NUMBER).
            Numbers only - no formatting, spaces, or masks.
          example: "551199999999"
      responses:
        "200":
          description: Phone validation result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PhoneExistsResponse"
              examples:
                exists_with_lid:
                  summary: Phone exists with LID
                  description: Phone number is registered on WhatsApp and LID is available
                  value:
                    exists: true
                    phone: "5521979232690"
                    lid: "140712372899859@lid"
                exists_without_lid:
                  summary: Phone exists without LID
                  description: Phone number is registered but LID is not available
                  value:
                    exists: true
                    phone: "5521979232690"
                    lid: null
                not_exists:
                  summary: Phone does not exist
                  description: Phone number is not registered on WhatsApp
                  value:
                    exists: false
                    phone: null
                    lid: null
        "400":
          description: Invalid phone number format
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Phone number must contain only digits"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Failed to check phone number"
        "503":
          description: Contacts service not available
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Contacts service not available"
  /instances/{instanceId}/token/{instanceToken}/phone-exists-batch:
    post:
      tags:
        - Contacts
      summary: Batch validate phone numbers on WhatsApp
      description: |
        Validates multiple phone numbers to check if they are registered on WhatsApp.

        **Use Cases:**
        - Bulk contact validation before marketing campaigns
        - CRM data cleansing and enrichment
        - Lead qualification at scale
        - Form validation with multiple numbers

        **Important Notes:**
        - Maximum batch size: 50,000 numbers per request
        - Use for validation purposes, not before sending messages
        - Not designed for spam - use responsibly

        **Phone Format:**
        - International format: DDI + DDD + NUMBER
        - Numbers only (no formatting, spaces, or masks)
        - Example: `551199999999` (Brazil mobile)

        **Response Fields:**
        - `exists`: Whether the phone has WhatsApp
        - `inputPhone`: The number as you sent it
        - `outputPhone`: The number formatted by WhatsApp (may include 9th digit)

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: phoneExistsBatch
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PhoneExistsBatchRequest"
            example:
              phones:
                - "554499999999"
                - "554488888888"
      responses:
        "200":
          description: Batch validation results
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/PhoneExistsBatchResponse"
              example:
                - exists: true
                  inputPhone: "554499999999"
                  outputPhone: "554499999999"
                - exists: false
                  inputPhone: "554488888888"
                  outputPhone: "554488888888"
        "400":
          description: Invalid request (empty array, invalid format, or batch size exceeded)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                empty_array:
                  value:
                    error: "Phones array is required and cannot be empty"
                invalid_format:
                  value:
                    error: "Phone at index 0 must contain only digits"
                batch_exceeded:
                  value:
                    error: "Batch size exceeds maximum limit of 50000 numbers"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Failed to check phone numbers"
        "503":
          description: Contacts service not available
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Contacts service not available"
  /instances/{instanceId}/token/{instanceToken}/chats:
    get:
      tags:
        - Chats
      summary: List WhatsApp chats
      description: |
        Returns a paginated list of WhatsApp chats (conversations) for the instance.

        **Features:**
        - ‚úÖ Pagination support (page, pageSize)
        - ‚úÖ Individual, group, and community chats
        - ‚úÖ Unread message counts
        - ‚úÖ Last message timestamp
        - ‚úÖ Mute status and expiry
        - ‚úÖ Archive, pin, and spam status
        - ‚úÖ X-Total-Count header for total count
        - ‚úÖ Ordered by lastMessageTime (most recent first)

        **Chat Types:**
        - Individual chats (person-to-person)
        - Group chats (multiple participants)
        - Community announcement channels

        **Data Sources:**
        - WhatsApp chat metadata (from store)
        - Message history (last message timestamp)
        - Chat settings (mute, archive, pin, spam status)

        **Ordering:** Chats are ordered by lastMessageTime descending (most recent first).

        **Unread Counts:** Both `unread` and `messagesUnread` fields represent the same count (Z-API compatibility).

        **Z-API Compatible:** Matches Z-API request/response format exactly.
      operationId: getChats
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: page
          required: true
          schema:
            type: integer
            minimum: 1
          description: Page number (1-indexed)
          example: 1
        - in: query
          name: pageSize
          required: true
          schema:
            type: integer
            minimum: 1
            maximum: 100
          description: Number of chats per page (max 100)
          example: 20
      responses:
        "200":
          description: Chats retrieved successfully
          headers:
            X-Total-Count:
              description: Total number of chats available
              schema:
                type: integer
              example: 75
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Chat"
              example:
                - phone: "5511999999999@s.whatsapp.net"
                  name: "Jo√£o Silva"
                  unread: 5
                  lastMessageTime: "2025-01-11T14:30:00Z"
                  isMuted: false
                  muteEndTime: "0001-01-01T00:00:00Z"
                  isMarkedSpam: false
                  archived: false
                  pinned: true
                  messagesUnread: 5
                  isGroup: false
                - phone: "120363047204807488@g.us"
                  name: "Fam√≠lia Silva"
                  unread: 12
                  lastMessageTime: "2025-01-11T13:45:00Z"
                  isMuted: true
                  muteEndTime: "2025-01-12T14:30:00Z"
                  isMarkedSpam: false
                  archived: false
                  pinned: false
                  messagesUnread: 12
                  isGroup: true
                - phone: "5511888888888@s.whatsapp.net"
                  name: "Maria Oliveira"
                  unread: 0
                  lastMessageTime: "2025-01-11T10:15:00Z"
                  isMuted: false
                  muteEndTime: "0001-01-01T00:00:00Z"
                  isMarkedSpam: false
                  archived: true
                  pinned: false
                  messagesUnread: 0
                  isGroup: false
        "400":
          description: Invalid pagination parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "page must be >= 1"
        "401":
          description: Unauthorized (invalid Client-Token or instance token)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "unauthorized"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not found"
        "503":
          description: Instance not connected to WhatsApp
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "instance not connected"
  /instances/{instanceId}/token/{instanceToken}/groups:
    get:
      tags:
        - Groups
      summary: List groups
      description: Returns a paginated list of WhatsApp groups the instance participates in (Z-API compatible).
      operationId: listGroups
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: page
          required: true
          schema:
            type: integer
            minimum: 1
          description: Page number (1-indexed).
          example: 1
        - in: query
          name: pageSize
          required: true
          schema:
            type: integer
            minimum: 1
          description: Number of groups to return per page.
          example: 10
      responses:
        "200":
          description: Array of groups (unwrapped, matching Z-API behaviour).
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/GroupListItem"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/create-group:
    post:
      tags:
        - Groups
      summary: Create group
      description: Creates a WhatsApp group with the provided participants (Z-API compatible).
      operationId: createGroup
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupCreateRequest"
            example:
              autoInvite: true
              groupName: "Grupo Z-API"
              phones:
                - "5544999999999"
                - "5544888888888"
      responses:
        "200":
          description: Group created successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupCreateResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-group-name:
    post:
      tags:
        - Groups
      summary: Update group name
      description: Updates the subject (name) of an existing group.
      operationId: updateGroupName
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupUpdateNameRequest"
            example:
              groupId: "120363019502650977-group"
              groupName: "Mudou o nome do meu grupo"
      responses:
        "200":
          description: Group name updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-group-photo:
    post:
      tags:
        - Groups
      summary: Update group photo
      description: Updates the profile picture of an existing group.
      operationId: updateGroupPhoto
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupUpdatePhotoRequest"
            example:
              groupId: "120363019502650977-group"
              groupPhoto: "https://www.z-api.io/wp-content/themes/z-api/dist/images/logo.svg"
      responses:
        "200":
          description: Group photo updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/add-participant:
    post:
      tags:
        - Groups
        - Communities
      summary: Add participants
      description: Adds participants to a group or to the announcements group of a community.
      operationId: addParticipants
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/GroupAddParticipantsRequest"
                - $ref: "#/components/schemas/CommunityAddParticipantsRequest"
            examples:
              group:
                summary: Add participants to a group
                value:
                  autoInvite: true
                  groupId: "120363019502650977-group"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
              community:
                summary: Add participants to a community
                value:
                  autoInvite: true
                  communityId: "120363019502650977"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
      responses:
        "200":
          description: Participants added successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, group or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/remove-participant:
    post:
      tags:
        - Groups
        - Communities
      summary: Remove participants
      description: Removes participants from a group or a community announcements group.
      operationId: removeParticipants
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/GroupParticipantListRequest"
                - $ref: "#/components/schemas/CommunityParticipantListRequest"
            examples:
              group:
                summary: Remove participants from a group
                value:
                  groupId: "120363019502650977-group"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
              community:
                summary: Remove participants from a community
                value:
                  communityId: "120363019502650977"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
      responses:
        "200":
          description: Participants removed successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, group or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/approve-participant:
    post:
      tags:
        - Groups
      summary: Approve participants
      description: Approves pending join requests for a group.
      operationId: approveGroupParticipants
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupParticipantListRequest"
            example:
              groupId: "120363019502650977-group"
              phones:
                - "5544999999999"
                - "5544888888888"
      responses:
        "200":
          description: Participants approved successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/reject-participant:
    post:
      tags:
        - Groups
      summary: Reject participants
      description: Rejects pending join requests for a group.
      operationId: rejectGroupParticipants
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupParticipantListRequest"
            example:
              groupId: "120363019502650977-group"
              phones:
                - "5544999999999"
                - "5544888888888"
      responses:
        "200":
          description: Participants rejected successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/add-admin:
    post:
      tags:
        - Groups
        - Communities
      summary: Promote administrators
      description: Promotes participants to administrators for a group or community.
      operationId: addAdministrators
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/GroupParticipantListRequest"
                - $ref: "#/components/schemas/CommunityAdminMutationRequest"
            examples:
              group:
                summary: Promote group administrators
                value:
                  groupId: "120363019502650977-group"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
              community:
                summary: Promote community administrators
                value:
                  communityId: "120363019502650977"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
      responses:
        "200":
          description: Administrators promoted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, group or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/remove-admin:
    post:
      tags:
        - Groups
        - Communities
      summary: Demote administrators
      description: Removes administrator privileges from participants in a group or community.
      operationId: removeAdministrators
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: "#/components/schemas/GroupParticipantListRequest"
                - $ref: "#/components/schemas/CommunityAdminMutationRequest"
            examples:
              group:
                summary: Demote group administrators
                value:
                  groupId: "120363019502650977-group"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
              community:
                summary: Demote community administrators
                value:
                  communityId: "120363019502650977"
                  phones:
                    - "5544999999999"
                    - "5544888888888"
      responses:
        "200":
          description: Administrators demoted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, group or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/leave-group:
    post:
      tags:
        - Groups
      summary: Leave group
      description: Removes the connected WhatsApp account from a group.
      operationId: leaveGroup
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupLeaveRequest"
            example:
              groupId: "120363019502650977-group"
      responses:
        "200":
          description: Left the group successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/group-metadata/{groupId}:
    get:
      tags:
        - Groups
      summary: Get group metadata
      description: Returns detailed metadata for a specific group.
      operationId: getGroupMetadata
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: groupId
          in: path
          required: true
          schema:
            type: string
          description: "Group JID (suffix `-group`)."
      responses:
        "200":
          description: Group metadata returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupMetadataResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/light-group-metadata/{groupId}:
    get:
      tags:
        - Groups
      summary: Get group metadata (light)
      description: Returns metadata for a specific group without fetching the invitation link (lower latency variant).
      operationId: getLightGroupMetadata
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: groupId
          in: path
          required: true
          schema:
            type: string
          description: "Group JID (suffix `-group`)."
      responses:
        "200":
          description: Group metadata returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupMetadataResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/group-invitation-metadata:
    get:
      tags:
        - Groups
      summary: Resolve group invitation metadata
      description: Resolves a group invitation link and returns metadata about the group.
      operationId: getGroupInvitationMetadata
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: url
          required: true
          schema:
            type: string
            format: uri
          description: Group invitation URL.
      responses:
        "200":
          description: Invitation metadata returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupInvitationMetadataResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or invitation not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-group-settings:
    post:
      tags:
        - Groups
      summary: Update group settings
      description: Updates group preferences such as admin-only messaging and approvals.
      operationId: updateGroupSettings
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupSettingsRequest"
            example:
              phone: "120363019502650977-group"
              adminOnlyMessage: true
              adminOnlySettings: true
              requireAdminApproval: false
              adminOnlyAddMember: true
      responses:
        "200":
          description: Group settings updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-group-description:
    post:
      tags:
        - Groups
      summary: Update group description
      description: Updates the description text of a group.
      operationId: updateGroupDescription
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupDescriptionRequest"
            example:
              groupId: "120363019502650977-group"
              groupDescription: "Descri√ß√£o do grupo"
      responses:
        "200":
          description: Group description updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/redefine-invitation-link/{resourceId}:
    post:
      tags:
        - Groups
        - Communities
      summary: Redefine invitation link
      description: Generates a new invitation link for a group or community.
      operationId: redefineInvitationLink
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: resourceId
          in: path
          required: true
          schema:
            type: string
          description: "Group JID (suffix `-group`) or community ID whose invitation link should be reset."
      responses:
        "200":
          description: Invitation link regenerated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvitationLinkResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, group or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/group-invitation-link/{groupId}:
    post:
      tags:
        - Groups
      summary: Get group invitation link
      description: Returns the current invitation link for a group.
      operationId: getGroupInvitationLink
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: groupId
          in: path
          required: true
          schema:
            type: string
          description: "Group JID (suffix `-group`)."
      responses:
        "200":
          description: Invitation link retrieved successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupInvitationLinkResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/accept-invite-group:
    get:
      tags:
        - Groups
      summary: Accept group invite
      description: Accepts a group invitation link on behalf of the connected WhatsApp account.
      operationId: acceptGroupInvite
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: url
          required: true
          schema:
            type: string
            format: uri
          description: Group invitation URL to accept.
      responses:
        "200":
          description: Invitation accepted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanSuccessResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or invitation not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/communities:
    post:
      tags:
        - Communities
      summary: Create community
      description: Creates a new WhatsApp community (Z-API compatible).
      operationId: createCommunity
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityCreateRequest"
            example:
              name: "Minha primeira Comunidade"
              description: "Comunidade de testes"
      responses:
        "200":
          description: Community created successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CommunityCreateResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    get:
      tags:
        - Communities
      summary: List communities
      description: Returns the communities the connected account participates in.
      operationId: listCommunities
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
          description: Optional page number (1-indexed).
          example: 1
        - in: query
          name: pageSize
          schema:
            type: integer
            minimum: 1
          description: Optional page size.
          example: 10
      responses:
        "200":
          description: Array of communities (unwrapped, matching Z-API behaviour).
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CommunityListItem"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/communities/link:
    post:
      tags:
        - Communities
      summary: Link groups to community
      description: Links one or more groups to a community.
      operationId: linkCommunityGroups
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityLinkRequest"
            example:
              communityId: "98372465382764532938"
              groupsPhones:
                - "1345353454354354-group"
                - "1203634230225498-group"
      responses:
        "200":
          description: Groups linked successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanSuccessResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, community or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/communities/unlink:
    post:
      tags:
        - Communities
      summary: Unlink groups from community
      description: Removes the association between groups and a community.
      operationId: unlinkCommunityGroups
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityLinkRequest"
            example:
              communityId: "98372465382764532938"
              groupsPhones:
                - "1345353454354354-group"
      responses:
        "200":
          description: Groups unlinked successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanSuccessResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance, community or group not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/communities/settings:
    post:
      tags:
        - Communities
      summary: Update community settings
      description: Updates who can add new groups to the community.
      operationId: updateCommunitySettings
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunitySettingsRequest"
            example:
              communityId: "98372465382764532938"
              whoCanAddNewGroups: "admins"
      responses:
        "200":
          description: Settings updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanSuccessResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-community-description:
    post:
      tags:
        - Communities
      summary: Update community description
      description: Updates the textual description of a community.
      operationId: updateCommunityDescription
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommunityDescriptionRequest"
            example:
              communityId: "120363565656565656"
              communityDescription: "descri√ß√£o da comunidade"
      responses:
        "200":
          description: Description updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/communities-metadata/{communityId}:
    get:
      tags:
        - Communities
      summary: Get community metadata
      description: Returns metadata and linked groups for a community.
      operationId: getCommunityMetadata
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: communityId
          in: path
          required: true
          schema:
            type: string
          description: Community identifier.
      responses:
        "200":
          description: Community metadata returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CommunityMetadataResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or community not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/create-newsletter:
    post:
      tags:
        - Channels
      summary: Create channel
      description: Creates a WhatsApp channel (newsletter) owned by the connected account.
      operationId: createNewsletter
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterCreateRequest"
            example:
              name: "Nome do canal"
              description: "Descri√ß√£o do canal"
      responses:
        "201":
          description: Channel created successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NewsletterCreateResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-newsletter-picture:
    post:
      tags:
        - Channels
      summary: Update channel picture
      description: Updates the profile picture of an existing channel.
      operationId: updateNewsletterPicture
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterUpdatePictureRequest"
            example:
              id: "120363336258908380@newsletter"
              pictureUrl: "https://www.funnelchatapi.io/wp-content/themes/funnelchatapi/dist/images/logo.svg"
      responses:
        "201":
          description: Channel picture updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-newsletter-name:
    post:
      tags:
        - Channels
      summary: Update channel name
      description: Updates the display name of a channel.
      operationId: updateNewsletterName
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterUpdateNameRequest"
            example:
              id: "120363336258908380@newsletter"
              name: "Novo nome do canal"
      responses:
        "201":
          description: Channel name updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/update-newsletter-description:
    post:
      tags:
        - Channels
      summary: Update channel description
      description: Updates the description of a channel.
      operationId: updateNewsletterDescription
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterUpdateDescriptionRequest"
            example:
              id: "120363336258908380@newsletter"
              description: "Nova descri√ß√£o do canal"
      responses:
        "201":
          description: Channel description updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/follow-newsletter:
    put:
      tags:
        - Channels
      summary: Follow channel
      description: Follows a channel (newsletter) to receive updates.
      operationId: followNewsletter
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterIdRequest"
            example:
              id: "120363336258908380@newsletter"
      responses:
        "200":
          description: Channel followed successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/unfollow-newsletter:
    put:
      tags:
        - Channels
      summary: Unfollow channel
      description: Stops following a channel.
      operationId: unfollowNewsletter
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterIdRequest"
            example:
              id: "120363336258908380@newsletter"
      responses:
        "200":
          description: Channel unfollowed successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/mute-newsletter:
    put:
      tags:
        - Channels
      summary: Mute channel
      description: Mutes notifications for a channel.
      operationId: muteNewsletter
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterIdRequest"
            example:
              id: "120363336258908380@newsletter"
      responses:
        "200":
          description: Channel muted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/unmute-newsletter:
    put:
      tags:
        - Channels
      summary: Unmute channel
      description: Unmutes notifications for a channel.
      operationId: unmuteNewsletter
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterIdRequest"
            example:
              id: "120363336258908380@newsletter"
      responses:
        "200":
          description: Channel unmuted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/delete-newsletter:
    delete:
      tags:
        - Channels
      summary: Delete channel
      description: Deletes a channel owned by the connected account.
      operationId: deleteNewsletter
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterIdRequest"
            example:
              id: "120363336258908380@newsletter"
      responses:
        "200":
          description: Channel deleted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter:
    get:
      tags:
        - Channels
      summary: List channels
      description: Returns metadata for channels followed or owned by the connected account.
      operationId: listNewsletters
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      responses:
        "200":
          description: Array of channels (unwrapped, matching Z-API behaviour).
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/NewsletterMetadata"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter/metadata/{newsletterId}:
    get:
      tags:
        - Channels
      summary: Get channel metadata
      description: Returns metadata about a specific channel (newsletter).
      operationId: getNewsletterMetadata
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: "Channel identifier (suffix `@newsletter`)."
      responses:
        "200":
          description: Channel metadata returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NewsletterMetadata"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/search-newsletter:
    post:
      tags:
        - Channels
      summary: Search channels
      description: Searches for public channels using the filters supported by WhatsApp.
      operationId: searchNewsletters
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterSearchRequest"
            example:
              limit: 50
              view: TRENDING
              filters:
                countryCodes:
                  - BR
                  - CA
              searchText: "Z-API"
      responses:
        "200":
          description: Search results returned successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NewsletterSearchResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter/settings/{newsletterId}:
    post:
      tags:
        - Channels
      summary: Update channel settings
      description: Updates channel reaction settings.
      operationId: updateNewsletterSettings
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: "Channel identifier (suffix `@newsletter`)."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterSettingsRequest"
            example:
              reactionCodes: basic
      responses:
        "201":
          description: Channel settings updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/send-newsletter-admin-invite:
    post:
      tags:
        - Channels
      summary: Send channel admin invitation
      description: Sends an invitation to a participant to become channel administrator via direct message.
      operationId: sendNewsletterAdminInvite
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendNewsletterAdminInviteRequest"
            example:
              id: "123456789@newsletter"
              phone: "5511999999999"
      responses:
        "201":
          description: Admin invitation sent successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter/accept-admin-invite/{newsletterId}:
    post:
      tags:
        - Channels
      summary: Accept channel admin invite
      description: Accepts an invitation to become administrator of a channel.
      operationId: acceptNewsletterAdminInvite
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: "Channel identifier (suffix `@newsletter`)."
      responses:
        "201":
          description: Admin invitation accepted successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter/remove-admin/{newsletterId}:
    post:
      tags:
        - Channels
      summary: Remove channel admin
      description: Removes an administrator from a channel.
      operationId: removeNewsletterAdmin
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: "Channel identifier (suffix `@newsletter`)."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterAdminActionRequest"
            example:
              phone: "5544999999999"
      responses:
        "201":
          description: Administrator removed successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter/revoke-admin-invite/{newsletterId}:
    post:
      tags:
        - Channels
      summary: Revoke channel admin invite
      description: Revokes a pending administrator invitation for a channel.
      operationId: revokeNewsletterAdminInvite
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: "Channel identifier (suffix `@newsletter`)."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterAdminActionRequest"
            example:
              phone: "5544999999999"
      responses:
        "201":
          description: Invitation revoked successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BooleanStatusResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /instances/{instanceId}/token/{instanceToken}/newsletter/transfer-ownership/{newsletterId}:
    post:
      tags:
        - Channels
      summary: Transfer channel ownership
      description: Transfers ownership of a channel to another administrator.
      operationId: transferNewsletterOwnership
      security:
        - ClientTokenAuth: []
      parameters:
        - $ref: "#/components/parameters/InstanceId"
        - $ref: "#/components/parameters/InstanceToken"
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: "Channel identifier (suffix `@newsletter`)."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewsletterTransferOwnershipRequest"
            examples:
              basic:
                summary: Transfer ownership and keep current admin role
                value:
                  phone: "5544999999999"
              quitAdmin:
                summary: Transfer ownership and leave admin role
                value:
                  phone: "5544999999999"
                  quitAdmin: true
      responses:
        "200":
          description: Ownership transfer attempted.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NewsletterTransferOwnershipResponse"
        "400":
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Instance or channel not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "503":
          description: Instance not connected
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
